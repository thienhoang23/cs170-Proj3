cscope 15 /mnt/c/Users/Thien Hoang/workspace/cs170/Proj3               0000356100
	@bin/coff.h

5 
	sfehdr
 {

6 
	mf_magic
;

7 
	mf_nsús
;

8 
	mf_timd©
;

9 
	mf_sym±r
;

10 
	mf_nsyms
;

11 
	mf_İthdr
;

12 
	mf_æags
;

15 
	#MIPSELMAGIC
 0x0162

	)

17 
	#OMAGIC
 0407

	)

18 
	#SOMAGIC
 0x0701

	)

20 
	saouthdr
 {

21 
	mmagic
;

22 
	mv¡amp
;

23 
	mtsize
;

24 
	mdsize
;

25 
	mbsize
;

26 
	m’Œy
;

27 
	m‹xt_¡¬t
;

28 
	md©a_¡¬t
;

29 
	mbss_¡¬t
;

30 
	mg´mask
;

31 
	mırmask
[4];

32 
	mgp_v®ue
;

33 } 
	tAOUTHDR
;

34 
	#AOUTHSZ
 (
AOUTHDR
)

	)

37 
	ssúhdr
 {

38 
	ms_Çme
[8];

39 
	ms_·ddr
;

40 
	ms_vaddr
;

41 
	ms_size
;

42 
	ms_sú±r
;

43 
	ms_»ÍŒ
;

44 
	ms_ÊnİŒ
;

45 
	ms_Ä–oc
;

46 
	ms_ÆÂo
;

47 
	ms_æags
;

	@bin/coff2flat.c

15 
	#MAIN


	)

16 
	~"cİyright.h
"

17 #undeà
MAIN


19 
	~<fehdr.h
>

20 
	~<aouthdr.h
>

21 
	~<súhdr.h
>

22 
	~<»loc.h
>

23 
	~<syms.h
>

24 
	~<sys/ty³s.h
>

25 
	~<sys/¡©.h
>

26 
	~<fú.h
>

27 
	~<lim™s.h
>

28 
	~<¡dio.h
>

31 
	#SckSize
 1024

	)

32 
	#R—dSŒuù
(
f
,
s
è
	`R—d
(f,(*)&s,(s))

	)

34 *
m®loc
();

37 
	$R—d
(
fd
, *
buf
, 
nBy‹s
)

39 ià(
	`»ad
(
fd
, 
buf
, 
nBy‹s
) !=‚Bytes) {

40 
	`årštf
(
¡d”r
, "File isoo short\n");

41 
	`ex™
(1);

43 
	}
}

46 
	$Wr™e
(
fd
, *
buf
, 
nBy‹s
)

48 ià(
	`wr™e
(
fd
, 
buf
, 
nBy‹s
) !=‚Bytes) {

49 
	`årštf
(
¡d”r
, "Unableo write file\n");

50 
	`ex™
(1);

52 
	}
}

55 
	$maš
 (
¬gc
, **
¬gv
)

57 
fdIn
, 
fdOut
, 
num£ùiÚs
, 
i
, 
tİ
, 
tmp
;

58 
fehdr
 
feh
;

59 
aouthdr
 
sy¡emh
;

60 
súhdr
 *
£ùiÚs
;

61 *
bufãr
;

63 ià(
¬gc
 < 2) {

64 
	`årštf
(
¡d”r
, "U§ge: % <coffFeName> <æ©FeName>\n", 
¬gv
[0]);

65 
	`ex™
(1);

69 
fdIn
 = 
	`İ’
(
¬gv
[1], 
O_RDONLY
, 0);

70 ià(
fdIn
 == -1) {

71 
	`³¼Ü
(
¬gv
[1]);

72 
	`ex™
(1);

76 
fdOut
 = 
	`İ’
(
¬gv
[2], 
O_RDWR
|
O_CREAT
|
O_TRUNC
, 0666);

77 ià(
fdIn
 == -1) {

78 
	`³¼Ü
(
¬gv
[2]);

79 
	`ex™
(1);

83 
	`R—dSŒuù
(
fdIn
,
feh
);

84 ià(
feh
.
f_magic
 !ğ
MIPSELMAGIC
) {

85 
	`årštf
(
¡d”r
, "File is‚ot‡ MIPSEL COFF file\n");

86 
	`ex™
(1);

90 
	`R—dSŒuù
(
fdIn
,
sy¡emh
);

91 ià(
sy¡emh
.
magic
 !ğ
OMAGIC
) {

92 
	`årštf
(
¡d”r
, "File is‚ot‡ OMAGIC file\n");

93 
	`ex™
(1);

97 
num£ùiÚs
 = 
feh
.
f_nsús
;

98 
£ùiÚs
 = (
súhdr
 *)
	`m®loc
(
feh
.
f_nsús
 * (scnhdr));

99 
	`R—d
(
fdIn
, (*è
£ùiÚs
, 
feh
.
f_nsús
 * (
súhdr
));

102 
	`´štf
("Lßdšg %d seùiÚs:\n", 
feh
.
f_nsús
);

103 
tİ
 = 0, 
i
 = 0; i < 
feh
.
f_nsús
; i++) {

104 
	`´štf
("\t\"%s\", filepos 0x%x, mempos 0x%x, size 0x%x\n",

105 
£ùiÚs
[
i
].
s_Çme
, seùiÚs[i].
s_sú±r
,

106 
£ùiÚs
[
i
].
s_·ddr
, seùiÚs[i].
s_size
);

107 ià((
£ùiÚs
[
i
].
s_·ddr
 + seùiÚs[i].
s_size
è> 
tİ
)

108 
tİ
 = 
£ùiÚs
[
i
].
s_·ddr
 + seùiÚs[i].
s_size
;

109 ià(
	`¡rcmp
(
£ùiÚs
[
i
].
s_Çme
, ".bss") &&

110 
	`¡rcmp
(
£ùiÚs
[
i
].
s_Çme
, ".sbss")) {

111 
	`l£ek
(
fdIn
, 
£ùiÚs
[
i
].
s_sú±r
, 0);

112 
bufãr
 = 
	`m®loc
(
£ùiÚs
[
i
].
s_size
);

113 
	`R—d
(
fdIn
, 
bufãr
, 
£ùiÚs
[
i
].
s_size
);

114 
	`Wr™e
(
fdOut
, 
bufãr
, 
£ùiÚs
[
i
].
s_size
);

115 
	`ä“
(
bufãr
);

119 
	`´štf
("Addšg sck oàsize: %d\n", 
SckSize
);

120 
	`l£ek
(
fdOut
, 
tİ
 + 
SckSize
 - 4, 0);

121 
tmp
 = 0;

122 
	`Wr™e
(
fdOut
, (*)&
tmp
, 4);

124 
	`şo£
(
fdIn
);

125 
	`şo£
(
fdOut
);

126 
	}
}

	@bin/coff2noff.c

23 
	#MAIN


	)

24 
	~"cİyright.h
"

25 #undeà
MAIN


27 
	~<sys/ty³s.h
>

28 
	~<sys/¡©.h
>

29 
	~<fú.h
>

30 
	~<lim™s.h
>

31 
	~<¡dlib.h
>

32 
	~<¡dio.h
>

34 
	~"coff.h
"

35 
	~"noff.h
"

43 
	$WÜdToHo¡
(
wÜd
) {

44 #ifdeà
HOST_IS_BIG_ENDIAN


45 
»suÉ
;

46 
»suÉ
 = (
wÜd
 >> 24) & 0x000000ff;

47 
»suÉ
 |ğ(
wÜd
 >> 8) & 0x0000ff00;

48 
»suÉ
 |ğ(
wÜd
 << 8) & 0x00ff0000;

49 
»suÉ
 |ğ(
wÜd
 << 24) & 0xff000000;

50  
»suÉ
;

52  
wÜd
;

54 
	}
}

57 
	$ShÜtToHo¡
(
shÜtwÜd
) {

58 #ià
HOST_IS_BIG_ENDIAN


59 
»suÉ
;

60 
»suÉ
 = (
shÜtwÜd
 << 8) & 0xff00;

61 
»suÉ
 |ğ(
shÜtwÜd
 >> 8) & 0x00ff;

62  
»suÉ
;

64  
shÜtwÜd
;

66 
	}
}

68 
	#R—dSŒuù
(
f
,
s
è
	`R—d
(f,(*)&s,(s))

	)

71 *
	gnoffFeName
 = 
NULL
;

74 
	$R—d
(
fd
, *
buf
, 
nBy‹s
)

76 ià(
	`»ad
(
fd
, 
buf
, 
nBy‹s
) !=‚Bytes) {

77 
	`årštf
(
¡d”r
, "File isoo short\n");

78 
	`uÆšk
(
noffFeName
);

79 
	`ex™
(1);

81 
	}
}

84 
	$Wr™e
(
fd
, *
buf
, 
nBy‹s
)

86 ià(
	`wr™e
(
fd
, 
buf
, 
nBy‹s
) !=‚Bytes) {

87 
	`årštf
(
¡d”r
, "Unableo write file\n");

88 
	`uÆšk
(
noffFeName
);

89 
	`ex™
(1);

91 
	}
}

93 
	$maš
 (
¬gc
, **
¬gv
)

95 
fdIn
, 
fdOut
, 
num£ùiÚs
, 
i
, 
šNoffFe
;

96 
fehdr
 
feh
;

97 
aouthdr
 
sy¡emh
;

98 
súhdr
 *
£ùiÚs
;

99 *
bufãr
;

100 
NoffH—d”
 
noffH
;

102 ià(
¬gc
 < 2) {

103 
	`årštf
(
¡d”r
, "U§ge: % <coffFeName> <noffFeName>\n", 
¬gv
[0]);

104 
	`ex™
(1);

108 
fdIn
 = 
	`İ’
(
¬gv
[1], 
O_RDONLY
, 0);

109 ià(
fdIn
 == -1) {

110 
	`³¼Ü
(
¬gv
[1]);

111 
	`ex™
(1);

115 
fdOut
 = 
	`İ’
(
¬gv
[2], 
O_WRONLY
|
O_CREAT
|
O_TRUNC
 , 0666);

116 ià(
fdIn
 == -1) {

117 
	`³¼Ü
(
¬gv
[2]);

118 
	`ex™
(1);

120 
noffFeName
 = 
¬gv
[2];

123 
	`R—dSŒuù
(
fdIn
,
feh
);

124 
feh
.
f_magic
 = 
	`ShÜtToHo¡
(fileh.f_magic);

125 
feh
.
f_nsús
 = 
	`ShÜtToHo¡
(fileh.f_nscns);

126 ià(
feh
.
f_magic
 !ğ
MIPSELMAGIC
) {

127 
	`årštf
(
¡d”r
, "File is‚ot‡ MIPSEL COFF file\n");

128 
	`uÆšk
(
noffFeName
);

129 
	`ex™
(1);

133 
	`R—dSŒuù
(
fdIn
,
sy¡emh
);

134 
sy¡emh
.
magic
 = 
	`ShÜtToHo¡
(systemh.magic);

135 ià(
sy¡emh
.
magic
 !ğ
OMAGIC
) {

136 
	`årštf
(
¡d”r
, "File is‚ot‡ OMAGIC file\n");

137 
	`uÆšk
(
noffFeName
);

138 
	`ex™
(1);

142 
num£ùiÚs
 = 
feh
.
f_nsús
;

143 
	`´štf
("num£ùiÚ %d \n",
num£ùiÚs
);

144 
£ùiÚs
 = (
súhdr
 *)
	`m®loc
(
num£ùiÚs
 * (scnhdr));

145 
	`R—d
(
fdIn
, (*è
£ùiÚs
, 
num£ùiÚs
 * (
súhdr
));

147 
i
 = 0; i < 
num£ùiÚs
; i++) {

148 
£ùiÚs
[
i
].
s_·ddr
 = 
	`WÜdToHo¡
(sections[i].s_paddr);

149 
£ùiÚs
[
i
].
s_size
 = 
	`WÜdToHo¡
(sections[i].s_size);

150 
£ùiÚs
[
i
].
s_sú±r
 = 
	`WÜdToHo¡
(sections[i].s_scnptr);

156 
noffH
.
noffMagic
 = 
NOFFMAGIC
;

157 
noffH
.
code
.
size
 = 0;

158 
noffH
.
š™D©a
.
size
 = 0;

159 
noffH
.
unš™D©a
.
size
 = 0;

162 
šNoffFe
 = (
NoffH—d”
);

163 
	`l£ek
(
fdOut
, 
šNoffFe
, 0);

164 
	`´štf
("Lßdšg %d seùiÚs:\n", 
num£ùiÚs
);

165 
i
 = 0; i < 
num£ùiÚs
; i++) {

166 
	`´štf
("\t\"%s\", filepos 0x%x, mempos 0x%x, size 0x%x\n",

167 
£ùiÚs
[
i
].
s_Çme
,

168 ()(
£ùiÚs
[
i
].
s_sú±r
),

169 ()(
£ùiÚs
[
i
].
s_·ddr
),

170 ()(
£ùiÚs
[
i
].
s_size
));

171 ià(
£ùiÚs
[
i
].
s_size
 == 0) {

173 } ià(!
	`¡rcmp
(
£ùiÚs
[
i
].
s_Çme
, ".text")) {

174 
noffH
.
code
.
vœtu®Addr
 = 
£ùiÚs
[
i
].
s_·ddr
;

175 
noffH
.
code
.
šFeAddr
 = 
šNoffFe
;

176 
noffH
.
code
.
size
 = 
£ùiÚs
[
i
].
s_size
;

177 
	`l£ek
(
fdIn
, 
£ùiÚs
[
i
].
s_sú±r
, 0);

178 
bufãr
 = 
	`m®loc
(
£ùiÚs
[
i
].
s_size
);

179 
	`R—d
(
fdIn
, 
bufãr
, 
£ùiÚs
[
i
].
s_size
);

180 
	`Wr™e
(
fdOut
, 
bufãr
, 
£ùiÚs
[
i
].
s_size
);

181 
	`ä“
(
bufãr
);

182 
šNoffFe
 +ğ
£ùiÚs
[
i
].
s_size
;

183 } ià(!
	`¡rcmp
(
£ùiÚs
[
i
].
s_Çme
, ".data")

184 || !
	`¡rcmp
(
£ùiÚs
[
i
].
s_Çme
, ".rdata")) {

187 ià(
noffH
.
š™D©a
.
size
 != 0) {

188 
	`årštf
(
¡d”r
, "Can't handle both data‡nd„data\n");

189 
	`uÆšk
(
noffFeName
);

190 
	`ex™
(1);

192 
noffH
.
š™D©a
.
vœtu®Addr
 = 
£ùiÚs
[
i
].
s_·ddr
;

193 
noffH
.
š™D©a
.
šFeAddr
 = 
šNoffFe
;

194 
noffH
.
š™D©a
.
size
 = 
£ùiÚs
[
i
].
s_size
;

195 
	`l£ek
(
fdIn
, 
£ùiÚs
[
i
].
s_sú±r
, 0);

196 
bufãr
 = 
	`m®loc
(
£ùiÚs
[
i
].
s_size
);

197 
	`R—d
(
fdIn
, 
bufãr
, 
£ùiÚs
[
i
].
s_size
);

198 
	`Wr™e
(
fdOut
, 
bufãr
, 
£ùiÚs
[
i
].
s_size
);

199 
	`ä“
(
bufãr
);

200 
šNoffFe
 +ğ
£ùiÚs
[
i
].
s_size
;

201 } ià(!
	`¡rcmp
(
£ùiÚs
[
i
].
s_Çme
, ".bss") ||

202 !
	`¡rcmp
(
£ùiÚs
[
i
].
s_Çme
, ".sbss")) {

206 ià(
noffH
.
unš™D©a
.
size
 != 0) {

207 ià(
£ùiÚs
[
i
].
s_·ddr
 =ğ(
noffH
.
unš™D©a
.
vœtu®Addr
 +

208 
noffH
.
unš™D©a
.
size
)) {

209 
	`årštf
(
¡d”r
, "Can't handle both bss‡nd sbss\n");

210 
	`uÆšk
(
noffFeName
);

211 
	`ex™
(1);

213 
noffH
.
unš™D©a
.
size
 +ğ
£ùiÚs
[
i
].
s_size
;

215 
noffH
.
unš™D©a
.
vœtu®Addr
 = 
£ùiÚs
[
i
].
s_·ddr
;

216 
noffH
.
unš™D©a
.
size
 = 
£ùiÚs
[
i
].
s_size
;

220 
	`årštf
(
¡d”r
, "UnknowÀ£gm’ˆty³: %s\n", 
£ùiÚs
[
i
].
s_Çme
);

221 
	`uÆšk
(
noffFeName
);

222 
	`ex™
(1);

225 
	`l£ek
(
fdOut
, 0, 0);

226 
	`Wr™e
(
fdOut
, (*)&
noffH
, (
NoffH—d”
));

227 
	`şo£
(
fdIn
);

228 
	`şo£
(
fdOut
);

229 
	`ex™
(0);

230 
	}
}

	@bin/copyright.h

22 #ifdeà
MAIN


23 *
	gcİyright
 = "Copyright (c) 1992-1993 The Regents ofhe University of California. All„ights„eserved.";

	@bin/d.c

7 
	~"cİyright.h
"

8 
	~"š¡r.h
"

9 
	~"’code.h
"

11 
	#NULL
 0

	)

13 
	g¥Œ
;

14 
	glÚgdis
 = 1;

16 *
nÜm®İs
[], *
¥ecŸlİs
[];

19 *
	g»g¡ršgs
[] =

27 
	#R
(
i
è
»g¡ršgs
[i]

	)

30 
	$dump_ascii
(
š¡ruùiÚ
, 
pc
)

31 
š¡ruùiÚ
, 
pc
;

33 
addr
;

34 *
s
;

35 
İcode
;

37 iàĞ
lÚgdis
 ) 
	`´štf
("%08x: %08x ", 
pc
, 
š¡ruùiÚ
);

38 
	`´štf
("\t");

39 
İcode
 = (è
š¡ruùiÚ
 >> 26;

40 iàĞ
š¡ruùiÚ
 =ğ
I_NOP
) {

41 
	`´štf
("nop");

43 iàĞ
İcode
 =ğ
I_SPECIAL
 )

45 
İcode
 = 
š¡ruùiÚ
 & 0x3f;

46 
	`´štf
("%s\t", 
¥ecŸlİs
[
İcode
]);

48  
İcode
 )

52 
I_SLL
:

53 
I_SRL
:

54 
I_SRA
:

55 
	`´štf
("%s,%s,0x%x",

56 
	`R
(
	`rd
(
š¡ruùiÚ
)),

57 
	`R
(
	`¹
(
š¡ruùiÚ
)),

58 
	`shamt
(
š¡ruùiÚ
));

62 
I_SLLV
:

63 
I_SRLV
:

64 
I_SRAV
:

65 
	`´štf
("%s,%s,%s",

66 
	`R
(
	`rd
(
š¡ruùiÚ
)),

67 
	`R
(
	`¹
(
š¡ruùiÚ
)),

68 
	`R
(
	`rs
(
š¡ruùiÚ
)));

72 
I_JR
:

73 
I_JALR
:

74 
I_MFLO
:

75 
I_MTLO
:

76 
	`´štf
("%s", 
	`R
(
	`rs
(
š¡ruùiÚ
)));

79 
I_SYSCALL
:

80 
I_BREAK
:

84 
I_MFHI
:

85 
I_MTHI
:

86 
	`´štf
("%s", 
	`R
(
	`rd
(
š¡ruùiÚ
)));

90 
I_MULT
:

91 
I_MULTU
:

92 
I_DIV
:

93 
I_DIVU
:

94 
	`´štf
("%s,%s",

95 
	`R
(
	`rs
(
š¡ruùiÚ
)),

96 
	`R
(
	`¹
(
š¡ruùiÚ
)));

100 
I_ADD
:

101 
I_ADDU
:

102 
I_SUB
:

103 
I_SUBU
:

104 
I_AND
:

105 
I_OR
:

106 
I_XOR
:

107 
I_NOR
:

108 
I_SLT
:

109 
I_SLTU
:

110 
	`´štf
("%s,%s,%s",

111 
	`R
(
	`rd
(
š¡ruùiÚ
)),

112 
	`R
(
	`rs
(
š¡ruùiÚ
)),

113 
	`R
(
	`¹
(
š¡ruùiÚ
)));

118 iàĞ
İcode
 =ğ
I_BCOND
 )

120  
	`¹
(
š¡ruùiÚ
) )

122 
I_BLTZ
:

123 
	`´štf
("bltz");

125 
I_BGEZ
:

126 
	`´štf
("bgez");

128 
I_BLTZAL
:

129 
	`´štf
("bltzal");

131 
I_BGEZAL
:

132 
	`´štf
("bgezal");

135 
	`´štf
("BCOND");

137 
	`´štf
("\t%s,%08x",

138 
	`R
(
	`rs
(
š¡ruùiÚ
)),

139 
	`off16
(
š¡ruùiÚ
)+
pc
+4);

143 
	`´štf
("%s\t", 
nÜm®İs
[
İcode
]);

145  
İcode
 )

148 
I_J
:

149 
I_JAL
:

150 
	`´štf
("%08x",

151 
	`tİ4
(
pc
)|
	`off26
(
š¡ruùiÚ
));

155 
I_BEQ
:

156 
I_BNE
:

157 
	`´štf
("%s,%s,%08x",

158 
	`R
(
	`¹
(
š¡ruùiÚ
)),

159 
	`R
(
	`rs
(
š¡ruùiÚ
)),

160 
	`off16
(
š¡ruùiÚ
)+
pc
+4);

164 
I_ADDI
:

165 
I_ADDIU
:

166 
I_SLTI
:

167 
I_SLTIU
:

168 
I_ANDI
:

169 
I_ORI
:

170 
I_XORI
:

171 
	`´štf
("%s,%s,0x%x",

172 
	`R
(
	`¹
(
š¡ruùiÚ
)),

173 
	`R
(
	`rs
(
š¡ruùiÚ
)),

174 
	`immed
(
š¡ruùiÚ
));

178 
I_LUI
:

179 
	`´štf
("%s,0x%x",

180 
	`R
(
	`¹
(
š¡ruùiÚ
)),

181 
	`immed
(
š¡ruùiÚ
));

185 
I_COP0
:

186 
I_COP1
:

187 
I_COP2
:

188 
I_COP3
:

192 
I_LB
:

193 
I_LH
:

194 
I_LWL
:

195 
I_LW
:

196 
I_LBU
:

197 
I_LHU
:

198 
I_LWR
:

199 
I_SB
:

200 
I_SH
:

201 
I_SWL
:

202 
I_SW
:

203 
I_SWR
:

204 
I_LWC0
:

205 
I_LWC1
:

206 
I_LWC2
:

207 
I_LWC3
 :

208 
I_SWC0
:

209 
I_SWC1
:

210 
I_SWC2
:

211 
I_SWC3
:

212 
	`´štf
("%s,0x%x(%s)",

213 
	`R
(
	`¹
(
š¡ruùiÚ
)),

214 
	`immed
(
š¡ruùiÚ
),

215 
	`R
(
	`rs
(
š¡ruùiÚ
)));

219 
	}
}

	@bin/disasm.c

7 
	~"cİyright.h
"

11 
	~<¡dio.h
>

12 
	~<fehdr.h
>

13 
	~<súhdr.h
>

14 
	~<syms.h
>

15 
	~<ldfú.h
>

16 
	~"št.h
"

18 
FILE
 *
	gå
;

19 
LDFILE
 *
	gld±r
;

20 
SCNHDR
 
	g‹xth—d
, 
	grd©ah—d
, 
	gd©ah—d
, 
	gsd©ah—d
, 
	gsbssh—d
, 
	gbssh—d
;

22 
	gf’ame
[1000] = "a.out";

23 
	g£lf
[256];

25 
	gmem
[
MEMSIZE
];

26 
	gTRACE
, 
	gT¿±¿û
, 
	gRegŒaû
;

27 
	gNROWS
=64, 
	gASSOC
=1, 
	gLINESIZE
=4, 
	gRAND
=0, 
	gLRD
=0;

28 
	gpc
;

30 *
¡rıy
();

32 
	$maš
(
¬gc
, 
¬gv
)

33 
¬gc
;

34 *
¬gv
[];

36 *
s
;

37 *
çk—rgv
[3];

39 
	`¡rıy
(
£lf
, 
¬gv
[0]);

40  
¬gc
 > 1 && 
¬gv
[1][0] == '-' )

42 --
¬gc
;

43 ++
¬gv
;

44  
s
=
¬gv
[0]+1; *s != '\0'; ++s )

45  *
s
 )

50 ià(
¬gc
 >= 2)

51 
	`¡rıy
(
f’ame
, 
¬gv
[1]);

52 
å
 = 
	`fİ’
(
f’ame
, "r");

53 ià(
å
 =ğ
NULL
)

55 
	`årštf
(
¡d”r
, "%s: Could‚Ù o³À'%s'\n", 
£lf
, 
f’ame
);

56 
	`ex™
(0);

58 
	`fşo£
(
å
);

59 
	`lßd_´og¿m
(
f’ame
);

60 iàĞ
¬gv
[1] =ğ
NULL
 )

62 
çk—rgv
[1] = "a.out";

63 
çk—rgv
[2] = 
NULL
;

64 
¬gv
 = 
çk—rgv
;

65 ++
¬gc
;

67 
	`di§sm
(
memoff£t
, 
¬gc
-1, 
¬gv
+1);

68 
	}
}

70 
	#LOADSECTION
(
h—d
è
	`lßd_£ùiÚ
(&h—d);

	)

72 
	$lßd_£ùiÚ
(
hd
)

73 
SCNHDR
 *
hd
;

75 
pc
, 
i
;

76 iàĞ
hd
->
s_sú±r
 != 0 ) {

78 
pc
 = 
hd
->
s_vaddr
;

79 
	`FSEEK
(
ld±r
, 
hd
->
s_sú±r
, 0);

80  
i
=0; i<
hd
->
s_size
; ++i ) {

81 ià(
pc
-
memoff£t
 >ğ
MEMSIZE
)

82 { 
	`´štf
("MEMSIZEoo small. Fix‡nd„ecompile.\n");

83 
	`ex™
(1);

85 *(*è((
mem
-
memoff£t
)+
pc
++èğ
	`g‘c
(
å
);

88 
	}
}

90 
	$lßd_´og¿m
(
f’ame
)

91 *
f’ame
;

93 
ld±r
 = 
	`ldİ’
(
f’ame
, 
NULL
);

94 iàĞ
ld±r
 =ğ
NULL
 )

96 
	`årštf
(
¡d”r
, "%s: Lßd„—dƒ¼Ü oÀ%s\n", 
£lf
, 
f’ame
);

97 
	`ex™
(0);

99 iàĞ
	`TYPE
(
ld±r
) != 0x162 )

101 
	`årštf
(
¡d”r
,

103 
	`ex™
(0);

106 iàĞ
	`ldnsh»ad
(
ld±r
, ".‹xt", &
‹xth—d
) != 1 )

107 
	`´štf
("text section header missing\n");

109 
	`LOADSECTION
(
‹xth—d
)

111 iàĞ
	`ldnsh»ad
(
ld±r
, ".rd©a", &
rd©ah—d
) != 1 )

112 
	`´štf
("rdata section header missing\n");

114 
	`LOADSECTION
(
rd©ah—d
)

116 iàĞ
	`ldnsh»ad
(
ld±r
, ".d©a", &
d©ah—d
) != 1 )

117 
	`´štf
("data section header missing\n");

119 
	`LOADSECTION
(
d©ah—d
)

121 iàĞ
	`ldnsh»ad
(
ld±r
, ".sd©a", &
sd©ah—d
) != 1 )

122 
	`´štf
("sdata section header missing\n");

124 
	`LOADSECTION
(
sd©ah—d
)

126 iàĞ
	`ldnsh»ad
(
ld±r
, ".sbss", &
sbssh—d
) != 1 )

127 
	`´štf
("sbss section header missing\n");

129 
	`LOADSECTION
(
sbssh—d
)

131 iàĞ
	`ldnsh»ad
(
ld±r
, ".bss", &
bssh—d
) != 1 )

132 
	`´štf
("bss section header missing\n");

134 
	`LOADSECTION
(
bssh—d
)

139 
	}
}

142 *
	$m_®loc
(
n
)

143 
n
;

145 *
	`m®loc
();

147  (*è(è
	`m®loc
((è
n
);

148 
	}
}

150 
	$di§sm
(
¡¬c
, 
¬gc
, 
¬gv
)

151 
¡¬c
, 
¬gc
;

152 *
¬gv
[];

154 
i
;

156 
pc
 = 
memoff£t
;

157  
i
=0; i<
‹xth—d
.
s_size
; i += 4 )

159 
	`dis1
(
pc
);

160 
pc
 =…c + 4;

162 
	}
}

164 
	$dis1
(
xpc
)

165 
xpc
;

167 
š¡r
;

169 
š¡r
 = 
	`ãtch
(
pc
);

170 
	`dump_ascii
(
š¡r
, 
pc
);

171 
	`´štf
("\n");

172 
	}
}

	@bin/encode.h

7 
	~"cİyright.h
"

12 
	#I_SPECIAL
 000

	)

13 
	#I_BCOND
 001

	)

14 
	#I_J
 002

	)

15 
	#I_JAL
 003

	)

16 
	#I_BEQ
 004

	)

17 
	#I_BNE
 005

	)

18 
	#I_BLEZ
 006

	)

19 
	#I_BGTZ
 007

	)

20 
	#I_ADDI
 010

	)

21 
	#I_ADDIU
 011

	)

22 
	#I_SLTI
 012

	)

23 
	#I_SLTIU
 013

	)

24 
	#I_ANDI
 014

	)

25 
	#I_ORI
 015

	)

26 
	#I_XORI
 016

	)

27 
	#I_LUI
 017

	)

28 
	#I_COP0
 020

	)

29 
	#I_COP1
 021

	)

30 
	#I_COP2
 022

	)

31 
	#I_COP3
 023

	)

33 
	#I_LB
 040

	)

34 
	#I_LH
 041

	)

35 
	#I_LWL
 042

	)

36 
	#I_LW
 043

	)

37 
	#I_LBU
 044

	)

38 
	#I_LHU
 045

	)

39 
	#I_LWR
 046

	)

41 
	#I_SB
 050

	)

42 
	#I_SH
 051

	)

43 
	#I_SWL
 052

	)

44 
	#I_SW
 053

	)

46 
	#I_SWR
 056

	)

48 
	#I_LWC0
 060

	)

49 
	#I_LWC1
 061

	)

50 
	#I_LWC2
 062

	)

51 
	#I_LWC3
 063

	)

53 
	#I_SWC0
 070

	)

54 
	#I_SWC1
 071

	)

55 
	#I_SWC2
 072

	)

56 
	#I_SWC3
 073

	)

60 
	#I_SLL
 000

	)

62 
	#I_SRL
 002

	)

63 
	#I_SRA
 003

	)

64 
	#I_SLLV
 004

	)

66 
	#I_SRLV
 006

	)

67 
	#I_SRAV
 007

	)

68 
	#I_JR
 010

	)

69 
	#I_JALR
 011

	)

71 
	#I_SYSCALL
 014

	)

72 
	#I_BREAK
 015

	)

74 
	#I_MFHI
 020

	)

75 
	#I_MTHI
 021

	)

76 
	#I_MFLO
 022

	)

77 
	#I_MTLO
 023

	)

79 
	#I_MULT
 030

	)

80 
	#I_MULTU
 031

	)

81 
	#I_DIV
 032

	)

82 
	#I_DIVU
 033

	)

84 
	#I_ADD
 040

	)

85 
	#I_ADDU
 041

	)

86 
	#I_SUB
 042

	)

87 
	#I_SUBU
 043

	)

88 
	#I_AND
 044

	)

89 
	#I_OR
 045

	)

90 
	#I_XOR
 046

	)

91 
	#I_NOR
 047

	)

93 
	#I_SLT
 052

	)

94 
	#I_SLTU
 053

	)

99 
	#I_BLTZ
 000

	)

100 
	#I_BGEZ
 001

	)

102 
	#I_BLTZAL
 020

	)

103 
	#I_BGEZAL
 021

	)

107 
	#I_NOP
 000

	)

	@bin/execute.c

7 
	~"cİyright.h
"

9 
	~<¡dio.h
>

10 
	~"š¡r.h
"

11 
	~"’code.h
"

12 
	~"št.h
"

14 
	#FAST
 0

	)

15 
	#Œue
 1

	)

16 
	#çl£
 0

	)

19 
mem
[];

20 
TRACE
, 
RegŒaû
;

23 
	gReg
[32];

24 
	gHI
, 
	gLO
;

27 
	gnumjm¶s
;

28 
	g¬ch1cyşes
;

31 
	#b31
(
z
è(((zè>>31 )&0x1è

	)

34 
	#cc_add
(
¼
, 
İ1
, 
İ2
) \

35 
N
 = (
¼
 < 0); \

36 
Z
 = (
¼
 == 0); \

37 
C
 = ((è
¼
 < (è
İ2
); \

38 
V
 = ((
İ1
^
İ2
è>ğ0 && (İ1^
¼
è< 0);

	)

40 
	#cc_sub
(
¼
, 
İ1
, 
İ2
) \

41 
N
 = (
¼
 < 0); \

42 
Z
 = (
¼
 == 0); \

43 
V
 = 
	`b31
((
İ1
 & ~
İ2
 & ~
¼
) | (~op1 & op2 &„r)); \

44 
C
 = ((è
İ1
 < (è
İ2
);

	)

48 
	#cc_logic
(
¼
) \

49 
N
 = (
¼
 < 0); \

50 
Z
 = (
¼
 == 0); \

51 
V
 = 0; \

52 
C
 = 0;

	)

54 
	#cc_mulscc
(
¼
, 
İ1
, 
İ2
) \

55 
N
 = (
¼
 < 0); \

56 
Z
 = (
¼
 == 0); \

57 
V
 = 
	`b31
((
İ1
 & 
İ2
 & ~
¼
) | (~op1 & ~op2 &„r)); \

58 
C
 = 
	`b31
((
İ1
 & 
İ2
è| (~
¼
 & (İ1 | op2)));

	)

61 
	$ruÅrog¿m
(
¡¬c
, 
¬gc
, 
¬gv
)

62 
¡¬c
, 
¬gc
;

63 *
¬gv
[];

65 
aci
, 
ai
, 
j
;

66 
š¡r
, 
pc
, 
xpc
, 
Åc
;

67 
i
;

68 
icouÁ
;

69 *
	`¡rıy
();

71 
icouÁ
 = 0;

72 
pc
 = 
¡¬c
;

73 
Åc
 = 
pc
 + 4;

74 
i
 = 
MEMSIZE
 - 1024 + 
memoff£t
;

75 
Reg
[29] = 
i
;

77 
	`¡Üe
(
i
, 
¬gc
);

78 
aci
 = 
i
 + 4;

79 
ai
 = 
aci
 + 32;

80  
j
=0; j<
¬gc
; ++j )

82 
	`¡rıy
((
mem
-
memoff£t
)+
ai
, 
¬gv
[
j
]);

83 
	`¡Üe
(
aci
, 
ai
);

84 
aci
 += 4;

85 
ai
 +ğ
	`¡¾’
(
¬gv
[
j
]) + 1;

91 ++
icouÁ
;

92 
xpc
 = 
pc
;

93 
pc
 = 
Åc
;

94 
Åc
 = 
pc
 + 4;

95 
š¡r
 = 
	`iãtch
(
xpc
);

96 
Reg
[0] = 0;

98 iàĞ
š¡r
 != 0 )

100  (
š¡r
>>26) & 0x0000003f)

102 
I_SPECIAL
:

104  
š¡r
 & 0x0000003f )

107 
I_SLL
:

108 
Reg
[
	`rd
(
š¡r
)] = Reg[
	`¹
(š¡r)] << 
	`shamt
(instr);

110 
I_SRL
:

111 
Reg
[
	`rd
(
š¡r
)] =

112 (è
Reg
[
	`¹
(
š¡r
)] >> 
	`shamt
(instr);

114 
I_SRA
:

115 
Reg
[
	`rd
(
š¡r
)] = Reg[
	`¹
(š¡r)] >> 
	`shamt
(instr);

117 
I_SLLV
:

118 
Reg
[
	`rd
(
š¡r
)] = Reg[
	`¹
(š¡r)] << Reg[
	`rs
(instr)];

120 
I_SRLV
:

121 
Reg
[
	`rd
(
š¡r
)] =

122 (è
Reg
[
	`¹
(
š¡r
)] >> Reg[
	`rs
(instr)];

124 
I_SRAV
:

125 
Reg
[
	`rd
(
š¡r
)] = Reg[
	`¹
(š¡r)] >> Reg[
	`rs
(instr)];

127 
I_JR
:

128 
Åc
 = 
Reg
[
	`rs
(
š¡r
)];

130 
I_JALR
:

131 
Åc
 = 
Reg
[
	`rs
(
š¡r
)];

132 
Reg
[
	`rd
(
š¡r
)] = 
xpc
 + 8;

135 
I_SYSCALL
:

136 
	`sy¡em_Œ­
();

138 
I_BREAK
:

139 
	`sy¡em_b»ak
();

142 
I_MFHI
:

143 
Reg
[
	`rd
(
š¡r
)] = 
HI
;

145 
I_MTHI
:

146 
HI
 = 
Reg
[
	`rs
(
š¡r
)];

148 
I_MFLO
:

149 
Reg
[
	`rd
(
š¡r
)] = 
LO
;

151 
I_MTLO
:

152 
LO
 = 
Reg
[
	`rs
(
š¡r
)];

155 
I_MULT
:

157 
t1
, 
t2
;

158 
t1l
, 
t1h
, 
t2l
, 
t2h
;

159 
Ãg
;

161 
t1
 = 
Reg
[
	`rs
(
š¡r
)];

162 
t2
 = 
Reg
[
	`¹
(
š¡r
)];

163 
Ãg
 = 0;

164 iàĞ
t1
 < 0 ) {

165 
t1
 = -t1 ;

166 
Ãg
 = !neg;

168 iàĞ
t2
 < 0 ) {

169 
t2
 = -t2 ;

170 
Ãg
 = !neg;

172 
LO
 = 
t1
 * 
t2
;

173 
t1l
 = 
t1
 & 0xffff;

174 
t1h
 = (
t1
 >> 16) & 0xffff;

175 
t2l
 = 
t2
 & 0xffff;

176 
t2h
 = (
t2
 >> 16) & 0xffff;

177 
HI
 = 
t1h
*
t2h
+(Ñ1h*
t2l
)>>16)+(Ñ2h*
t1l
)>>16);

178 iàĞ
Ãg
 )

180 
LO
 = ~LO;

181 
HI
 = ~HI;

182 
LO
 = LO + 1;

183 iàĞ
LO
 =ğ0 ) 
HI
 = HI + 1;

187 
I_MULTU
:

189 
t1
, 
t2
;

190 
t1l
, 
t1h
, 
t2l
, 
t2h
;

192 
t1
 = 
Reg
[
	`rs
(
š¡r
)];

193 
t2
 = 
Reg
[
	`¹
(
š¡r
)];

194 
t1l
 = 
t1
 & 0xffff;

195 
t1h
 = (
t1
 >> 16) & 0xffff;

196 
t2l
 = 
t2
 & 0xffff;

197 
t2h
 = (
t2
 >> 16) & 0xffff;

198 
LO
 = 
t1
*
t2
;

199 
HI
 = 
t1h
*
t2h
+(Ñ1h*
t2l
)>>16)+(Ñ2h*
t1l
)>>16);

202 
I_DIV
:

203 
LO
 = 
Reg
[
	`rs
(
š¡r
)] / Reg[
	`¹
(instr)];

204 
HI
 = 
Reg
[
	`rs
(
š¡r
)] % Reg[
	`¹
(instr)];

206 
I_DIVU
:

207 
LO
 =

208 ()
Reg
[
	`rs
(
š¡r
)] / ()Reg[
	`¹
(instr)];

209 
HI
 =

210 ()
Reg
[
	`rs
(
š¡r
)] % ()Reg[
	`¹
(instr)];

213 
I_ADD
:

214 
I_ADDU
:

215 
Reg
[
	`rd
(
š¡r
)] = Reg[
	`rs
(š¡r)] + Reg[
	`¹
(instr)];

217 
I_SUB
:

218 
I_SUBU
:

219 
Reg
[
	`rd
(
š¡r
)] = Reg[
	`rs
(š¡r)] - Reg[
	`¹
(instr)];

221 
I_AND
:

222 
Reg
[
	`rd
(
š¡r
)] = Reg[
	`rs
(š¡r)] & Reg[
	`¹
(instr)];

224 
I_OR
:

225 
Reg
[
	`rd
(
š¡r
)] = Reg[
	`rs
(š¡r)] | Reg[
	`¹
(instr)];

227 
I_XOR
:

228 
Reg
[
	`rd
(
š¡r
)] = Reg[
	`rs
(š¡r)] ^ Reg[
	`¹
(instr)];

230 
I_NOR
:

231 
Reg
[
	`rd
(
š¡r
)] = ~(Reg[
	`rs
(š¡r)] | Reg[
	`¹
(instr)]);

234 
I_SLT
:

235 
Reg
[
	`rd
(
š¡r
)] = (Reg[
	`rs
(š¡r)] < Reg[
	`¹
(instr)]);

237 
I_SLTU
:

238 
Reg
[
	`rd
(
š¡r
)] =

239 ((è
Reg
[
	`rs
(
š¡r
)]

240 < (è
Reg
[
	`¹
(
š¡r
)]);

243 
	`u
();

249 
I_BCOND
:

251  
	`¹
(
š¡r
) )

253 
I_BLTZ
:

254 iàĞ
Reg
[
	`rs
(
š¡r
)] < 0 )

255 
Åc
 = 
xpc
 + 4 + (
	`immed
(
š¡r
)<<2);

257 
I_BGEZ
:

258 iàĞ
Reg
[
	`rs
(
š¡r
)] >= 0 )

259 
Åc
 = 
xpc
 + 4 + (
	`immed
(
š¡r
)<<2);

262 
I_BLTZAL
:

263 
Reg
[31] = 
xpc
 + 8;

264 iàĞ
Reg
[
	`rs
(
š¡r
)] < 0 )

265 
Åc
 = 
xpc
 + 4 + (
	`immed
(
š¡r
)<<2);

267 
I_BGEZAL
:

268 
Reg
[31] = 
xpc
 + 8;

269 iàĞ
Reg
[
	`rs
(
š¡r
)] >= 0 )

270 
Åc
 = 
xpc
 + 4 + (
	`immed
(
š¡r
)<<2);

273 
	`u
();

280 
I_J
:

281 
Åc
 = (
xpc
 & 0xf0000000è| ((
š¡r
 & 0x03ffffff) << 2);

283 
I_JAL
:

284 
Reg
[31] = 
xpc
 + 8;

285 
Åc
 = (
xpc
 & 0xf0000000è| ((
š¡r
 & 0x03ffffff) << 2);

287 
I_BEQ
:

288 iàĞ
Reg
[
	`rs
(
š¡r
)] =ğReg[
	`¹
(instr)] )

289 
Åc
 = 
xpc
 + 4 + (
	`immed
(
š¡r
) << 2);

291 
I_BNE
:

292 iàĞ
Reg
[
	`rs
(
š¡r
)] !ğReg[
	`¹
(instr)] )

293 
Åc
 = 
xpc
 + 4 + (
	`immed
(
š¡r
) << 2);

295 
I_BLEZ
:

296 iàĞ
Reg
[
	`rs
(
š¡r
)] <= 0 )

297 
Åc
 = 
xpc
 + 4 + (
	`immed
(
š¡r
) << 2);

299 
I_BGTZ
:

300 iàĞ
Reg
[
	`rs
(
š¡r
)] > 0 )

301 
Åc
 = 
xpc
 + 4 + (
	`immed
(
š¡r
) << 2);

303 
I_ADDI
:

304 
Reg
[
	`¹
(
š¡r
)] = Reg[
	`rs
(š¡r)] + 
	`immed
(instr);

306 
I_ADDIU
:

307 
Reg
[
	`¹
(
š¡r
)] = Reg[
	`rs
(š¡r)] + 
	`immed
(instr);

309 
I_SLTI
:

310 
Reg
[
	`¹
(
š¡r
)] = (Reg[
	`rs
(š¡r)] < 
	`immed
(instr));

312 
I_SLTIU
:

313 
Reg
[
	`¹
(
š¡r
)] =

314 ((è
Reg
[
	`rs
(
š¡r
)] < (è
	`immed
(instr));

316 
I_ANDI
:

317 
Reg
[
	`¹
(
š¡r
)] = Reg[
	`rs
(š¡r)] & 
	`immed
(instr);

319 
I_ORI
:

320 
Reg
[
	`¹
(
š¡r
)] = Reg[
	`rs
(š¡r)] | 
	`immed
(instr);

322 
I_XORI
:

323 
Reg
[
	`¹
(
š¡r
)] = Reg[
	`rs
(š¡r)] ^ 
	`immed
(instr);

325 
I_LUI
:

326 
Reg
[
	`¹
(
š¡r
)] = instr << 16;

329 
I_LB
:

330 
Reg
[
	`¹
(
š¡r
)] = 
	`cãtch
(Reg[
	`rs
(š¡r)] + 
	`immed
(instr));

332 
I_LH
:

333 
Reg
[
	`¹
(
š¡r
)] = 
	`sãtch
(Reg[
	`rs
(š¡r)] + 
	`immed
(instr));

335 
I_LWL
:

336 
i
 = 
Reg
[
	`rs
(
š¡r
)] + 
	`immed
(instr);

337 
Reg
[
	`¹
(
š¡r
)] &ğ(-1 >> 8*((-
i
) & 0x03));

338 
Reg
[
	`¹
(
š¡r
)] |ğ((
	`ãtch
(
i
 & 0xfffffffc)) << 8*(i & 0x03));

340 
I_LW
:

341 
Reg
[
	`¹
(
š¡r
)] = 
	`ãtch
(Reg[
	`rs
(š¡r)] + 
	`immed
(instr));

343 
I_LBU
:

344 
Reg
[
	`¹
(
š¡r
)] = 
	`ucãtch
(Reg[
	`rs
(š¡r)] + 
	`immed
(instr));

346 
I_LHU
:

347 
Reg
[
	`¹
(
š¡r
)] = 
	`usãtch
(Reg[
	`rs
(š¡r)] + 
	`immed
(instr));

349 
I_LWR
:

350 
i
 = 
Reg
[
	`rs
(
š¡r
)] + 
	`immed
(instr);

351 
Reg
[
	`¹
(
š¡r
)] &ğ(-1 << 8*(
i
 & 0x03));

352 iàĞ(
i
 & 0x03)== 0 )

353 
Reg
[
	`¹
(
š¡r
)] = 0;

354 
Reg
[
	`¹
(
š¡r
)] |=

355 ((
	`ãtch
(
i
 & 0xfffffffc)) >> 8*((-i) & 0x03));

358 
I_SB
:

359 
	`c¡Üe
(
Reg
[
	`rs
(
š¡r
)] + 
	`immed
(š¡r), Reg[
	`¹
(instr)]);

361 
I_SH
:

362 
	`s¡Üe
(
Reg
[
	`rs
(
š¡r
)] + 
	`immed
(š¡r), Reg[
	`¹
(instr)]);

364 
I_SWL
:

365 
	`årštf
(
¡d”r
, "sorry,‚o SWL yet.\n");

366 
	`u
();

368 
I_SW
:

369 
	`¡Üe
(
Reg
[
	`rs
(
š¡r
)] + 
	`immed
(š¡r), Reg[
	`¹
(instr)]);

372 
I_SWR
:

373 
	`årštf
(
¡d”r
, "sorry,‚o SWR yet.\n");

374 
	`u
();

377 
I_LWC0
:

378 
I_LWC1
:

379 
I_LWC2
:

380 
I_LWC3
:

381 
I_SWC0
:

382 
I_SWC1
:

383 
I_SWC2
:

384 
I_SWC3
:

385 
I_COP0
:

386 
I_COP1
:

387 
I_COP2
:

388 
I_COP3
:

389 
	`årštf
(
¡d”r
, "Sorry,‚o coprocessors.\n");

390 
	`ex™
(2);

394 
	`u
();

399 #ifdeà
DEBUG


404 #ià!
FAST


405 iàĞ
TRACE
 )

407 
	`dump_ascii
(
š¡r
, 
xpc
);

408 
	`´štf
("\n");

409 iàĞ
RegŒaû
 ) 
	`dump_»g
();

413 
	}
}

417 
	$u
()

419 
	`´štf
("Unimplemented Instruction\n");

420 
	`ex™
(2);

421 
	}
}

423 
	$ny
()

425 
	`´štf
("This opcode‚ot implemeted yet.\n");

426 
	`ex™
(2);

427 
	}
}

432 
	$RS
(
i
)

433 
i
;

435  
	`rs
(
i
);

436 
	}
}

438 
	$RT
(
i
)

439 
i
;

441  
	`¹
(
i
);

442 
	}
}

444 
	$RD
(
i
)

445 
i
;

447  
	`rd
(
i
);

448 
	}
}

450 
	$IM
(
i
)

451 
i
;

453  
	`immed
(
i
);

454 
	}
}

458 
	$dump_»g
()

460 
j
;

462 
	`´štf
(" 0:");

463  
j
=0; j<8; ++j ) 
	`´štf
(" %08x", 
Reg
[j]);

464 
	`´štf
("\n");

465 
	`´štf
(" 8:");

466  ; 
j
<16; ++j ) 
	`´štf
(" %08x", 
Reg
[j]);

467 
	`´štf
("\n");

468 
	`´štf
("16:");

469  ; 
j
<24; ++j ) 
	`´štf
(" %08x", 
Reg
[j]);

470 
	`´štf
("\n");

471 
	`´štf
("24:");

472  ; 
j
<32; ++j ) 
	`´štf
(" %08x", 
Reg
[j]);

473 
	`´štf
("\n");

475 
	}
}

492 
	$og2
(
i
)

493 
i
;

495 
j
, 
l
;

497 iàĞ
i
 == 0 )  0;

498 
j
 = 0;

499 
l
 = 1;

500 iàĞ(
j
=(
i
&0xffff0000)) != 0 ) {

501 
i
 = 
j
;

502 
l
 += 16;

504 iàĞ(
j
=(
i
&0xff00ff00)) != 0 ) {

505 
i
 = 
j
;

506 
l
 += 8;

508 iàĞ(
j
=(
i
&0xf0f0f0f0)) != 0 ) {

509 
i
 = 
j
;

510 
l
 += 4;

512 iàĞ(
j
=(
i
&0xcccccccc)) != 0 ) {

513 
i
 = 
j
;

514 
l
 += 2;

516 iàĞ(
j
=(
i
&0xaaaaaaaa)) != 0 ) {

517 
i
 = 
j
;

518 
l
 += 1;

520  
l
;

521 
	}
}

525 
	#NH
 32

	)

526 
	#NNN
 33

	)

528 
	ghi¡s
[
NH
][
NNN
];

529 
	ghoæo
[
NH
], 
	ghtÙ®
[NH];

531 
	$h’‹rs
(
n
, 
hi¡
)

532 
n
, 
hi¡
;

534 iàĞ0 <ğ
n
 &&‚ < 
NNN
 ) ++
hi¡s
[
hi¡
][n];

535 ++
hoæo
[
hi¡
];

536 ++
htÙ®
[
hi¡
];

537 
	}
}

539 
	$h´št
()

541 
h
, 
i
;

542 
I
;

544  
h
=0; h<=
NH
; ++h ) iàĞ
htÙ®
[h] > 0 )

546 
	`´štf
("\nhi¡Ø%d:\n", 
h
);

547 
I
 = 0.0;

548  
i
=0; i<
NNN
; ++i )

550 
I
 +ğ
hi¡s
[
h
][
i
];

551 
	`´štf
("%d\t%d\t%5.2f%%\t%5.2f%%\n",

552 
i
, 
hi¡s
[
h
][i],

553 (è100*
hi¡s
[
h
][
i
] / 
htÙ®
[h],

554 (è100*
I
/
htÙ®
[
h
]);

556 
	`´štf
("oflo %d:\t%d/%d\t%5.2f%%\n",

557 
h
, 
hoæo
[h], 
htÙ®
[h],

558 (è100*
hoæo
[
h
] / 
htÙ®
[h]);

560 
	}
}

562 
	gnumadds
=1, 
	gnumsubs
=1, 
	gnumsucûs£s
, 
	gnumÿ¼›s
;

563 
	gaddbË
[33][33];

564 
	gsubbË
[33][33];

566 
	gfmt
[] = "%6d";

567 
	gfmt2
[] = "------";

569 
	$·bË
(
b
)

570 
b
[33][33];

572 
i
, 
j
;

574 
	`´štf
(" |");

575  
j
=0; j<33; ++j )

576 
	`´štf
(
fmt
, 
j
);

577 
	`putch¬
('\n');

578 
	`´štf
(" |");

579  
j
=0; j<33; ++j )

580 
	`´štf
(
fmt2
);

581 
	`putch¬
('\n');

582  
i
=0; i<33; ++i )

584 
	`´štf
("%2d|", 
i
);

585  
j
=0; j<33; ++j )

586 
	`´štf
(
fmt
, 
b
[
i
][
j
]);

587 
	`putch¬
('\n');

589 
	}
}

594 
	$´št¡©i¡ics
()

612 
	}
}

616 
	#NNNN
 (64)

	)

618 
	ghi¡
[
NNNN
];

620 
	$h’‹r
(
n
)

621 
n
;

623 iàĞ0 <ğ
n
 &&‚ < 
NNNN
 )

624 ++
hi¡
[
n
];

625 
	}
}

627 
	$´šthi¡
()

629 
i
;

631  
i
=0; i<
NNNN
; ++i )

632 
	`´štf
("%d %d\n", 
i
, 
hi¡
[i]);

633 
	}
}

	@bin/instr.h

7 
	~"cİyright.h
"

11 
	#rd
(
i
è(((iè>> 11è& 0x1f)

	)

12 
	#¹
(
i
è(((iè>> 16è& 0x1f)

	)

13 
	#rs
(
i
è(((iè>> 21è& 0x1f)

	)

14 
	#shamt
(
i
è(((iè>> 6è& 0x1f)

	)

15 
	#immed
(
i
è(((iè& 0x8000è? (i)|(-0x8000è: (i)&0x7fff)

	)

17 
	#off26
(
i
è(((i)&((1<<26)-1))<<2)

	)

18 
	#tİ4
(
i
è(((i)&(~((1<<28)-1))))

	)

19 
	#off16
(
i
è(
	`immed
(i)<<2)

	)

21 
	#ex‹nd
(
i
, 
hib™mask
è(((i)&(hib™mask)è? ((i)|(-(hib™mask))è: (i))

	)

	@bin/int.h

8 
	~"cİyright.h
"

11 
	#MEMSIZE
 (1<<24)

	)

12 
	#memoff£t
 0x10000000

	)

15 
	#am¬k
(
x
è
	)
x

16 
	#im¬k
(
x
è
	)
x

18 
	#iãtch
(
addr
è(*(*)(è(&(
mem
-
memoff£t
)[
	`im¬k
×ddr)]))

	)

19 
	#ãtch
(
addr
è(*(*)(è(&(
mem
-
memoff£t
)[
	`am¬k
×ddr)]))

	)

20 
	#sãtch
(
addr
è(*(*)(è(&(
mem
-
memoff£t
)[
	`am¬k
×ddr)]))

	)

21 
	#usãtch
(
addr
è(*(*)()(&(
mem
-
memoff£t
)[
	`am¬k
×ddr)]))

	)

22 
	#cãtch
(
addr
è(*(*)(è(&(
mem
-
memoff£t
)[
	`am¬k
×ddr)]))

	)

23 
	#ucãtch
(
addr
è(*(*)()(&(
mem
-
memoff£t
)[
	`am¬k
×ddr)]))

	)

25 
	#¡Üe
(
addr
, 
i
) \

26 ((*(*)(è(&(
mem
-
memoff£t
)[
	`am¬k
(
addr
)]èğ(
i
)))

	)

27 
	#s¡Üe
(
addr
, 
i
) \

28 ((*(*)(è(&(
mem
-
memoff£t
)[
	`am¬k
(
addr
)]èğ(
i
)))

	)

29 
	#c¡Üe
(
addr
, 
i
) \

30 (((
mem
-
memoff£t
)[
	`am¬k
(
addr
)] = (
i
)))

	)

	@bin/main.c

7 
	~"cİyright.h
"

11 
	~<¡dio.h
>

12 
	~<fehdr.h
>

13 
	~<súhdr.h
>

14 
	~<syms.h
>

15 
	~<ldfú.h
>

16 
	~"št.h
"

18 
FILE
 *
	gå
;

19 
LDFILE
 *
	gld±r
;

20 
SCNHDR
 
	g‹xth—d
, 
	grd©ah—d
, 
	gd©ah—d
, 
	gsd©ah—d
, 
	gsbssh—d
, 
	gbssh—d
;

22 
	gf’ame
[1000] = "a.out";

23 
	g£lf
[256];

25 
	gmem
[
MEMSIZE
];

26 
	gTRACE
, 
	gT¿±¿û
, 
	gRegŒaû
;

27 
	gNROWS
=64, 
	gASSOC
=1, 
	gLINESIZE
=4, 
	gRAND
=0, 
	gLRD
=0;

29 *
¡rıy
();

31 
	$maš
(
¬gc
, 
¬gv
)

32 
¬gc
;

33 *
¬gv
[];

35 *
s
;

36 *
çk—rgv
[3];

38 
	`¡rıy
(
£lf
, 
¬gv
[0]);

39  
¬gc
 > 1 && 
¬gv
[1][0] == '-' )

41 --
¬gc
;

42 ++
¬gv
;

43  
s
=
¬gv
[0]+1; *s != '\0'; ++s )

44  *
s
 )

47 
TRACE
 = 1;

50 
T¿±¿û
 = 1;

53 
RegŒaû
 = 1;

56 
NROWS
 = 
	`©oi
(*++
¬gv
);

57 
ASSOC
 = 
	`©oi
(*++
¬gv
);

58 
LINESIZE
 = 
	`©oi
(*++
¬gv
);

59 
RAND
 = ((*++
¬gv
)[0] == 'r');

60 
LRD
 = ((*
¬gv
)[0] == 'l')

61 && ((*
¬gv
)[1] == 'r')

62 && ((*
¬gv
)[2] == 'd');

63 
¬gc
 -= 4;

68 ià(
¬gc
 >= 2)

69 
	`¡rıy
(
f’ame
, 
¬gv
[1]);

70 
å
 = 
	`fİ’
(
f’ame
, "r");

71 ià(
å
 =ğ
NULL
)

73 
	`årštf
(
¡d”r
, "%s: Could‚Ù o³À'%s'\n", 
£lf
, 
f’ame
);

74 
	`ex™
(0);

76 
	`fşo£
(
å
);

77 
	`lßd_´og¿m
(
f’ame
);

78 iàĞ
¬gv
[1] =ğ
NULL
 )

80 
çk—rgv
[1] = "a.out";

81 
çk—rgv
[2] = 
NULL
;

82 
¬gv
 = 
çk—rgv
;

83 ++
¬gc
;

85 
	`ruÅrog¿m
(
memoff£t
, 
¬gc
-1, 
¬gv
+1);

86 
	}
}

88 *
	$¡ršg
(
s
)

89 *
s
;

91 *
p
;

92 *
	`m®loc
();

94 
p
 = 
	`m®loc
((è
	`¡¾’
(
s
)+1);

95 
	`¡rıy
(
p
, 
s
);

96  
p
;

97 
	}
}

99 
	$lßd_´og¿m
(
f’ame
)

100 *
f’ame
;

102 
pc
, 
i
, 
j
, 
¡ršdex
, 
¡l
;

103 
¡r
[1111];

104 
rc1
, 
rc2
;

106 
ld±r
 = 
	`ldİ’
(
f’ame
, 
NULL
);

107 iàĞ
ld±r
 =ğ
NULL
 )

109 
	`årštf
(
¡d”r
, "%s: Lßd„—dƒ¼Ü oÀ%s\n", 
£lf
, 
f’ame
);

110 
	`ex™
(0);

112 iàĞ
	`TYPE
(
ld±r
) != 0x162 )

114 
	`årštf
(
¡d”r
,

116 
	`ex™
(0);

119 
	#LOADSECTION
(
h—d
) \

120 iàĞ
h—d
.
s_sú±r
 != 0 ) \

123 
pc
 = 
h—d
.
s_vaddr
; \

124 
	`FSEEK
(
ld±r
, 
h—d
.
s_sú±r
, 0); \

125  
i
=0; i<
h—d
.
s_size
; ++i ) \

126 *(*è((
mem
-
memoff£t
)+
pc
++èğ
	`g‘c
(
å
); \

127 ià(
pc
-
memoff£t
 >ğ
MEMSIZE
) \

128 { 
	`´štf
("MEMSIZEoo small. Fix‡nd„ecompile.\n"); \

129 
	`ex™
(1); } \

130 }

	)

132 iàĞ
	`ldnsh»ad
(
ld±r
, ".‹xt", &
‹xth—d
) != 1 )

133 
	`´štf
("text section header missing\n");

135 
	`LOADSECTION
(
‹xth—d
)

137 iàĞ
	`ldnsh»ad
(
ld±r
, ".rd©a", &
rd©ah—d
) != 1 )

138 
	`´štf
("rdata section header missing\n");

140 
	`LOADSECTION
(
rd©ah—d
)

142 iàĞ
	`ldnsh»ad
(
ld±r
, ".d©a", &
d©ah—d
) != 1 )

143 
	`´štf
("data section header missing\n");

145 
	`LOADSECTION
(
d©ah—d
)

147 iàĞ
	`ldnsh»ad
(
ld±r
, ".sd©a", &
sd©ah—d
) != 1 )

148 
	`´štf
("sdata section header missing\n");

150 
	`LOADSECTION
(
sd©ah—d
)

152 iàĞ
	`ldnsh»ad
(
ld±r
, ".sbss", &
sbssh—d
) != 1 )

153 
	`´štf
("sbss section header missing\n");

155 
	`LOADSECTION
(
sbssh—d
)

157 iàĞ
	`ldnsh»ad
(
ld±r
, ".bss", &
bssh—d
) != 1 )

158 
	`´štf
("bss section header missing\n");

160 
	`LOADSECTION
(
bssh—d
)

164 
	}
}

167 *
	$m_®loc
(
n
)

168 
n
;

170 *
	`m®loc
();

172  (*è(è
	`m®loc
((è
n
);

173 
	}
}

	@bin/noff.h

8 
	#NOFFMAGIC
 0xbadçd

	)

12 
	s£gm’t
 {

13 
	mvœtu®Addr
;

14 
	mšFeAddr
;

15 
	msize
;

16 } 
	tSegm’t
;

18 
	snoffH—d”
 {

19 
	mnoffMagic
;

20 
Segm’t
 
	mcode
;

21 
Segm’t
 
	mš™D©a
;

22 
Segm’t
 
	munš™D©a
;

25 } 
	tNoffH—d”
;

	@bin/opstrings.c

7 
	~"cİyright.h
"

9 *
	gnÜm®İs
[] = {

76 *
	g¥ecŸlİs
[] = {

	@bin/out.c

7 
	#MAIN


	)

8 
	~"cİyright.h
"

9 #undeà
MAIN


22 
	~<fehdr.h
>

23 
	~<aouthdr.h
>

24 
	~<súhdr.h
>

25 
	~<»loc.h
>

26 
	~<syms.h
>

27 
	~<¡dio.h
>

29 
	#»ad_¡ruù
(
f
,
s
è(
	`ä—d
(&s,(s),1,f)==1)

	)

31 
	#MAXRELOCS
 1000

	)

34 
	#MAXDATA
 10000

	)

36 
	sd©a
 {

37 
	md©a
[
MAXDATA
];

38 
»loc
 
	m»loc
[
MAXRELOCS
];

39 
	mËngth
;

40 
	m»locs
;

43 
	#MAXSCNS
 10

	)

44 
	#MAXSYMS
 300

	)

45 
	#MAXSSPACE
 20000

	)

47 
fehdr
 
	gfehdr
;

48 
aouthdr
 
	gaouthdr
;

49 
súhdr
 
	gsúhdr
[
MAXSCNS
];

50 
d©a
 
	g£ùiÚ
[
MAXSCNS
];

51 
HDRR
 
	gsymhdr
;

52 
EXTR
 
	gsymbŞs
[
MAXSYMS
];

53 
	gs¥aû
[20000];

55 *
	gsymbŞ_ty³
[] = {

61 *
	g¡Üage_şass
[] = {

68 
	$maš
(
¬gc
,
¬gv
)

69 
¬gc
;

70 *
¬gv
[];

72 *
f’ame
 = "a.out";

73 
FILE
 *
f
;

74 
i
;

75 
l
;

77 
buf
[100];

79 ià(
¬gc
 =ğ2è
f’ame
 = 
¬gv
[1];

80 ià((
f
 = 
	`fİ’
(
f’ame
,"r")è=ğ
NULL
) {

81 
	`´štf
("out: could‚Ù o³À%s\n",
f’ame
);

82 
	`³¼Ü
("out");

83 
	`ex™
(1);

85 ià(!
	`»ad_¡ruù
(
f
,
fehdr
) ||

86 !
	`»ad_¡ruù
(
f
,
aouthdr
) ||

87 
fehdr
.
f_magic
 !ğ
MIPSELMAGIC
) {

88 
	`´štf
("out: % i nÙ‡ MIPS L™e-EndŸÀCOFF objeù fe\n",
f’ame
);

89 
	`ex™
(1);

91 ià(
fehdr
.
f_nsús
 > 
MAXSCNS
) {

92 
	`´štf
("out: Too many COFF sections.\n");

93 
	`ex™
(1);

95 
i
=0; i < 
fehdr
.
f_nsús
; ++i) {

96 
	`»ad_¡ruù
(
f
,
súhdr
[
i
]);

97 ià(
súhdr
[
i
].
s_size
 > 
MAXDATA
*() &&

98 
súhdr
[
i
].
s_sú±r
 != 0 ||

99 
súhdr
[
i
].
s_Ä–oc
 > 
MAXRELOCS
) {

100 
	`´štf
("£ùiÚ % i toØbig.\n",
súhdr
[
i
].
s_Çme
);

101 
	`ex™
(1);

104 
i
=0; i < 
fehdr
.
f_nsús
; ++i) {

105 ià(
súhdr
[
i
].
s_sú±r
 != 0) {

106 
£ùiÚ
[
i
].
Ëngth
 = 
súhdr
[i].
s_size
/4;

107 
	`f£ek
(
f
,
súhdr
[
i
].
s_sú±r
,0);

108 
	`ä—d
(
£ùiÚ
[
i
].
d©a
,(),£ùiÚ[i].
Ëngth
,
f
);

109 
£ùiÚ
[
i
].
»locs
 = 
súhdr
[i].
s_Ä–oc
;

110 
	`f£ek
(
f
,
súhdr
[
i
].
s_»ÍŒ
,0);

111 
	`ä—d
(
£ùiÚ
[
i
].
»loc
,(»loc),£ùiÚ[i].
»locs
,
f
);

113 
£ùiÚ
[
i
].
Ëngth
 = 0;

116 
	`f£ek
(
f
,
fehdr
.
f_sym±r
,0);

117 
	`»ad_¡ruù
(
f
,
symhdr
);

118 ià(
symhdr
.
›xtMax
 > 
MAXSYMS
) {

119 
	`´štf
("too many symbolso store.\n");

121 
	`f£ek
(
f
,
symhdr
.
cbExtOff£t
,0);

122 
i
=0; i < 
MAXSYMS
 && i<
symhdr
.
›xtMax
; ++i) {

123 
	`»ad_¡ruù
(
f
,
symbŞs
[
i
]);

125 ià(
symhdr
.
issExtMax
 > 
MAXSSPACE
) {

126 
	`´štf
("too†arge‡ string space.\n");

127 
	`ex™
(1);

129 
	`f£ek
(
f
,
symhdr
.
cbSsExtOff£t
,0);

130 
	`ä—d
(
s¥aû
,1,
symhdr
.
issExtMax
,
f
);

132 
i
=0; i<
fehdr
.
f_nsús
; ++i) {

133 
	`´št_£ùiÚ
(
i
);

136 
	`´štf
("External Symbols:\nValue\t Type\t\tStorage Class\tName\n");

137 
i
=0; i < 
MAXSYMS
 && i < 
symhdr
.
›xtMax
; ++i) {

138 
SYMR
 *
sym
 = &
symbŞs
[
i
].
asym
;

139 ià(
sym
->
sc
 =ğ
scUndefšed
è
	`my´štf
("\t ");

140 
	`my´štf
("%08x ",
sym
->
v®ue
);

141 
	`my´štf
("%s",
symbŞ_ty³
[
sym
->
¡
]);

142 
	`myb
(25);

143 
	`my´štf
("%s",
¡Üage_şass
[
sym
->
sc
]);

144 
	`myb
(41);

145 
	`my´štf
("%s\n",&
s¥aû
[
sym
->
iss
]);

148 
	}
}

150 
	gcŞumn
 = 1;

151 
FILE
 *
	goutfe
 = 
¡dout
;

153 
	~<v¬¬gs.h
>

155 
	$my´štf
(
va_®i¡
)

156 
va_dş


158 
va_li¡
 
­
;

159 *
fÜm
;

160 
buf
[100];

162 
	`va_¡¬t
(
­
);

163 
fÜm
 = 
	`va_¬g
(
­
,*);

164 
	`v¥rštf
(
buf
,
fÜm
,
­
);

165 
	`va_’d
(
­
);

167 
	`åuts
(
buf
,
outfe
);

169 
fÜm
 = 
buf
; *form != '\0'; ++form) {

170 ià(*
fÜm
 =ğ'\n'è
cŞumn
 = 1;

171 ià(*
fÜm
 =ğ'\t'è
cŞumn
 = ((column + 7)&~7)+1;

172 
cŞumn
 += 1;

174 
	}
}

176 
	$myb
(
n
)

177 
n
;

179 
cŞumn
 < 
n
) {

180 
	`åutc
(' ',
outfe
);

181 ++
cŞumn
;

183  
cŞumn
 =ğ
n
;

184 
	}
}

186 
	$my£tfe
(
f
)

187 
FILE
 *
f
;

189 
outfe
 = 
f
;

190 
	}
}

192 
	#´štf
 
my´štf


	)

193 
	~"d.c
"

195 
	$´št_£ùiÚ
(
i
)

196 
i
;

198 
j
,
k
;

199 
is_‹xt
;

200 
pc
;

201 
wÜd
;

202 *
s
;

204 
	`´štf
("SeùiÚ: %s\t%d/%d\n",
súhdr
[
i
].
s_Çme
,

205 
súhdr
[
i
].
s_size
,
£ùiÚ
[i].
»locs
);

206 
is_‹xt
 = (
	`¡ºcmp
(
súhdr
[
i
].
s_Çme
,".text",5) == 0);

208 
j
=0; j < 
£ùiÚ
[
i
].
Ëngth
; ++j) {

209 
pc
 = 
súhdr
[
i
].
s_vaddr
+
j
*4;

210 
wÜd
 = 
£ùiÚ
[
i
].
d©a
[
j
];

211 ià(
is_‹xt
) {

212 
	`dump_ascii
(
wÜd
,
pc
);

214 
	`´štf
("%08x: %08x ", 
pc
,
wÜd
);

215 
s
 = (*)&
wÜd
;

216 
k
=0; k<4; ++k) {

217 ià(
s
[
k
] >ğ' ' && s[k] < 127è
	`´štf
("%c",s[k]);

218 
	`´štf
(".");

220 
	`´štf
("\t%d",
wÜd
);

222 
	`´št_»loc
(
pc
,
i
,
j
);

224 
	}
}

226 *
	g£ùiÚ_Çme
[] = {

231 *
	g»loc_ty³
[] = {

235 
	$´št_»loc
(
vaddr
,
i
,
j
)

236 
i
,
j
;

238 
k
;

239 
»loc
 *
½
;

240 
k
=0; k < 
£ùiÚ
[
i
].
»locs
; ++k) {

241 
½
 = &
£ùiÚ
[
i
].
»loc
[
k
];

242 ià(
vaddr
 =ğ
½
->
r_vaddr
) {

243 
	`myb
(57);

244 ià(
½
->
r_ex‹º
) {

245 ià(
½
->
r_symndx
 >ğ
MAXSYMS
) {

246 
	`´štf
("sym $%d",
½
->
r_symndx
);

248 
	`´štf
("\"%s\"",&
s¥aû
[
symbŞs
[
½
->
r_symndx
].
asym
.
iss
]);

251 
	`´štf
("%s",
£ùiÚ_Çme
[
½
->
r_symndx
]);

253 
	`´štf
(" %s",
»loc_ty³
[
½
->
r_ty³
]);

257 
	`´štf
("\n");

258 
	}
}

	@bin/system.c

7 
	~"cİyright.h
"

8 
	~<¡dio.h
>

9 
	~<sysÿÎ.h
>

10 
	~"št.h
"

12 
Reg
[];

13 
mem
[];

14 
T¿±¿û
;

16 *
u_to_št_addr
();

19 
	$sy¡em_b»ak
()

21 iàĞ
T¿±¿û
 )

22 
	`´štf
("**breakpoint ");

23 
	`sy¡em_Œ­
();

24 
	}
}

26 
	$sy¡em_Œ­
()

28 
o0
, 
o1
, 
o2
;

29 
sysÿÎno
;

30 
	`l£ek
();

32 iàĞ
T¿±¿û
 )

34 
	`´štf
("**Sy¡em c®È%d\n", 
Reg
[2]);

35 
	`dump_»g
();

47 
sysÿÎno
 = 
Reg
[2];

48 
o0
 = 
Reg
[4];

49 
o1
 = 
Reg
[5];

50 
o2
 = 
Reg
[6];

53 
sysÿÎno
)

55 
SYS_ex™
:

56 
	`´št¡©i¡ics
();

57 
	`fæush
(
¡dout
);

58 
	`ex™
(0);

60 
SYS_»ad
:

61 
Reg
[1] =

62 
	`»ad
(
	`u_to_št_fd
(
o0
), 
	`u_to_št_addr
(
o1
), 
o2
);

64 
SYS_wr™e
:

65 
Reg
[1] =

66 
	`wr™e
(
	`u_to_št_fd
(
o0
), 
	`u_to_št_addr
(
o1
), 
o2
);

69 
SYS_İ’
:

70 
Reg
[1] = 
	`İ’
(
	`u_to_št_addr
(
o0
), 
o1
, 
o2
);

73 
SYS_şo£
:

74 
Reg
[1] = 0;

79 
Reg
[1] = ((
o0
 / 8192) + 1) * 8192;

82 
SYS_l£ek
:

83 
Reg
[1] = (è
	`l£ek
(
	`u_to_št_fd
(
o0
), (è
o1
, 
o2
);

86 
SYS_ioùl
:

89 
	#IOCPARM_MASK
 0x7à

	)

90 
size
 = (
o1
 >> 16è& 
IOCPARM_MASK
;

91 
ioùl_group
 = (
o1
 >> 8) & 0x00ff;

92 ià((
ioùl_group
 =ğ't'è&& (
size
 == 8))

94 
size
 = 6;

95 
o1
 = (o1 & ~((
IOCPARM_MASK
 << 16)))

96 | (
size
 << 16);

99 
Reg
[1] = 
	`ioùl
(
	`u_to_št_fd
(
o0
),
o1
,
	`u_to_št_addr
(
o2
));

100 
Reg
[1] = 0;

103 
SYS_f¡©
:

104 
Reg
[1] = 
	`f¡©
(
o1
, 
o2
);

107 
SYS_g‘·gesize
:

108 
Reg
[1] = 
	`g‘·gesize
();

112 
	`´štf
("UnknowÀSy¡em c®È%d\n", 
sysÿÎno
);

113 iàĞ! 
T¿±¿û
 )

114 
	`dump_»g
();

115 
	`ex™
(2);

118 iàĞ
T¿±¿û
 )

120 
	`´štf
("**Afterwards:\n");

121 
	`dump_»g
();

123 
	}
}

125 *
	$u_to_št_addr
(
±r
)

126 
±r
;

130  ((*è((è
mem
 - 
memoff£t
 + 
±r
));

131 
	}
}

133 
	$u_to_št_fd
(
fd
)

135 ià(
fd
 > 2)

142  (
fd
);

143 
	}
}

	@filesys/IndirectBlock.cc

9 
	~"IndœeùBlock.h
"

10 
	~"sy¡em.h
"

17 
	gIndœeùBlock
::
	$IndœeùBlock
()

19 
numSeùÜs
 = 0;

20 
i
 = 0; i < 
D©aSeùÜsP”Indœeù
; i++)

22 
d©aSeùÜs
[
i
] = -1;

24 
	}
}

31 
	gIndœeùBlock
::
	$Wr™eBack
(
£ùÜNum
)

33 
synchDisk
->
	`Wr™eSeùÜ
(
£ùÜNum
, (*è
this
);

34 
	}
}

41 
	gIndœeùBlock
::
	$F‘chFrom
(
£ùÜNum
)

43 
synchDisk
->
	`R—dSeùÜ
(
£ùÜNum
, (*è
this
);

44 
	}
}

52 
	gIndœeùBlock
::
	$PutSeùÜ
(
£ùÜNum
)

54 
šdexOfNewSeùÜ
 = 
numSeùÜs
;

55 
d©aSeùÜs
[
šdexOfNewSeùÜ
] = 
£ùÜNum
;

56 
numSeùÜs
++;

57 
	}
}

65 
	gIndœeùBlock
::
	$D—Îoÿ‹
(
B™M­
* 
®locSeùÜsM­
)

67 
i
 = 0; i < 
numSeùÜs
; i++)

69 
®locSeùÜsM­
->
	`CË¬
(
d©aSeùÜs
[
i
]);

71 
numSeùÜs
 = 0;

72 
	}
}

84 
	gIndœeùBlock
::
	$By‹ToSeùÜ
(
off£tFromS¹OfIB
)

86 
cu¼IBSeùÜIndex
 = 
off£tFromS¹OfIB
 / 
SeùÜSize
;

87 
»suÉD©aSeùÜ
 = 
d©aSeùÜs
[
cu¼IBSeùÜIndex
];

89 ià(
»suÉD©aSeùÜ
 <= 0)

95  
»suÉD©aSeùÜ
;

97 
	}
}

104 
	gIndœeùBlock
::
	$G‘NumSeùÜsAÎoc
()

106  
numSeùÜs
;

107 
	}
}

	@filesys/IndirectBlock.h

9 #iâdeà
INDIRECT_POINTER_BLOCK_H


10 
	#INDIRECT_BLOCK_H


	)

12 
	~"disk.h
"

13 
	~"b™m­.h
"

18 
	#D©aSeùÜsP”Indœeù
 ((
SeùÜSize
 - ()è/ ())

	)

20 şas 
	cIndœeùBlock


22 
	mpublic
:

23 
IndœeùBlock
();

24 
Wr™eBack
(
£ùÜNum
);

25 
F‘chFrom
(
£ùÜNum
);

26 
PutSeùÜ
(
£ùÜNum
);

27 
D—Îoÿ‹
(
B™M­
* 
®locSeùÜsM­
);

28 
By‹ToSeùÜ
(
£ùÜNum
);

30 
G‘NumSeùÜsAÎoc
();

32 
	m´iv©e
:

33 
numSeùÜs
;

34 
	md©aSeùÜs
[
D©aSeùÜsP”Indœeù
];

	@filesys/directory.cc

23 
	~"cİyright.h
"

24 
	~"ut™y.h
"

25 
	~"fehdr.h
"

26 
	~"dœeùÜy.h
"

38 
	gDœeùÜy
::
	$DœeùÜy
(
size
)

40 
bË
 = 
Ãw
 
DœeùÜyEÁry
[
size
];

41 
bËSize
 = 
size
;

42 
i
 = 0; i < 
bËSize
; i++)

43 
bË
[
i
].
šU£
 = 
FALSE
;

44 
	}
}

51 
	gDœeùÜy
::~
	$DœeùÜy
()

53 
d–‘e
 [] 
bË
;

54 
	}
}

64 
	gDœeùÜy
::
	$F‘chFrom
(
O³nFe
 *
fe
)

66 (è
fe
->
	`R—dAt
((*)
bË
, 
bËSize
 * (
DœeùÜyEÁry
), 0);

67 
	}
}

77 
	gDœeùÜy
::
	$Wr™eBack
(
O³nFe
 *
fe
)

79 (è
fe
->
	`Wr™eAt
((*)
bË
, 
bËSize
 * (
DœeùÜyEÁry
), 0);

80 
	}
}

91 
	gDœeùÜy
::
	$FšdIndex
(*
Çme
)

93 
i
 = 0; i < 
bËSize
; i++)

94 ià(
bË
[
i
].
šU£
 && !
	`¡ºcmp
ÑabË[i].
Çme
,‚ame, 
FeNameMaxL’
))

95  
i
;

97 
	}
}

109 
	gDœeùÜy
::
	$Fšd
(*
Çme
)

111 
i
 = 
	`FšdIndex
(
Çme
);

113 ià(
i
 != -1)

114  
bË
[
i
].
£ùÜ
;

116 
	}
}

129 
boŞ


130 
	gDœeùÜy
::
	$Add
(*
Çme
, 
ÃwSeùÜ
)

132 ià(
	`FšdIndex
(
Çme
) != -1)

133  
FALSE
;

135 
i
 = 0; i < 
bËSize
; i++)

136 ià(!
bË
[
i
].
šU£
) {

137 
bË
[
i
].
šU£
 = 
TRUE
;

138 
	`¡ºıy
(
bË
[
i
].
Çme
,‚ame, 
FeNameMaxL’
);

139 
bË
[
i
].
£ùÜ
 = 
ÃwSeùÜ
;

140  
TRUE
;

142  
FALSE
;

143 
	}
}

153 
boŞ


154 
	gDœeùÜy
::
	$Remove
(*
Çme
)

156 
i
 = 
	`FšdIndex
(
Çme
);

158 ià(
i
 == -1)

159  
FALSE
;

160 
bË
[
i
].
šU£
 = 
FALSE
;

161  
TRUE
;

162 
	}
}

170 
	gDœeùÜy
::
	$Li¡
()

172 
i
 = 0; i < 
bËSize
; i++)

173 ià(
bË
[
i
].
šU£
)

174 
	`´štf
("%s\n", 
bË
[
i
].
Çme
);

175 
	}
}

184 
	gDœeùÜy
::
	$Pršt
()

186 
FeH—d”
 *
hdr
 = 
Ãw
 FileHeader;

188 
	`´štf
("Directory contents:\n");

189 
i
 = 0; i < 
bËSize
; i++)

190 ià(
bË
[
i
].
šU£
) {

191 
	`´štf
("Name: %s, SeùÜ: %d\n", 
bË
[
i
].
Çme
,abË[i].
£ùÜ
);

192 
hdr
->
	`F‘chFrom
(
bË
[
i
].
£ùÜ
);

193 
hdr
->
	`Pršt
();

195 
	`´štf
("\n");

196 
d–‘e
 
hdr
;

197 
	}
}

	@filesys/directory.h

15 
	~"cİyright.h
"

17 #iâdeà
DIRECTORY_H


18 
	#DIRECTORY_H


	)

20 
	~"İ’fe.h
"

22 
	#FeNameMaxL’
 9

24 

	)

32 şas 
	cDœeùÜyEÁry
 {

33 
	mpublic
:

34 
boŞ
 
šU£
;

35 
	m£ùÜ
;

37 
	mÇme
[
FeNameMaxL’
 + 1];

51 şas 
	cDœeùÜy
 {

52 
	mpublic
:

53 
DœeùÜy
(
size
);

55 ~
DœeùÜy
();

57 
F‘chFrom
(
O³nFe
 *
fe
);

58 
Wr™eBack
(
O³nFe
 *
fe
);

61 
Fšd
(*
Çme
);

64 
boŞ
 
Add
(*
Çme
, 
ÃwSeùÜ
);

66 
boŞ
 
Remove
(*
Çme
);

68 
Li¡
();

70 
Pršt
();

74 
	m´iv©e
:

75 
bËSize
;

76 
DœeùÜyEÁry
 *
	mbË
;

79 
FšdIndex
(*
Çme
);

	@filesys/filehdr.cc

25 
	~"cİyright.h
"

26 
	~"sy¡em.h
"

27 
	~"fehdr.h
"

40 
boŞ


41 
	gFeH—d”
::
	$AÎoÿ‹
(
B™M­
 *
ä“M­
, 
feSize
)

44 ià(
feSize
 > 
MaxFeSize
)

46 
	`´štf
("UÇbËØ§vfoàsiz%dØdisk, max sizi %d.\n", 
feSize
, 
MaxFeSize
);

47  
FALSE
;

50 
numBy‹s
 = 
feSize
;

51 
numSeùÜs
 = 
	`divRoundUp
(
feSize
, 
SeùÜSize
);

52 
numIndœeùBlocks
 = 0;

54 ià(
ä“M­
->
	`NumCË¬
(è< 
numSeùÜs
)

56 
	`´štf
("UÇbËØ§vfoàsiz%d,‚Ùƒnough disk s·û.\n", 
feSize
);

57  
FALSE
;

60 
£ùÜsLeáToAÎoÿ‹
 = 
numSeùÜs
;

61 
cu¼IBIndex
 = 0;

63 
£ùÜsLeáToAÎoÿ‹
 > 0)

66 
šdœeùBlocks
[
cu¼IBIndex
] = 
Ãw
 
	`IndœeùBlock
();

67 
numIndœeùBlocks
++;

68 
£ùÜsFÜIndœeùBlocks
[
cu¼IBIndex
] = 
ä“M­
->
	`Fšd
();

71 
£ùÜsFÜThisIB
 = 
£ùÜsLeáToAÎoÿ‹
 > 
D©aSeùÜsP”Indœeù


72 ? 
D©aSeùÜsP”Indœeù


73 : 
£ùÜsLeáToAÎoÿ‹
;

76 
i
 = 0; i < 
£ùÜsFÜThisIB
; i++)

78 
cu¼DœeùSeùÜIndex
 = 
ä“M­
->
	`Fšd
();

79 
šdœeùBlocks
[
cu¼IBIndex
]->
	`PutSeùÜ
(
cu¼DœeùSeùÜIndex
);

80 
£ùÜsLeáToAÎoÿ‹
--;

82 
cu¼IBIndex
++;

84  
TRUE
;

85 
	}
}

95 
	gFeH—d”
::
	$D—Îoÿ‹
(
B™M­
 *
ä“M­
)

97 
numIndœeùs
 = 
	`divRoundUp
(
numSeùÜs
, 
D©aSeùÜsP”Indœeù
);

98 
i
 = 0; i < 
numIndœeùs
; i++)

100 
šdœeùBlocks
[
i
]->
	`D—Îoÿ‹
(
ä“M­
);

101 
ä“M­
->
	`CË¬
(
£ùÜsFÜIndœeùBlocks
[
i
]);

103 
	}
}

113 
	gFeH—d”
::
	$F‘chFrom
(
£ùÜ
)

116 * 
bufãr
 = 
Ãw
 [
SeùÜSize
];

117 
	`bz”o
(
bufãr
, 
SeùÜSize
);

118 
synchDisk
->
	`R—dSeùÜ
(
£ùÜ
, 
bufãr
);

119 
	`bcİy
(
bufãr
, (*è
this
, 
H—d”Size
);

122 
numIndœeùs
 = 
	`divRoundUp
(
numSeùÜs
, 
D©aSeùÜsP”Indœeù
);

123 
i
 = 0; i < 
numIndœeùs
; i++)

125 
¡ÜedIBSeùÜNum
 = 
£ùÜsFÜIndœeùBlocks
[
i
];

126 
	`ASSERT
(
¡ÜedIBSeùÜNum
 >= 2);

127 
	`ASSERT
(
¡ÜedIBSeùÜNum
 < (
NumIndœeùBlocks
 * 
D©aSeùÜsP”Indœeù
 + 2));

129 
šdœeùBlocks
[
i
] = 
Ãw
 
	`IndœeùBlock
();

130 
šdœeùBlocks
[
i
]->
	`F‘chFrom
(
¡ÜedIBSeùÜNum
);

132 
	}
}

142 
	gFeH—d”
::
	$Wr™eBack
(
£ùÜ
)

145 * 
bufãr
 = 
Ãw
 [
SeùÜSize
];

146 
	`bz”o
(
bufãr
, 
SeùÜSize
);

147 
	`ASSERT
(
H—d”Size
 =ğ
SeùÜSize
);

148 
	`bcİy
((*è
this
, 
bufãr
, 
H—d”Size
);

149 
synchDisk
->
	`Wr™eSeùÜ
(
£ùÜ
, 
bufãr
);

152 
numIndœeùs
 = 
	`divRoundUp
(
numSeùÜs
, 
D©aSeùÜsP”Indœeù
);

153 
i
 = 0; i < 
numIndœeùs
; i++)

155 
¡ÜedIBSeùÜNum
 = 
£ùÜsFÜIndœeùBlocks
[
i
];

156 
	`ASSERT
(
¡ÜedIBSeùÜNum
 >= 2);

157 
	`ASSERT
(
¡ÜedIBSeùÜNum
 < (
NumIndœeùBlocks
 * 
D©aSeùÜsP”Indœeù
 + 2));

159 
šdœeùBlocks
[
i
]->
	`Wr™eBack
(
¡ÜedIBSeùÜNum
);

161 
	}
}

174 
	gFeH—d”
::
	$By‹ToSeùÜ
(
off£t
)

177 
šdœeùBlockIndex
 = 
	`divRoundDown
(
off£t
, 
By‹sP”IB
);

178 
off£tW™hšIB
 = (
off£t
 >ğ
By‹sP”IB
) ? (offset % BytesPerIB) : offset;

181 
»suÉšgSeùÜ
 = 
šdœeùBlocks
[
šdœeùBlockIndex
]->
	`By‹ToSeùÜ
(
off£tW™hšIB
);

182 
	`ASSERT
(
»suÉšgSeùÜ
 >= 2);

183  
»suÉšgSeùÜ
;

184 
	}
}

192 
	gFeH—d”
::
	$FeL’gth
()

194  
numBy‹s
;

195 
	}
}

206 
	gFeH—d”
::
	$Pršt
()

228 
	}
}

235 
FeH—d”
::
	$S‘NumBy‹s
(
by‹s
)

237 
numBy‹s
 = 
by‹s
;

238 
	}
}

246 
boŞ
 
	gFeH—d”
::
	$Ex‹ndFe
(
numSeùÜs
)

248 
£ùÜsLeáToAÎoÿ‹
 = 
numSeùÜs
;

249 
	`ASSERT
(
£ùÜsLeáToAÎoÿ‹
 > 0);

251 
O³nFe
* 
ä“M­Fe
 = 
Ãw
 
	`O³nFe
(
F»eM­SeùÜ
);

252 
B™M­
* 
ä“M­
 = 
Ãw
 
	`B™M­
(
NumSeùÜs
);

253 
ä“M­
->
	`F‘chFrom
(
ä“M­Fe
);

255 ià(
ä“M­
->
	`NumCË¬
(è< 
£ùÜsLeáToAÎoÿ‹
)

257  
FALSE
;

260 
cu¼IBIndex
 = 
numIndœeùBlocks
 - 1;

262 
£ùÜsLeáToAÎoÿ‹
 > 0)

264 
numD©aSeùÜsF»eInCu¼IB
 = 0;

265 
£ùÜsFÜThisIB
 = 0;

267 ià(
cu¼IBIndex
 != -1) {

268 
numD©aSeùÜsF»eInCu¼IB
 = 
D©aSeùÜsP”Indœeù
 - 
šdœeùBlocks
[
cu¼IBIndex
]->
	`G‘NumSeùÜsAÎoc
();

271 ià((
numD©aSeùÜsF»eInCu¼IB
 <ğ0è|| (
cu¼IBIndex
 == -1))

273 ià(
ä“M­
->
	`NumCË¬
(è< 
£ùÜsLeáToAÎoÿ‹
 + 1)

275  
FALSE
;

277 
cu¼IBIndex
++;

278 
numIndœeùBlocks
++;

279 
šdœeùBlocks
[
cu¼IBIndex
] = 
Ãw
 
	`IndœeùBlock
();

280 
£ùÜsFÜIndœeùBlocks
[
cu¼IBIndex
] = 
ä“M­
->
	`Fšd
();

282 
£ùÜsFÜThisIB
 = 
£ùÜsLeáToAÎoÿ‹
 > 
D©aSeùÜsP”Indœeù


283 ? 
D©aSeùÜsP”Indœeù


284 : 
£ùÜsLeáToAÎoÿ‹
;

288 ià(
ä“M­
->
	`NumCË¬
(è< 
£ùÜsLeáToAÎoÿ‹
)

290  
FALSE
;

292 
£ùÜsFÜThisIB
 = 
£ùÜsLeáToAÎoÿ‹
 > 
numD©aSeùÜsF»eInCu¼IB


293 ? 
numD©aSeùÜsF»eInCu¼IB


294 : 
£ùÜsLeáToAÎoÿ‹
;

298 
	`ASSERT
(
£ùÜsFÜThisIB
 > 0);

299 
i
 = 0; i < 
£ùÜsFÜThisIB
; i++)

301 
cu¼DœeùSeùÜIndex
 = 
ä“M­
->
	`Fšd
();

302 
šdœeùBlocks
[
cu¼IBIndex
]->
	`PutSeùÜ
(
cu¼DœeùSeùÜIndex
);

303 
£ùÜsLeáToAÎoÿ‹
--;

304 
numSeùÜs
++;

305 
numBy‹s
 +ğ
SeùÜSize
;

308 
ä“M­
->
	`Wr™eBack
(
ä“M­Fe
);

309 
d–‘e
 
ä“M­
;

310 
d–‘e
 
ä“M­Fe
;

311  
TRUE
;

312 
	}
}

	@filesys/filehdr.h

12 
	~"cİyright.h
"

14 #iâdeà
FILEHDR_H


15 
	#FILEHDR_H


	)

17 
	~"disk.h
"

18 
	~"b™m­.h
"

19 
	~"IndœeùBlock.h
"

21 
	#F»eM­SeùÜ
 0

	)

22 
	#DœeùÜySeùÜ
 1

	)

23 
	#F»eM­Size
 ()

	)

24 
	#DœeùÜySize
 ()

	)

25 
	#NumIndœeùBlocks
 (
SeùÜSize
 - 
F»eM­Size
 - 
DœeùÜySize
è/ ()

	)

26 
	#H—d”Size
 
F»eM­Size
 + 
DœeùÜySize
 + (
NumIndœeùBlocks
 * ())

	)

27 
	#MaxFeSize
 
NumIndœeùBlocks
 * 
D©aSeùÜsP”Indœeù
 * 
SeùÜSize


	)

28 
	#By‹sP”IB
 (
D©aSeùÜsP”Indœeù
 * 
SeùÜSize
)

	)

44 şas 
	cFeH—d”
 {

45 
	mpublic
:

46 
boŞ
 
AÎoÿ‹
(
B™M­
 *
b™M­
, 
feSize
);

49 
D—Îoÿ‹
(
B™M­
 *
b™M­
);

52 
F‘chFrom
(
£ùÜNumb”
);

53 
Wr™eBack
(
£ùÜNumb”
);

56 
By‹ToSeùÜ
(
off£t
);

60 
FeL’gth
();

63 
Pršt
();

64 
boŞ
 
Ex‹ndFe
(
numSeùÜs
);

65 
S‘NumBy‹s
(
numBy‹s
);

67 
	m´iv©e
:

68 
numBy‹s
;

69 
	mnumSeùÜs
;

70 
	mnumIndœeùBlocks
;

74 
	m£ùÜsFÜIndœeùBlocks
[
NumIndœeùBlocks
];

75 
IndœeùBlock
* 
	mšdœeùBlocks
[
NumIndœeùBlocks
];

	@filesys/filesys.cc

46 
	~"cİyright.h
"

48 
	~"disk.h
"

49 
	~"b™m­.h
"

50 
	~"dœeùÜy.h
"

51 
	~"fehdr.h
"

52 
	~"fesys.h
"

57 
	#F»eM­SeùÜ
 0

	)

58 
	#DœeùÜySeùÜ
 1

	)

63 
	#F»eM­FeSize
 (
NumSeùÜs
 / 
B™sInBy‹
)

	)

64 
	#NumDœEÁr›s
 10

	)

65 
	#DœeùÜyFeSize
 ((
DœeùÜyEÁry
è* 
NumDœEÁr›s
)

	)

80 
	gFeSy¡em
::
	$FeSy¡em
(
boŞ
 
fÜm©
)

82 
	`DEBUG
('f', "Initializinghe file system.\n");

83 ià(
fÜm©
) {

84 
B™M­
 *
ä“M­
 = 
Ãw
 
	`B™M­
(
NumSeùÜs
);

85 
DœeùÜy
 *
dœeùÜy
 = 
Ãw
 
	`DœeùÜy
(
NumDœEÁr›s
);

86 
FeH—d”
 *
m­Hdr
 = 
Ãw
 FileHeader;

87 
FeH—d”
 *
dœHdr
 = 
Ãw
 FileHeader;

89 
	`DEBUG
('f', "Formattinghe file system.\n");

93 
ä“M­
->
	`M¬k
(
F»eM­SeùÜ
);

94 
ä“M­
->
	`M¬k
(
DœeùÜySeùÜ
);

99 
	`ASSERT
(
m­Hdr
->
	`AÎoÿ‹
(
ä“M­
, 
F»eM­FeSize
));

100 
	`ASSERT
(
dœHdr
->
	`AÎoÿ‹
(
ä“M­
, 
DœeùÜyFeSize
));

107 
	`DEBUG
('f', "Writing headers backo disk.\n");

108 
m­Hdr
->
	`Wr™eBack
(
F»eM­SeùÜ
);

109 
dœHdr
->
	`Wr™eBack
(
DœeùÜySeùÜ
);

115 
ä“M­Fe
 = 
Ãw
 
	`O³nFe
(
F»eM­SeùÜ
);

116 
dœeùÜyFe
 = 
Ãw
 
	`O³nFe
(
DœeùÜySeùÜ
);

124 
	`DEBUG
('f', "Writing bitmap‡nd directory backo disk.\n");

125 
ä“M­
->
	`Wr™eBack
(
ä“M­Fe
);

126 
dœeùÜy
->
	`Wr™eBack
(
dœeùÜyFe
);

128 ià(
	`DebugIsEÇbËd
('f')) {

129 
ä“M­
->
	`Pršt
();

130 
dœeùÜy
->
	`Pršt
();

132 
d–‘e
 
ä“M­
;

133 
d–‘e
 
dœeùÜy
;

134 
d–‘e
 
m­Hdr
;

135 
d–‘e
 
dœHdr
;

140 
ä“M­Fe
 = 
Ãw
 
	`O³nFe
(
F»eM­SeùÜ
);

141 
dœeùÜyFe
 = 
Ãw
 
	`O³nFe
(
DœeùÜySeùÜ
);

143 
	}
}

174 
boŞ


175 
	gFeSy¡em
::
	$C»©e
(*
Çme
, 
š™ŸlSize
)

177 
DœeùÜy
 *
dœeùÜy
;

178 
B™M­
 *
ä“M­
;

179 
FeH—d”
 *
hdr
;

180 
£ùÜ
;

181 
boŞ
 
sucûss
;

183 
	`DEBUG
('f', "C»©šg f%s, siz%d\n", 
Çme
, 
š™ŸlSize
);

185 
dœeùÜy
 = 
Ãw
 
	`DœeùÜy
(
NumDœEÁr›s
);

186 
dœeùÜy
->
	`F‘chFrom
(
dœeùÜyFe
);

188 ià(
dœeùÜy
->
	`Fšd
(
Çme
) != -1) {

189 
	`DEBUG
('f', "Error: File is‡lready inhe directory.\n");

190 
sucûss
 = 
FALSE
;

193 
ä“M­
 = 
Ãw
 
	`B™M­
(
NumSeùÜs
);

194 
ä“M­
->
	`F‘chFrom
(
ä“M­Fe
);

195 
£ùÜ
 = 
ä“M­
->
	`Fšd
();

196 ià(
£ùÜ
 == -1) {

197 
	`DEBUG
('f', "Error: No free block for file header.\n");

198 
sucûss
 = 
FALSE
;

200 ià(!
dœeùÜy
->
	`Add
(
Çme
, 
£ùÜ
)) {

201 
	`DEBUG
('f', "Error: No‡vailable space in directory for‚ew file.\n");

202 
sucûss
 = 
FALSE
;

205 
hdr
 = 
Ãw
 
FeH—d”
;

206 ià(!
hdr
->
	`AÎoÿ‹
(
ä“M­
, 
š™ŸlSize
)) {

207 
	`DEBUG
('f', "Error: No space on disk forhe data.\n");

208 
sucûss
 = 
FALSE
;

211 
sucûss
 = 
TRUE
;

213 
hdr
->
	`Wr™eBack
(
£ùÜ
);

214 
dœeùÜy
->
	`Wr™eBack
(
dœeùÜyFe
);

215 
ä“M­
->
	`Wr™eBack
(
ä“M­Fe
);

217 
d–‘e
 
hdr
;

219 
d–‘e
 
ä“M­
;

221 
d–‘e
 
dœeùÜy
;

222  
sucûss
;

223 
	}
}

235 
O³nFe
 *

236 
	gFeSy¡em
::
	$O³n
(*
Çme
)

238 
DœeùÜy
 *
dœeùÜy
 = 
Ãw
 
	`DœeùÜy
(
NumDœEÁr›s
);

239 
O³nFe
 *
İ’Fe
 = 
NULL
;

240 
£ùÜ
;

242 
	`DEBUG
('f', "O³nšg f%s\n", 
Çme
);

243 
dœeùÜy
->
	`F‘chFrom
(
dœeùÜyFe
);

244 
£ùÜ
 = 
dœeùÜy
->
	`Fšd
(
Çme
);

245 ià(
£ùÜ
 >= 0)

246 
İ’Fe
 = 
Ãw
 
	`O³nFe
(
£ùÜ
);

247 
d–‘e
 
dœeùÜy
;

248  
İ’Fe
;

249 
	}
}

265 
boŞ


266 
	gFeSy¡em
::
	$Remove
(*
Çme
)

268 
DœeùÜy
 *
dœeùÜy
;

269 
B™M­
 *
ä“M­
;

270 
FeH—d”
 *
feHdr
;

271 
£ùÜ
;

273 
dœeùÜy
 = 
Ãw
 
	`DœeùÜy
(
NumDœEÁr›s
);

274 
dœeùÜy
->
	`F‘chFrom
(
dœeùÜyFe
);

275 
£ùÜ
 = 
dœeùÜy
->
	`Fšd
(
Çme
);

276 ià(
£ùÜ
 == -1) {

277 
d–‘e
 
dœeùÜy
;

278  
FALSE
;

280 
feHdr
 = 
Ãw
 
FeH—d”
;

281 
feHdr
->
	`F‘chFrom
(
£ùÜ
);

283 
ä“M­
 = 
Ãw
 
	`B™M­
(
NumSeùÜs
);

284 
ä“M­
->
	`F‘chFrom
(
ä“M­Fe
);

286 
feHdr
->
	`D—Îoÿ‹
(
ä“M­
);

287 
ä“M­
->
	`CË¬
(
£ùÜ
);

288 
dœeùÜy
->
	`Remove
(
Çme
);

290 
ä“M­
->
	`Wr™eBack
(
ä“M­Fe
);

291 
dœeùÜy
->
	`Wr™eBack
(
dœeùÜyFe
);

292 
d–‘e
 
feHdr
;

293 
d–‘e
 
dœeùÜy
;

294 
d–‘e
 
ä“M­
;

295  
TRUE
;

296 
	}
}

304 
	gFeSy¡em
::
	$Li¡
()

306 
DœeùÜy
 *
dœeùÜy
 = 
Ãw
 
	`DœeùÜy
(
NumDœEÁr›s
);

308 
dœeùÜy
->
	`F‘chFrom
(
dœeùÜyFe
);

309 
dœeùÜy
->
	`Li¡
();

310 
d–‘e
 
dœeùÜy
;

311 
	}
}

324 
	gFeSy¡em
::
	$Pršt
()

326 
FeH—d”
 *
b™Hdr
 = 
Ãw
 FileHeader;

327 
FeH—d”
 *
dœHdr
 = 
Ãw
 FileHeader;

328 
B™M­
 *
ä“M­
 = 
Ãw
 
	`B™M­
(
NumSeùÜs
);

329 
DœeùÜy
 *
dœeùÜy
 = 
Ãw
 
	`DœeùÜy
(
NumDœEÁr›s
);

331 
	`´štf
("Bit map file header:\n");

332 
b™Hdr
->
	`F‘chFrom
(
F»eM­SeùÜ
);

333 
b™Hdr
->
	`Pršt
();

335 
	`´štf
("Directory file header:\n");

336 
dœHdr
->
	`F‘chFrom
(
DœeùÜySeùÜ
);

337 
dœHdr
->
	`Pršt
();

339 
ä“M­
->
	`F‘chFrom
(
ä“M­Fe
);

340 
ä“M­
->
	`Pršt
();

342 
dœeùÜy
->
	`F‘chFrom
(
dœeùÜyFe
);

343 
dœeùÜy
->
	`Pršt
();

345 
d–‘e
 
b™Hdr
;

346 
d–‘e
 
dœHdr
;

347 
d–‘e
 
ä“M­
;

348 
d–‘e
 
dœeùÜy
;

349 
	}
}

	@filesys/filesys.h

35 #iâdeà
FS_H


36 
	#FS_H


	)

38 
	~"cİyright.h
"

39 
	~"İ’fe.h
"

41 #ifdeà
FILESYS_STUB


44 şas 
	cFeSy¡em
 {

45 
	mpublic
:

46 
	$FeSy¡em
(
boŞ
 
fÜm©
) {}

48 
boŞ
 
	$C»©e
(*
Çme
, 
š™ŸlSize
) {

49 
feDesütÜ
 = 
	`O³nFÜWr™e
(
Çme
);

51 ià(
feDesütÜ
 =ğ-1è 
FALSE
;

52 
	`Clo£
(
feDesütÜ
);

53  
TRUE
;

54 
	}
}

56 
O³nFe
* 
	$O³n
(*
Çme
) {

57 
feDesütÜ
 = 
	`O³nFÜR—dWr™e
(
Çme
, 
FALSE
);

59 ià(
feDesütÜ
 =ğ-1è 
NULL
;

60  
Ãw
 
	`O³nFe
(
feDesütÜ
);

61 
	}
}

63 
boŞ
 
	$Remove
(*
Çme
è{  
	`UÆšk
Òameè=ğ0; 
	}
}

68 şas 
	cFeSy¡em
 {

69 
	mpublic
:

70 
FeSy¡em
(
boŞ
 
fÜm©
);

77 
boŞ
 
C»©e
(*
Çme
, 
š™ŸlSize
);

80 
O³nFe
* 
O³n
(*
Çme
);

82 
boŞ
 
Remove
(*
Çme
);

84 
Li¡
();

86 
Pršt
();

88 
	m´iv©e
:

89 
O³nFe
* 
ä“M­Fe
;

91 
O³nFe
* 
	mdœeùÜyFe
;

	@filesys/fstest.cc

15 
	~"cİyright.h
"

17 
	~"ut™y.h
"

18 
	~"fesys.h
"

19 
	~"sy¡em.h
"

20 
	~"th»ad.h
"

21 
	~"disk.h
"

22 
	~"¡©s.h
"

24 
	#T¿nsãrSize
 10

25 

	)

32 
	$Cİy
(*
äom
, *
to
)

34 
FILE
 *
å
;

35 
O³nFe
* 
İ’Fe
;

36 
amouÁR—d
, 
feL’gth
;

37 *
bufãr
;

40 ià((
å
 = 
	`fİ’
(
äom
, "r")è=ğ
NULL
) {

41 
	`´štf
("Cİy: couldn'ˆİ’ iÅuˆf%s\n", 
äom
);

46 
	`f£ek
(
å
, 0, 2);

47 
feL’gth
 = 
	`á–l
(
å
);

48 
	`f£ek
(
å
, 0, 0);

51 
	`DEBUG
('f', "Cİyšg f%s, siz%d,Øf%s\n", 
äom
, 
feL’gth
, 
to
);

52 ià(!
feSy¡em
->
	`C»©e
(
to
, 
feL’gth
)) {

53 
	`´štf
("Cİy: couldn'ˆü—‹ ouuˆf%s\n", 
to
);

54 
	`fşo£
(
å
);

58 
İ’Fe
 = 
feSy¡em
->
	`O³n
(
to
);

59 
	`ASSERT
(
İ’Fe
 !ğ
NULL
);

62 
bufãr
 = 
Ãw
 [
T¿nsãrSize
];

63 (
amouÁR—d
 = 
	`ä—d
(
bufãr
, (), 
T¿nsãrSize
, 
å
)) > 0) {

64 
	`DEBUG
('f', "Writing‡ copieden byteso NACHOS file...\n");

65 
İ’Fe
->
	`Wr™e
(
bufãr
, 
amouÁR—d
);

67 
d–‘e
 [] 
bufãr
;

70 
d–‘e
 
İ’Fe
;

71 
	`fşo£
(
å
);

72 
	}
}

80 
	$Pršt
(*
Çme
)

82 
O³nFe
 *
İ’Fe
;

83 
i
, 
amouÁR—d
;

84 *
bufãr
;

86 ià((
İ’Fe
 = 
feSy¡em
->
	`O³n
(
Çme
)è=ğ
NULL
) {

87 
	`´štf
("Pršt: uÇbËØİ’ f%s\n", 
Çme
);

91 
bufãr
 = 
Ãw
 [
T¿nsãrSize
];

92 (
amouÁR—d
 = 
İ’Fe
->
	`R—d
(
bufãr
, 
T¿nsãrSize
)) > 0)

93 
i
 = 0; i < 
amouÁR—d
; i++)

94 
	`´štf
("%c", 
bufãr
[
i
]);

95 
d–‘e
 [] 
bufãr
;

97 
d–‘e
 
İ’Fe
;

99 
	}
}

113 
	#FeName
 "Te¡Fe"

	)

114 
	#CÚ‹Ás
 "1234567890"

	)

115 
	#CÚ‹ÁSize
 
	`¡¾’
(
CÚ‹Ás
)

	)

116 
	#FeSize
 (()(
CÚ‹ÁSize
 * 5000))

	)

119 
	$FeWr™e
()

121 
O³nFe
 *
İ’Fe
;

122 
i
, 
numBy‹s
;

124 
	`´štf
("Sequential write of %d byte file, in %d byte chunks\n",

125 
FeSize
, 
CÚ‹ÁSize
);

126 ià(!
feSy¡em
->
	`C»©e
(
FeName
, 0)) {

127 
	`´štf
("P”à‹¡: cª'ˆü—‹ %s\n", 
FeName
);

130 
İ’Fe
 = 
feSy¡em
->
	`O³n
(
FeName
);

131 ià(
İ’Fe
 =ğ
NULL
) {

132 
	`´štf
("P”à‹¡: uÇbËØİ’ %s\n", 
FeName
);

135 
i
 = 0; i < 
FeSize
; i +ğ
CÚ‹ÁSize
) {

136 
numBy‹s
 = 
İ’Fe
->
	`Wr™e
(
CÚ‹Ás
, 
CÚ‹ÁSize
);

137 ià(
numBy‹s
 < 10) {

138 
	`´štf
("P”à‹¡: uÇbËØwr™%s\n", 
FeName
);

139 
d–‘e
 
İ’Fe
;

143 
d–‘e
 
İ’Fe
;

144 
	}
}

147 
	$FeR—d
()

149 
O³nFe
 *
İ’Fe
;

150 *
bufãr
 = 
Ãw
 [
CÚ‹ÁSize
];

151 
i
, 
numBy‹s
;

153 
	`´štf
("Sequential„ead of %d byte file, in %d byte chunks\n",

154 
FeSize
, 
CÚ‹ÁSize
);

156 ià((
İ’Fe
 = 
feSy¡em
->
	`O³n
(
FeName
)è=ğ
NULL
) {

157 
	`´štf
("P”à‹¡: uÇbËØİ’ f%s\n", 
FeName
);

158 
d–‘e
 [] 
bufãr
;

161 
i
 = 0; i < 
FeSize
; i +ğ
CÚ‹ÁSize
) {

162 
numBy‹s
 = 
İ’Fe
->
	`R—d
(
bufãr
, 
CÚ‹ÁSize
);

163 ià((
numBy‹s
 < 10è|| 
	`¡ºcmp
(
bufãr
, 
CÚ‹Ás
, 
CÚ‹ÁSize
)) {

164 
	`´štf
("P”à‹¡: uÇbËØ»ad %s\n", 
FeName
);

165 
d–‘e
 
İ’Fe
;

166 
d–‘e
 [] 
bufãr
;

170 
d–‘e
 [] 
bufãr
;

171 
d–‘e
 
İ’Fe
;

172 
	}
}

175 
	$P”fÜmªûTe¡
()

177 
	`´štf
("Starting file system…erformanceest:\n");

178 
¡©s
->
	`Pršt
();

179 
	`FeWr™e
();

180 
	`FeR—d
();

181 ià(!
feSy¡em
->
	`Remove
(
FeName
)) {

182 
	`´štf
("P”à‹¡: uÇbËØ»mov%s\n", 
FeName
);

185 
¡©s
->
	`Pršt
();

186 
	}
}

	@filesys/openfile.cc

14 
	~"cİyright.h
"

15 
	~"fehdr.h
"

16 
	~"İ’fe.h
"

17 
	~"sy¡em.h
"

18 #ifdeà
HOST_SPARC


19 
	~<¡ršgs.h
>

30 
	gO³nFe
::
	$O³nFe
(
£ùÜ
)

32 
hdr
 = 
Ãw
 
FeH—d”
;

33 
hdr
->
	`F‘chFrom
(
£ùÜ
);

34 
£ekPos™iÚ
 = 0;

35 
	}
}

42 
	gO³nFe
::~
	$O³nFe
()

44 
d–‘e
 
hdr
;

45 
	}
}

56 
	gO³nFe
::
	$S“k
(
pos™iÚ
)

58 
£ekPos™iÚ
 = 
pos™iÚ
;

59 
	}
}

75 
	gO³nFe
::
	$R—d
(*
što
, 
numBy‹s
)

77 
»suÉ
 = 
	`R—dAt
(
što
, 
numBy‹s
, 
£ekPos™iÚ
);

78 
£ekPos™iÚ
 +ğ
»suÉ
;

79  
»suÉ
;

80 
	}
}

83 
	gO³nFe
::
	$Wr™e
(*
što
, 
numBy‹s
)

85 
»suÉ
 = 
	`Wr™eAt
(
što
, 
numBy‹s
, 
£ekPos™iÚ
);

86 
£ekPos™iÚ
 +ğ
»suÉ
;

87  
»suÉ
;

88 
	}
}

117 
	gO³nFe
::
	$R—dAt
(*
što
, 
numBy‹s
, 
pos™iÚ
)

119 
feL’gth
 = 
hdr
->
	`FeL’gth
();

120 
i
, 
fœ¡SeùÜ
, 
Ï¡SeùÜ
, 
numSeùÜs
;

121 *
buf
;

123 ià((
numBy‹s
 <ğ0è|| (
pos™iÚ
 >ğ
feL’gth
))

125 ià((
pos™iÚ
 + 
numBy‹s
è> 
feL’gth
)

127 
numBy‹s
 = 
feL’gth
 - 
pos™iÚ
;

129 
	`DEBUG
('f', "Reading %d bytes‡t %d, from file of†ength %d.\n",

130 
numBy‹s
, 
pos™iÚ
, 
feL’gth
);

132 
fœ¡SeùÜ
 = 
	`divRoundDown
(
pos™iÚ
, 
SeùÜSize
);

133 
Ï¡SeùÜ
 = 
	`divRoundDown
(
pos™iÚ
 + 
numBy‹s
 - 1, 
SeùÜSize
);

134 
numSeùÜs
 = 1 + 
Ï¡SeùÜ
 - 
fœ¡SeùÜ
;

137 
buf
 = 
Ãw
 [
numSeùÜs
 * 
SeùÜSize
];

138 
i
 = 
fœ¡SeùÜ
; i <ğ
Ï¡SeùÜ
; i++)

140 
synchDisk
->
	`R—dSeùÜ
(
hdr
->
	`By‹ToSeùÜ
(
i
 * 
SeùÜSize
),

141 &
buf
[(
i
 - 
fœ¡SeùÜ
è* 
SeùÜSize
]);

145 
	`bcİy
(&
buf
[
pos™iÚ
 - (
fœ¡SeùÜ
 * 
SeùÜSize
)], 
što
, 
numBy‹s
);

146 
d–‘e
 [] 
buf
;

147  
numBy‹s
;

148 
	}
}

151 
	gO³nFe
::
	$Wr™eAt
(*
äom
, 
numBy‹s
, 
pos™iÚ
)

153 
feL’gth
 = 
hdr
->
	`FeL’gth
();

154 
i
, 
fœ¡SeùÜ
, 
Ï¡SeùÜ
, 
numSeùÜs
;

155 
boŞ
 
fœ¡AligÃd
, 
Ï¡AligÃd
;

156 *
buf
;

158 ià(
numBy‹s
 <= 0)

164 ià((
pos™iÚ
 + 
numBy‹s
è> 
feL’gth
)

166 
numBy‹sToEx‹ndBy
 = 
pos™iÚ
 + 
numBy‹s
 - 
feL’gth
;

167 
numSeùÜsToEx‹ndBy
 = 
	`divRoundUp
(
numBy‹sToEx‹ndBy
, 
SeùÜSize
);

168 
boŞ
 
sucûss
 = 
hdr
->
	`Ex‹ndFe
(
numSeùÜsToEx‹ndBy
);

169 ià(!
sucûss
)

171 
	`´štf
("Notƒnough disk spaceoƒxtendhe file.\n");

174 
cu¼PID
 = 
cu¼’tTh»ad
->
¥aû
->
	`g‘PCB
()->
	`g‘PID
();

175 
	`´štf
("F %d: %d -> %d\n", 
cu¼PID
, 
feL’gth
, feL’gth + (
numSeùÜsToEx‹ndBy
 * 
SeùÜSize
));

178 
feL’gth
 = 
hdr
->
	`FeL’gth
();

179 
	`ASSERT
(
pos™iÚ
 < 
feL’gth
);

180 
	`ASSERT
((
pos™iÚ
 + 
numBy‹s
è<ğ
feL’gth
);

186 
	`DEBUG
('f', "Writing %d bytes‡t %d, from file of†ength %d.\n",

187 
numBy‹s
, 
pos™iÚ
, 
feL’gth
);

189 
fœ¡SeùÜ
 = 
	`divRoundDown
(
pos™iÚ
, 
SeùÜSize
);

190 
Ï¡SeùÜ
 = 
	`divRoundDown
(
pos™iÚ
 + 
numBy‹s
 - 1, 
SeùÜSize
);

191 
numSeùÜs
 = 1 + 
Ï¡SeùÜ
 - 
fœ¡SeùÜ
;

193 
buf
 = 
Ãw
 [
numSeùÜs
 * 
SeùÜSize
];

195 
fœ¡AligÃd
 = (
pos™iÚ
 =ğ(
fœ¡SeùÜ
 * 
SeùÜSize
));

196 
Ï¡AligÃd
 = ((
pos™iÚ
 + 
numBy‹s
è=ğ((
Ï¡SeùÜ
 + 1è* 
SeùÜSize
));

199 ià(!
fœ¡AligÃd
) {

200 
	`R—dAt
(
buf
, 
SeùÜSize
, 
fœ¡SeùÜ
 * SectorSize);

202 ià(!
Ï¡AligÃd
 && ((
fœ¡SeùÜ
 !ğ
Ï¡SeùÜ
è|| 
fœ¡AligÃd
)) {

203 
	`R—dAt
(&
buf
[(
Ï¡SeùÜ
 - 
fœ¡SeùÜ
è* 
SeùÜSize
],

204 
SeùÜSize
, 
Ï¡SeùÜ
 * SectorSize);

208 
	`bcİy
(
äom
, &
buf
[
pos™iÚ
 - (
fœ¡SeùÜ
 * 
SeùÜSize
)], 
numBy‹s
);

211 
i
 = 
fœ¡SeùÜ
; i <ğ
Ï¡SeùÜ
; i++) {

212 
synchDisk
->
	`Wr™eSeùÜ
(
hdr
->
	`By‹ToSeùÜ
(
i
 * 
SeùÜSize
),

213 &
buf
[(
i
 - 
fœ¡SeùÜ
è* 
SeùÜSize
]);

215 
d–‘e
 [] 
buf
;

216  
numBy‹s
;

219 
	}
}

227 
	gO³nFe
::
	$L’gth
()

229  
hdr
->
	`FeL’gth
();

230 
	}
}

	@filesys/openfile.h

20 #iâdeà
OPENFILE_H


21 
	#OPENFILE_H


	)

23 
	~"cİyright.h
"

24 
	~"ut™y.h
"

26 #ifdeà
FILESYS_STUB


29 şas 
	cO³nFe
 {

30 
	mpublic
:

31 
	$O³nFe
(
f
è{ 
fe
 = f; 
cu¼’tOff£t
 = 0; }

32 ~
	$O³nFe
(è{ 
	`Clo£
(
fe
); 
	}
}

34 
	$R—dAt
(*
što
, 
numBy‹s
, 
pos™iÚ
) {

35 
	`L£ek
(
fe
, 
pos™iÚ
, 0);

36  
	`R—dP¬tŸl
(
fe
, 
što
, 
numBy‹s
);

37 
	}
}

38 
	$Wr™eAt
(*
äom
, 
numBy‹s
, 
pos™iÚ
) {

39 
	`L£ek
(
fe
, 
pos™iÚ
, 0);

40 
	`Wr™eFe
(
fe
, 
äom
, 
numBy‹s
);

41  
numBy‹s
;

42 
	}
}

43 
	$R—d
(*
što
, 
numBy‹s
) {

44 
numR—d
 = 
	`R—dAt
(
što
, 
numBy‹s
, 
cu¼’tOff£t
);

45 
cu¼’tOff£t
 +ğ
numR—d
;

46  
numR—d
;

47 
	}
}

48 
	$Wr™e
(*
äom
, 
numBy‹s
) {

49 
numWr™‹n
 = 
	`Wr™eAt
(
äom
, 
numBy‹s
, 
cu¼’tOff£t
);

50 
cu¼’tOff£t
 +ğ
numWr™‹n
;

51  
numWr™‹n
;

52 
	}
}

54 
	$L’gth
(è{ 
	`L£ek
(
fe
, 0, 2);  
	`T–l
(fe); 
	}
}

56 
	g´iv©e
:

57 
fe
;

58 
	gcu¼’tOff£t
;

62 
şass
 
	gFeH—d”
;

64 şas 
	cO³nFe
 {

65 
	mpublic
:

66 
O³nFe
(
£ùÜ
);

68 ~
O³nFe
();

70 
S“k
(
pos™iÚ
);

73 
R—d
(*
što
, 
numBy‹s
);

77 
Wr™e
(*
äom
, 
numBy‹s
);

79 
R—dAt
(*
što
, 
numBy‹s
, 
pos™iÚ
);

82 
Wr™eAt
(*
äom
, 
numBy‹s
, 
pos™iÚ
);

84 
L’gth
();

89 
	m´iv©e
:

90 
FeH—d”
 *
hdr
;

91 
	m£ekPos™iÚ
;

	@filesys/synchdisk.cc

17 
	~"cİyright.h
"

18 
	~"synchdisk.h
"

27 
	$DiskReque¡DÚe
 (
¬g
)

29 
SynchDisk
* 
disk
 = (SynchDisk *)
¬g
;

31 
disk
->
	`Reque¡DÚe
();

32 
	}
}

43 
	gSynchDisk
::
	$SynchDisk
(* 
Çme
)

45 
£m­hÜe
 = 
Ãw
 
	`Sem­hÜe
("synch disk", 0);

46 
lock
 = 
Ãw
 
	`Lock
("synch disk†ock");

47 
disk
 = 
Ãw
 
	`Disk
(
Çme
, 
DiskReque¡DÚe
, (è
this
);

48 
	}
}

56 
	gSynchDisk
::~
	$SynchDisk
()

58 
d–‘e
 
disk
;

59 
d–‘e
 
lock
;

60 
d–‘e
 
£m­hÜe
;

61 
	}
}

73 
	gSynchDisk
::
	$R—dSeùÜ
(
£ùÜNumb”
, * 
d©a
)

75 
lock
->
	`Acquœe
();

76 
disk
->
	`R—dReque¡
(
£ùÜNumb”
, 
d©a
);

77 
£m­hÜe
->
	`P
();

78 
lock
->
	`R–—£
();

79 
	}
}

91 
	gSynchDisk
::
	$Wr™eSeùÜ
(
£ùÜNumb”
, * 
d©a
)

93 
lock
->
	`Acquœe
();

94 
disk
->
	`Wr™eReque¡
(
£ùÜNumb”
, 
d©a
);

95 
£m­hÜe
->
	`P
();

96 
lock
->
	`R–—£
();

97 
	}
}

106 
	gSynchDisk
::
	$Reque¡DÚe
()

108 
£m­hÜe
->
	`V
();

109 
	}
}

	@filesys/synchdisk.h

9 
	~"cİyright.h
"

11 #iâdeà
SYNCHDISK_H


12 
	#SYNCHDISK_H


	)

14 
	~"disk.h
"

15 
	~"synch.h
"

27 şas 
	cSynchDisk
 {

28 
	mpublic
:

29 
SynchDisk
(* 
Çme
);

31 ~
SynchDisk
();

33 
R—dSeùÜ
(
£ùÜNumb”
, * 
d©a
);

39 
Wr™eSeùÜ
(
£ùÜNumb”
, * 
d©a
);

41 
Reque¡DÚe
();

45 
	m´iv©e
:

46 
Disk
 *
disk
;

47 
Sem­hÜe
 *
	m£m­hÜe
;

49 
Lock
 *
	mlock
;

	@machine/console.cc

16 
	~"cİyright.h
"

17 
	~"cÚsŞe.h
"

18 
	~"sy¡em.h
"

21 
	$CÚsŞeR—dPŞl
(
c
)

23 
CÚsŞe
 *
cÚsŞe
 = (CÚsŞ*)
c
;

24 
cÚsŞe
->
	`CheckCh¬Ava
();

25 
	}
}

26 
	$CÚsŞeWr™eDÚe
(
c
)

28 
CÚsŞe
 *
cÚsŞe
 = (CÚsŞ*)
c
;

29 
cÚsŞe
->
	`Wr™eDÚe
();

30 
	}
}

45 
	gCÚsŞe
::
	$CÚsŞe
(*
»adFe
, *
wr™eFe
, 
VoidFunùiÚPŒ
 
»adAva
,

46 
VoidFunùiÚPŒ
 
wr™eDÚe
, 
ÿÎArg
)

48 ià(
»adFe
 =ğ
NULL
)

49 
»adFeNo
 = 0;

51 
»adFeNo
 = 
	`O³nFÜR—dWr™e
(
»adFe
, 
TRUE
);

52 ià(
wr™eFe
 =ğ
NULL
)

53 
wr™eFeNo
 = 1;

55 
wr™eFeNo
 = 
	`O³nFÜWr™e
(
wr™eFe
);

58 
wr™eHªdËr
 = 
wr™eDÚe
;

59 
»adHªdËr
 = 
»adAva
;

60 
hªdËrArg
 = 
ÿÎArg
;

61 
putBusy
 = 
FALSE
;

62 
šcomšg
 = 
EOF
;

65 
š‹¼u±
->
	`ScheduË
(
CÚsŞeR—dPŞl
, ()
this
, 
CÚsŞeTime
, 
CÚsŞeR—dIÁ
);

66 
	}
}

73 
	gCÚsŞe
::~
	$CÚsŞe
()

75 ià(
»adFeNo
 != 0)

76 
	`Clo£
(
»adFeNo
);

77 ià(
wr™eFeNo
 != 1)

78 
	`Clo£
(
wr™eFeNo
);

79 
	}
}

93 
	gCÚsŞe
::
	$CheckCh¬Ava
()

95 
c
;

98 
š‹¼u±
->
	`ScheduË
(
CÚsŞeR—dPŞl
, ()
this
, 
CÚsŞeTime
,

99 
CÚsŞeR—dIÁ
);

102 ià((
šcomšg
 !ğ
EOF
è|| !
	`PŞlFe
(
»adFeNo
))

106 
	`R—d
(
»adFeNo
, &
c
, ());

107 
šcomšg
 = 
c
 ;

108 
¡©s
->
numCÚsŞeCh¬sR—d
++;

109 (*
»adHªdËr
)(
hªdËrArg
);

110 
	}
}

120 
	gCÚsŞe
::
	$Wr™eDÚe
()

122 
putBusy
 = 
FALSE
;

123 
¡©s
->
numCÚsŞeCh¬sWr™‹n
++;

124 (*
wr™eHªdËr
)(
hªdËrArg
);

125 
	}
}

134 
	gCÚsŞe
::
	$G‘Ch¬
()

136 
ch
 = 
šcomšg
;

138 
šcomšg
 = 
EOF
;

139  
ch
;

140 
	}
}

149 
	gCÚsŞe
::
	$PutCh¬
(
ch
)

151 
	`ASSERT
(
putBusy
 =ğ
FALSE
);

152 
	`Wr™eFe
(
wr™eFeNo
, &
ch
, ());

153 
putBusy
 = 
TRUE
;

154 
š‹¼u±
->
	`ScheduË
(
CÚsŞeWr™eDÚe
, ()
this
, 
CÚsŞeTime
,

155 
CÚsŞeWr™eIÁ
);

156 
	}
}

	@machine/console.h

23 #iâdeà
CONSOLE_H


24 
	#CONSOLE_H


	)

26 
	~"cİyright.h
"

27 
	~"ut™y.h
"

38 şas 
	cCÚsŞe
 {

39 
	mpublic
:

40 
CÚsŞe
(*
»adFe
, *
wr™eFe
, 
VoidFunùiÚPŒ
 
»adAva
,

41 
VoidFunùiÚPŒ
 
wr™eDÚe
, 
ÿÎArg
);

43 ~
CÚsŞe
();

46 
PutCh¬
(
ch
);

50 
G‘Ch¬
();

56 
Wr™eDÚe
();

57 
CheckCh¬Ava
();

59 
	m´iv©e
:

60 
»adFeNo
;

61 
	mwr™eFeNo
;

62 
VoidFunùiÚPŒ
 
	mwr™eHªdËr
;

64 
VoidFunùiÚPŒ
 
	m»adHªdËr
;

66 
	mhªdËrArg
;

68 
boŞ
 
	mputBusy
;

70 
	mšcomšg
;

	@machine/disk.cc

16 
	~"cİyright.h
"

17 
	~"disk.h
"

18 
	~"sy¡em.h
"

23 
	#MagicNumb”
 0x456789ab

	)

24 
	#MagicSize
 ()

	)

26 
	#DiskSize
 (
MagicSize
 + (
NumSeùÜs
 * 
SeùÜSize
))

	)

29 
	$DiskDÚe
(
¬g
) {

30 ((
Disk
 *)
¬g
)->
	`HªdËIÁ”ru±
();

31 
	}
}

45 
	gDisk
::
	$Disk
(* 
Çme
, 
VoidFunùiÚPŒ
 
ÿÎWh’DÚe
, 
ÿÎArg
)

47 
magicNum
;

48 
tmp
 = 0;

50 
	`DEBUG
('d', "In™Ÿlizšghdisk, 0x%x 0x%x\n", 
ÿÎWh’DÚe
, 
ÿÎArg
);

51 
hªdËr
 = 
ÿÎWh’DÚe
;

52 
hªdËrArg
 = 
ÿÎArg
;

53 
Ï¡SeùÜ
 = 0;

54 
bufãrIn™
 = 0;

56 
f’o
 = 
	`O³nFÜR—dWr™e
(
Çme
, 
FALSE
);

57 ià(
f’o
 >= 0) {

58 
	`R—d
(
f’o
, (*è&
magicNum
, 
MagicSize
);

59 
	`ASSERT
(
magicNum
 =ğ
MagicNumb”
);

61 
f’o
 = 
	`O³nFÜWr™e
(
Çme
);

62 
magicNum
 = 
MagicNumb”
;

63 
	`Wr™eFe
(
f’o
, (*è&
magicNum
, 
MagicSize
);

66 
	`L£ek
(
f’o
, 
DiskSize
 - (), 0);

67 
	`Wr™eFe
(
f’o
, (*)&
tmp
, ());

69 
aùive
 = 
FALSE
;

70 
	}
}

78 
	gDisk
::~
	$Disk
()

80 
	`Clo£
(
f’o
);

81 
	}
}

89 
	$PrštSeùÜ
 (
boŞ
 
wr™šg
, 
£ùÜ
, *
d©a
)

91 *
p
 = (*è
d©a
;

93 ià(
wr™šg
)

94 
	`´štf
("Wr™šg seùÜ: %d\n", 
£ùÜ
);

96 
	`´štf
("R—dšg seùÜ: %d\n", 
£ùÜ
);

97 
i
 = 0; i < (
SeùÜSize
/()); i++)

98 
	`´štf
("%x ", 
p
[
i
]);

99 
	`´štf
("\n");

100 
	}
}

118 
	gDisk
::
	$R—dReque¡
(
£ùÜNumb”
, * 
d©a
)

120 
ticks
 = 
	`Compu‹L©’cy
(
£ùÜNumb”
, 
FALSE
);

122 
	`ASSERT
(!
aùive
);

123 
	`ASSERT
((
£ùÜNumb”
 >ğ0è&& (£ùÜNumb” < 
NumSeùÜs
));

125 
	`DEBUG
('d', "R—dšg from seùÜ %d\n", 
£ùÜNumb”
);

126 
	`L£ek
(
f’o
, 
SeùÜSize
 * 
£ùÜNumb”
 + 
MagicSize
, 0);

127 
	`R—d
(
f’o
, 
d©a
, 
SeùÜSize
);

128 ià(
	`DebugIsEÇbËd
('d'))

129 
	`PrštSeùÜ
(
FALSE
, 
£ùÜNumb”
, 
d©a
);

131 
aùive
 = 
TRUE
;

132 
	`Upd©eLa¡
(
£ùÜNumb”
);

133 
¡©s
->
numDiskR—ds
++;

134 
š‹¼u±
->
	`ScheduË
(
DiskDÚe
, (è
this
, 
ticks
, 
DiskIÁ
);

135 
	}
}

138 
	gDisk
::
	$Wr™eReque¡
(
£ùÜNumb”
, * 
d©a
)

140 
ticks
 = 
	`Compu‹L©’cy
(
£ùÜNumb”
, 
TRUE
);

142 
	`ASSERT
(!
aùive
);

143 
	`ASSERT
((
£ùÜNumb”
 >ğ0è&& (£ùÜNumb” < 
NumSeùÜs
));

145 
	`DEBUG
('d', "Wr™šgØ£ùÜ %d\n", 
£ùÜNumb”
);

146 
	`L£ek
(
f’o
, 
SeùÜSize
 * 
£ùÜNumb”
 + 
MagicSize
, 0);

147 
	`Wr™eFe
(
f’o
, 
d©a
, 
SeùÜSize
);

148 ià(
	`DebugIsEÇbËd
('d'))

149 
	`PrštSeùÜ
(
TRUE
, 
£ùÜNumb”
, 
d©a
);

151 
aùive
 = 
TRUE
;

152 
	`Upd©eLa¡
(
£ùÜNumb”
);

153 
¡©s
->
numDiskWr™es
++;

154 
š‹¼u±
->
	`ScheduË
(
DiskDÚe
, (è
this
, 
ticks
, 
DiskIÁ
);

155 
	}
}

164 
	gDisk
::
	$HªdËIÁ”ru±
 ()

166 
aùive
 = 
FALSE
;

167 (*
hªdËr
)(
hªdËrArg
);

168 
	}
}

182 
	gDisk
::
	$TimeToS“k
(
ÃwSeùÜ
, *
rÙ©iÚ
)

184 
ÃwT¿ck
 = 
ÃwSeùÜ
 / 
SeùÜsP”T¿ck
;

185 
ŞdT¿ck
 = 
Ï¡SeùÜ
 / 
SeùÜsP”T¿ck
;

186 
£ek
 = 
	`abs
(
ÃwT¿ck
 - 
ŞdT¿ck
è* 
S“kTime
;

188 
ov”
 = (
¡©s
->
tÙ®Ticks
 + 
£ek
è% 
RÙ©iÚTime
;

192 *
rÙ©iÚ
 = 0;

193 ià(
ov”
 > 0)

194 *
rÙ©iÚ
 = 
RÙ©iÚTime
 - 
ov”
;

195  
£ek
;

196 
	}
}

205 
	gDisk
::
	$ModuloDiff
(
to
, 
äom
)

207 
toOff£t
 = 
to
 % 
SeùÜsP”T¿ck
;

208 
äomOff£t
 = 
äom
 % 
SeùÜsP”T¿ck
;

210  ((
toOff£t
 - 
äomOff£t
è+ 
SeùÜsP”T¿ck
) % SectorsPerTrack;

211 
	}
}

235 
	gDisk
::
	$Compu‹L©’cy
(
ÃwSeùÜ
, 
boŞ
 
wr™šg
)

237 
rÙ©iÚ
;

238 
£ek
 = 
	`TimeToS“k
(
ÃwSeùÜ
, &
rÙ©iÚ
);

239 
timeAá”
 = 
¡©s
->
tÙ®Ticks
 + 
£ek
 + 
rÙ©iÚ
;

241 #iâdeà
NOTRACKBUF


243 ià((
wr™šg
 =ğ
FALSE
è&& (
£ek
 == 0)

244 && (((
timeAá”
 - 
bufãrIn™
è/ 
RÙ©iÚTime
)

245 > 
	`ModuloDiff
(
ÃwSeùÜ
, 
bufãrIn™
 / 
RÙ©iÚTime
))) {

246 
	`DEBUG
('d', "Reque¡†©’cy = %d\n", 
RÙ©iÚTime
);

247  
RÙ©iÚTime
;

251 
rÙ©iÚ
 +ğ
	`ModuloDiff
(
ÃwSeùÜ
, 
timeAá”
 / 
RÙ©iÚTime
) * RotationTime;

253 
	`DEBUG
('d', "Reque¡†©’cy = %d\n", 
£ek
 + 
rÙ©iÚ
 + 
RÙ©iÚTime
);

254 (
£ek
 + 
rÙ©iÚ
 + 
RÙ©iÚTime
);

255 
	}
}

264 
	gDisk
::
	$Upd©eLa¡
(
ÃwSeùÜ
)

266 
rÙ©e
;

267 
£ek
 = 
	`TimeToS“k
(
ÃwSeùÜ
, &
rÙ©e
);

269 ià(
£ek
 != 0)

270 
bufãrIn™
 = 
¡©s
->
tÙ®Ticks
 + 
£ek
 + 
rÙ©e
;

271 
Ï¡SeùÜ
 = 
ÃwSeùÜ
;

272 
	`DEBUG
('d', "Upd©šg†a¡ seùÜ = %d, %d\n", 
Ï¡SeùÜ
, 
bufãrIn™
);

273 
	}
}

	@machine/disk.h

17 #iâdeà
DISK_H


18 
	#DISK_H


	)

20 
	~"cİyright.h
"

21 
	~"ut™y.h
"

49 
	#SeùÜSize
 128

50 
	#SeùÜsP”T¿ck
 32

51 
	#NumT¿cks
 32

52 
	#NumSeùÜs
 (
SeùÜsP”T¿ck
 * 
NumT¿cks
)

	)

55 şas 
	cDisk
 {

56 
	mpublic
:

57 
Disk
(* 
Çme
, 
VoidFunùiÚPŒ
 
ÿÎWh’DÚe
, 
ÿÎArg
);

61 ~
Disk
();

63 
R—dReque¡
(
£ùÜNumb”
, * 
d©a
);

68 
Wr™eReque¡
(
£ùÜNumb”
, * 
d©a
);

70 
HªdËIÁ”ru±
();

73 
Compu‹L©’cy
(
ÃwSeùÜ
, 
boŞ
 
wr™šg
);

78 
	m´iv©e
:

79 
f’o
;

80 
VoidFunùiÚPŒ
 
	mhªdËr
;

82 
	mhªdËrArg
;

83 
boŞ
 
	maùive
;

84 
	mÏ¡SeùÜ
;

85 
	mbufãrIn™
;

88 
TimeToS“k
(
ÃwSeùÜ
, *
rÙ©e
);

89 
ModuloDiff
(
to
, 
äom
);

90 
Upd©eLa¡
(
ÃwSeùÜ
);

	@machine/interrupt.cc

23 
	~"cİyright.h
"

24 
	~"š‹¼u±.h
"

25 
	~"sy¡em.h
"

29 *
	gštLev–Names
[] = { "off", "on"};

30 *
	gštTy³Names
[] = { "timer", "disk", "console write",

45 
	gP’dšgIÁ”ru±
::
	$P’dšgIÁ”ru±
(
VoidFunùiÚPŒ
 
func
, 
·¿m
, 
time
,

46 
IÁTy³
 
kšd
)

48 
hªdËr
 = 
func
;

49 
¬g
 = 
·¿m
;

50 
wh’
 = 
time
;

51 
ty³
 = 
kšd
;

52 
	}
}

61 
	gIÁ”ru±
::
	$IÁ”ru±
()

63 
Ëv–
 = 
IÁOff
;

64 
³ndšg
 = 
Ãw
 
	`Li¡
();

65 
šHªdËr
 = 
FALSE
;

66 
y›ldOnR‘uº
 = 
FALSE
;

67 
¡©us
 = 
Sy¡emMode
;

68 
	}
}

75 
	gIÁ”ru±
::~
	$IÁ”ru±
()

77 !
³ndšg
->
	`IsEm±y
())

78 
	`d–‘e
 ((
P’dšgIÁ”ru±
 *è
³ndšg
->
	`Remove
());

79 
d–‘e
 
³ndšg
;

80 
	}
}

98 
	gIÁ”ru±
::
	$ChªgeLev–
(
IÁStus
 
Şd
, IÁStu 
now
)

100 
Ëv–
 = 
now
;

101 
	`DEBUG
('i',"\tš‹¼u±s: % -> %s\n",
štLev–Names
[
Şd
],štLev–Names[
now
]);

102 
	}
}

115 
IÁStus


116 
	gIÁ”ru±
::
	$S‘Lev–
(
IÁStus
 
now
)

118 
IÁStus
 
Şd
 = 
Ëv–
;

120 
	`ASSERT
((
now
 =ğ
IÁOff
è|| (
šHªdËr
 =ğ
FALSE
));

124 
	`ChªgeLev–
(
Şd
, 
now
);

125 ià((
now
 =ğ
IÁOn
è&& (
Şd
 =ğ
IÁOff
))

126 
	`OÃTick
();

127  
Şd
;

128 
	}
}

137 
	gIÁ”ru±
::
	$EÇbË
()

139 (è
	`S‘Lev–
(
IÁOn
);

140 
	}
}

152 
	gIÁ”ru±
::
	$OÃTick
()

154 
MachšeStus
 
Şd
 = 
¡©us
;

157 ià(
¡©us
 =ğ
Sy¡emMode
) {

158 
¡©s
->
tÙ®Ticks
 +ğ
Sy¡emTick
;

159 
¡©s
->
sy¡emTicks
 +ğ
Sy¡emTick
;

161 
¡©s
->
tÙ®Ticks
 +ğ
U£rTick
;

162 
¡©s
->
u£rTicks
 +ğ
U£rTick
;

164 
	`DEBUG
('i', "\n=ğTick %d ==\n", 
¡©s
->
tÙ®Ticks
);

167 
	`ChªgeLev–
(
IÁOn
, 
IÁOff
);

170 
	`CheckIfDue
(
FALSE
))

172 
	`ChªgeLev–
(
IÁOff
, 
IÁOn
);

173 ià(
y›ldOnR‘uº
) {

175 
y›ldOnR‘uº
 = 
FALSE
;

176 
¡©us
 = 
Sy¡emMode
;

177 
cu¼’tTh»ad
->
	`Y›ld
();

178 
¡©us
 = 
Şd
;

180 
	}
}

194 
	gIÁ”ru±
::
	$Y›ldOnR‘uº
()

196 
	`ASSERT
(
šHªdËr
 =ğ
TRUE
);

197 
y›ldOnR‘uº
 = 
TRUE
;

198 
	}
}

212 
	gIÁ”ru±
::
	$IdË
()

214 
	`DEBUG
('i', "Machine idling; checking for interrupts.\n");

215 
¡©us
 = 
IdËMode
;

216 ià(
	`CheckIfDue
(
TRUE
)) {

217 
	`CheckIfDue
(
FALSE
))

219 
y›ldOnR‘uº
 = 
FALSE
;

221 
¡©us
 = 
Sy¡emMode
;

231 
	`DEBUG
('i', "Machine idle. No interruptso do.\n");

232 
	`DEBUG
('i', "Nohreads„eady or„unnable,‡nd‚o…ending interrupts.\n");

233 
	`DEBUG
('i', "Assuminghe…rogram completed.\n");

236 
	`H®t
();

237 
	}
}

244 
	gIÁ”ru±
::
	$H®t
()

247 
	`DEBUG
('i',"Machine halting!\n\n");

249 
	`CËªup
();

250 
	}
}

269 
	gIÁ”ru±
::
	$ScheduË
(
VoidFunùiÚPŒ
 
hªdËr
, 
¬g
, 
äomNow
, 
IÁTy³
 
ty³
)

271 
wh’
 = 
¡©s
->
tÙ®Ticks
 + 
äomNow
;

272 
P’dšgIÁ”ru±
 *
toOccur
 = 
Ãw
 
	`P’dšgIÁ”ru±
(
hªdËr
, 
¬g
, 
wh’
, 
ty³
);

274 
	`DEBUG
('i', "Scheduling interrupt handlerhe %s‡time = %d\n",

275 
štTy³Names
[
ty³
], 
wh’
);

276 
	`ASSERT
(
äomNow
 > 0);

278 
³ndšg
->
	`SÜ‹dIn£¹
(
toOccur
, 
wh’
);

279 
	}
}

294 
boŞ


295 
	gIÁ”ru±
::
	$CheckIfDue
(
boŞ
 
advªûClock
)

297 
MachšeStus
 
Şd
 = 
¡©us
;

298 
wh’
;

300 
	`ASSERT
(
Ëv–
 =ğ
IÁOff
);

302 ià(
	`DebugIsEÇbËd
('i'))

303 
	`DumpS‹
();

304 
P’dšgIÁ”ru±
 *
toOccur
 =

305 (
P’dšgIÁ”ru±
 *)
³ndšg
->
	`SÜ‹dRemove
(&
wh’
);

307 ià(
toOccur
 =ğ
NULL
)

308  
FALSE
;

310 ià(
advªûClock
 && 
wh’
 > 
¡©s
->
tÙ®Ticks
) {

311 
¡©s
->
idËTicks
 +ğ(
wh’
 - sts->
tÙ®Ticks
);

312 
¡©s
->
tÙ®Ticks
 = 
wh’
;

313 } ià(
wh’
 > 
¡©s
->
tÙ®Ticks
) {

314 
³ndšg
->
	`SÜ‹dIn£¹
(
toOccur
, 
wh’
);

315  
FALSE
;

319 ià((
¡©us
 =ğ
IdËMode
è&& (
toOccur
->
ty³
 =ğ
Tim”IÁ
)

320 && 
³ndšg
->
	`IsEm±y
()) {

321 
³ndšg
->
	`SÜ‹dIn£¹
(
toOccur
, 
wh’
);

322  
FALSE
;

325 
	`DEBUG
('i', "Invoking interrupt handler forhe %s‡time %d\n",

326 
štTy³Names
[
toOccur
->
ty³
],oOccur->
wh’
);

327 #ifdeà
USER_PROGRAM


328 ià(
machše
 !ğ
NULL
)

329 
machše
->
	`D–ayedLßd
(0, 0);

331 
šHªdËr
 = 
TRUE
;

332 
¡©us
 = 
Sy¡emMode
;

335 (*(
toOccur
->
hªdËr
))ÑoOccur->
¬g
);

336 
¡©us
 = 
Şd
;

337 
šHªdËr
 = 
FALSE
;

338 
d–‘e
 
toOccur
;

339  
TRUE
;

340 
	}
}

349 
	$PrštP’dšg
(
¬g
)

351 
P’dšgIÁ”ru±
 *
³nd
 = (P’dšgIÁ”ru± *)
¬g
;

353 
	`´štf
("Interrupt handler %s, scheduled‡t %d\n",

354 
štTy³Names
[
³nd
->
ty³
],…’d->
wh’
);

355 
	}
}

364 
	gIÁ”ru±
::
	$DumpS‹
()

366 
	`´štf
("Time: %d, iÁ”ru± %s\n", 
¡©s
->
tÙ®Ticks
,

367 
štLev–Names
[
Ëv–
]);

368 
	`´štf
("Pending interrupts:\n");

369 
	`fæush
(
¡dout
);

370 
³ndšg
->
	`M­ÿr
(
PrštP’dšg
);

371 
	`´štf
("End of…ending interrupts\n");

372 
	`fæush
(
¡dout
);

373 
	}
}

	@machine/interrupt.h

35 #iâdeà
INTERRUPT_H


36 
	#INTERRUPT_H


	)

38 
	~"cİyright.h
"

39 
	~"li¡.h
"

42 
	eIÁStus
 { 
	mIÁOff
, 
	mIÁOn
 };

47 
	eMachšeStus
 {
	mIdËMode
, 
	mSy¡emMode
, 
	mU£rMode
};

52 
	eIÁTy³
 { 
	mTim”IÁ
, 
	mDiskIÁ
, 
	mCÚsŞeWr™eIÁ
, 
	mCÚsŞeR—dIÁ
,

53 
	mN‘wÜkS’dIÁ
, 
	mN‘wÜkRecvIÁ


60 şas 
	cP’dšgIÁ”ru±
 {

61 
	mpublic
:

62 
P’dšgIÁ”ru±
(
VoidFunùiÚPŒ
 
func
, 
·¿m
, 
time
, 
IÁTy³
 
kšd
);

66 
VoidFunùiÚPŒ
 
	mhªdËr
;

68 
	m¬g
;

69 
	mwh’
;

70 
IÁTy³
 
	mty³
;

78 şas 
	cIÁ”ru±
 {

79 
	mpublic
:

80 
IÁ”ru±
();

81 ~
IÁ”ru±
();

83 
IÁStus
 
S‘Lev–
(IÁStu 
Ëv–
);

86 
EÇbË
();

87 
IÁStus
 
	$g‘Lev–
() {

88  
Ëv–
;

92 
	`IdË
();

96 
	`H®t
();

98 
	`Y›ldOnR‘uº
();

101 
MachšeStus
 
	$g‘Stus
() {

102  
¡©us
;

103 
	}
}

104 
	$£tStus
(
MachšeStus
 
¡
) {

105 
¡©us
 = 
¡
;

106 
	}
}

108 
DumpS‹
();

116 
ScheduË
(
VoidFunùiÚPŒ
 
hªdËr
,

117 
¬g
, 
wh’
, 
IÁTy³
 
ty³
);

120 
OÃTick
();

122 
	g´iv©e
:

123 
IÁStus
 
Ëv–
;

124 
Li¡
 *
	g³ndšg
;

126 
boŞ
 
	gšHªdËr
;

127 
boŞ
 
	gy›ldOnR‘uº
;

129 
MachšeStus
 
	g¡©us
;

133 
boŞ
 
CheckIfDue
(boŞ 
advªûClock
);

136 
ChªgeLev–
(
IÁStus
 
Şd
,

137 
IÁStus
 
now
);

	@machine/machine.cc

10 
	~"cİyright.h
"

11 
	~"machše.h
"

12 
	~"sy¡em.h
"

16 * 
	gexû±iÚNames
[] = { "noƒxception", "syscall",

28 
	$CheckEndŸn
()

30 
	ucheck™
 {

31 
ch¬wÜd
[4];

32 
štwÜd
;

33 } 
check
;

35 
check
.
ch¬wÜd
[0] = 1;

36 
check
.
ch¬wÜd
[1] = 2;

37 
check
.
ch¬wÜd
[2] = 3;

38 
check
.
ch¬wÜd
[3] = 4;

40 #ifdeà
HOST_IS_BIG_ENDIAN


41 
	`ASSERT
 (
check
.
štwÜd
 == 0x01020304);

43 
	`ASSERT
 (
check
.
štwÜd
 == 0x04030201);

45 
	}
}

55 
	gMachše
::
	$Machše
(
boŞ
 
debug
)

57 
i
;

59 
i
 = 0; i < 
NumTÙ®Regs
; i++)

60 
»gi¡”s
[
i
] = 0;

61 
mašMemÜy
 = 
Ãw
 [
MemÜySize
];

62 
i
 = 0; i < 
MemÜySize
; i++)

63 
mašMemÜy
[
i
] = 0;

64 #ifdeà
USE_TLB


65 
b
 = 
Ãw
 
T¿n¦©iÚEÁry
[
TLBSize
];

66 
i
 = 0; i < 
TLBSize
; i++)

67 
b
[
i
].
v®id
 = 
FALSE
;

68 
·geTabË
 = 
NULL
;

70 
b
 = 
NULL
;

71 
·geTabË
 = 
NULL
;

74 
sšgËS‹p
 = 
debug
;

75 
	`CheckEndŸn
();

76 
	}
}

83 
	gMachše
::~
	$Machše
()

85 
d–‘e
 [] 
mašMemÜy
;

86 ià(
b
 !ğ
NULL
)

87 
d–‘e
 [] 
b
;

88 
	}
}

101 
	gMachše
::
	$Rai£Exû±iÚ
(
Exû±iÚTy³
 
which
, 
badVAddr
)

103 
	`DEBUG
('m', "Exû±iÚ: %s\n", 
exû±iÚNames
[
which
]);

106 
»gi¡”s
[
BadVAddrReg
] = 
badVAddr
;

107 
	`D–ayedLßd
(0, 0);

108 
š‹¼u±
->
	`£tStus
(
Sy¡emMode
);

109 
	`Exû±iÚHªdËr
(
which
);

110 
š‹¼u±
->
	`£tStus
(
U£rMode
);

111 
	}
}

123 
	gMachše
::
	$Debugg”
()

125 *
buf
 = 
Ãw
 [80];

126 
num
;

128 
š‹¼u±
->
	`DumpS‹
();

129 
	`DumpS‹
();

130 
	`´štf
("%d> ", 
¡©s
->
tÙ®Ticks
);

131 
	`fæush
(
¡dout
);

132 
	`fg‘s
(
buf
, 80, 
¡dš
);

133 ià(
	`ssÿnf
(
buf
, "%d", &
num
) == 1)

134 
runUÁTime
 = 
num
;

136 
runUÁTime
 = 0;

137 *
buf
) {

142 
sšgËS‹p
 = 
FALSE
;

146 
	`´štf
("Machine commands:\n");

147 
	`´štf
(" <return>ƒxecute one instruction\n");

148 
	`´štf
(" <number>„un untilhe givenimerick\n");

149 
	`´štf
(" c„un until completion\n");

150 
	`´štf
(" ?…rint help message\n");

154 
d–‘e
 [] 
buf
;

155 
	}
}

164 
	gMachše
::
	$DumpS‹
()

166 
i
;

168 
	`´štf
("Machine„egisters:\n");

169 
i
 = 0; i < 
NumGPRegs
; i++)

170 
i
) {

171 
SckReg
:

172 
	`´štf
("\tSP(%d):\t0x%x%s", 
i
, 
»gi¡”s
[i],

173 ((
i
 % 4) == 3) ? "\n" : "");

176 
R‘AddrReg
:

177 
	`´štf
("\tRA(%d):\t0x%x%s", 
i
, 
»gi¡”s
[i],

178 ((
i
 % 4) == 3) ? "\n" : "");

182 
	`´štf
("\t%d:\t0x%x%s", 
i
, 
»gi¡”s
[i],

183 ((
i
 % 4) == 3) ? "\n" : "");

187 
	`´štf
("\tHi:\t0x%x", 
»gi¡”s
[
HiReg
]);

188 
	`´štf
("\tLo:\t0x%x\n", 
»gi¡”s
[
LoReg
]);

189 
	`´štf
("\tPC:\t0x%x", 
»gi¡”s
[
PCReg
]);

190 
	`´štf
("\tNextPC:\t0x%x", 
»gi¡”s
[
NextPCReg
]);

191 
	`´štf
("\tP»vPC:\t0x%x\n", 
»gi¡”s
[
P»vPCReg
]);

192 
	`´štf
("\tLßd:\t0x%x", 
»gi¡”s
[
LßdReg
]);

193 
	`´štf
("\tLßdV:\t0x%x\n", 
»gi¡”s
[
LßdV®ueReg
]);

194 
	`´štf
("\n");

195 
	}
}

202 
	gMachše
::
	$R—dRegi¡”
(
num
)

204 
	`ASSERT
((
num
 >ğ0è&& (num < 
NumTÙ®Regs
));

205  
»gi¡”s
[
num
];

206 
	}
}

208 
	gMachše
::
	$Wr™eRegi¡”
(
num
, 
v®ue
)

210 
	`ASSERT
((
num
 >ğ0è&& (num < 
NumTÙ®Regs
));

212 
»gi¡”s
[
num
] = 
v®ue
;

213 
	}
}

	@machine/machine.h

21 #iâdeà
MACHINE_H


22 
	#MACHINE_H


	)

24 
	~"cİyright.h
"

25 
	~"ut™y.h
"

26 
	~"Œª¦©e.h
"

27 
	~"disk.h
"

31 
	#PageSize
 
SeùÜSize


34 

	)

35 
	#NumPhysPages
 64

	)

36 
	#MemÜySize
 (
NumPhysPages
 * 
PageSize
)

	)

37 
	#TLBSize
 4

38 

	)

39 
	eExû±iÚTy³
 { 
	mNoExû±iÚ
,

40 
	mSysÿÎExû±iÚ
,

41 
	mPageFauÉExû±iÚ
,

42 
	mR—dOÆyExû±iÚ
,

44 
	mBusE¼ÜExû±iÚ
,

46 
	mAdd»ssE¼ÜExû±iÚ
,

49 
	mOv”æowExû±iÚ
,

50 
	mIÎeg®In¡rExû±iÚ
,

52 
	mNumExû±iÚTy³s


60 
	#SckReg
 29

61 
	#R‘AddrReg
 31

62 
	#NumGPRegs
 32

63 
	#HiReg
 32

64 
	#LoReg
 33

	)

65 
	#PCReg
 34

66 
	#NextPCReg
 35

67 
	#P»vPCReg
 36

68 
	#LßdReg
 37

69 
	#LßdV®ueReg
 38

70 
	#BadVAddrReg
 39

71 

	)

72 
	#NumTÙ®Regs
 40

	)

81 şas 
	cIn¡ruùiÚ
 {

82 
	mpublic
:

83 
Decode
();

85 
	mv®ue
;

87 
	mİCode
;

89 
	mrs
, 
	m¹
, 
	mrd
;

90 
	mexŒa
;

107 şas 
	cMachše
 {

108 
	mpublic
:

109 
Machše
(
boŞ
 
debug
);

111 ~
Machše
();

114 
Run
();

116 
R—dRegi¡”
(
num
);

118 
Wr™eRegi¡”
(
num
, 
v®ue
);

124 
OÃIn¡ruùiÚ
(
In¡ruùiÚ
 *
š¡r
);

126 
D–ayedLßd
(
ÃxtReg
, 
ÃxtV®
);

129 
boŞ
 
R—dMem
(
addr
, 
size
, * 
v®ue
);

130 
boŞ
 
Wr™eMem
(
addr
, 
size
, 
v®ue
);

135 
Exû±iÚTy³
 
T¿n¦©e
(
vœtAddr
, * 
physAddr
, 
size
,
boŞ
 
wr™šg
);

142 
Rai£Exû±iÚ
(
Exû±iÚTy³
 
which
, 
badVAddr
);

146 
Debugg”
();

147 
DumpS‹
();

156 *
	mmašMemÜy
;

158 
	m»gi¡”s
[
NumTÙ®Regs
];

179 
T¿n¦©iÚEÁry
 *
	mb
;

182 
T¿n¦©iÚEÁry
 *
	m·geTabË
;

183 
	m·geTabËSize
;

185 
	m´iv©e
:

186 
boŞ
 
sšgËS‹p
;

188 
	mrunUÁTime
;

192 
Exû±iÚHªdËr
(
Exû±iÚTy³
 
which
);

209 
WÜdToHo¡
(
wÜd
);

210 
ShÜtToHo¡
(
shÜtwÜd
);

211 
WÜdToMachše
(
wÜd
);

212 
ShÜtToMachše
(
shÜtwÜd
);

	@machine/mipssim.cc

13 
	~"cİyright.h
"

15 
	~"machše.h
"

16 
	~"mssim.h
"

17 
	~"sy¡em.h
"

19 
MuÉ
(
a
, 
b
, 
boŞ
 
sigÃdAr™h
, * 
hiPŒ
, * 
loPŒ
);

31 
	gMachše
::
	$Run
()

33 
In¡ruùiÚ
 *
š¡r
 = 
Ãw
 Instruction;

35 if(
	`DebugIsEÇbËd
('m'))

36 
	`´štf
("Startinghread \"%s\"‡time %d\n",

37 
cu¼’tTh»ad
->
	`g‘Name
(), 
¡©s
->
tÙ®Ticks
);

38 
š‹¼u±
->
	`£tStus
(
U£rMode
);

40 
	`OÃIn¡ruùiÚ
(
š¡r
);

41 
š‹¼u±
->
	`OÃTick
();

42 ià(
sšgËS‹p
 && (
runUÁTime
 <ğ
¡©s
->
tÙ®Ticks
))

43 
	`Debugg”
();

45 
	}
}

54 
	$Ty³ToReg
(
RegTy³
 
»g
, 
In¡ruùiÚ
 *
š¡r
)

56 
»g
) {

57 
RS
:

58  
š¡r
->
rs
;

59 
RT
:

60  
š¡r
->
¹
;

61 
RD
:

62  
š¡r
->
rd
;

63 
EXTRA
:

64  
š¡r
->
exŒa
;

68 
	}
}

94 
	gMachše
::
	$OÃIn¡ruùiÚ
(
In¡ruùiÚ
 *
š¡r
)

96 
¿w
;

97 
ÃxtLßdReg
 = 0;

98 
ÃxtLßdV®ue
 = 0;

102 ià(!
machše
->
	`R—dMem
(
»gi¡”s
[
PCReg
], 4, &
¿w
))

104 
š¡r
->
v®ue
 = 
¿w
;

105 
š¡r
->
	`Decode
();

107 ià(
	`DebugIsEÇbËd
('m')) {

108 
OpSŒšg
 *
¡r
 = &
İSŒšgs
[
š¡r
->
İCode
];

110 
	`ASSERT
(
š¡r
->
İCode
 <ğ
MaxOpcode
);

111 
	`´štf
("AˆPC = 0x%x: ", 
»gi¡”s
[
PCReg
]);

112 
	`´štf
(
¡r
->
¡ršg
, 
	`Ty³ToReg
(¡r->
¬gs
[0], 
š¡r
),

113 
	`Ty³ToReg
(
¡r
->
¬gs
[1], 
š¡r
), TypeToReg(str->args[2], instr));

114 
	`´štf
("\n");

118 
pcAá”
 = 
»gi¡”s
[
NextPCReg
] + 4;

119 
sum
, 
diff
, 
tmp
, 
v®ue
;

120 
rs
, 
¹
, 
imm
;

123 
š¡r
->
İCode
) {

125 
OP_ADD
:

126 
sum
 = 
»gi¡”s
[
š¡r
->
rs
] +„egi¡”s[š¡r->
¹
];

127 ià(!((
»gi¡”s
[
š¡r
->
rs
] ^„egi¡”s[š¡r->
¹
]è& 
SIGN_BIT
) &&

128 ((
»gi¡”s
[
š¡r
->
rs
] ^ 
sum
è& 
SIGN_BIT
)) {

129 
	`Rai£Exû±iÚ
(
Ov”æowExû±iÚ
, 0);

132 
»gi¡”s
[
š¡r
->
rd
] = 
sum
;

135 
OP_ADDI
:

136 
sum
 = 
»gi¡”s
[
š¡r
->
rs
] + in¡r->
exŒa
;

137 ià(!((
»gi¡”s
[
š¡r
->
rs
] ^ in¡r->
exŒa
è& 
SIGN_BIT
) &&

138 ((
š¡r
->
exŒa
 ^ 
sum
è& 
SIGN_BIT
)) {

139 
	`Rai£Exû±iÚ
(
Ov”æowExû±iÚ
, 0);

142 
»gi¡”s
[
š¡r
->
¹
] = 
sum
;

145 
OP_ADDIU
:

146 
»gi¡”s
[
š¡r
->
¹
] =„egi¡”s[š¡r->
rs
] + in¡r->
exŒa
;

149 
OP_ADDU
:

150 
»gi¡”s
[
š¡r
->
rd
] =„egi¡”s[š¡r->
rs
] +„egi¡”s[š¡r->
¹
];

153 
OP_AND
:

154 
»gi¡”s
[
š¡r
->
rd
] =„egi¡”s[š¡r->
rs
] &„egi¡”s[š¡r->
¹
];

157 
OP_ANDI
:

158 
»gi¡”s
[
š¡r
->
¹
] =„egi¡”s[š¡r->
rs
] & (š¡r->
exŒa
 & 0xffff);

161 
OP_BEQ
:

162 ià(
»gi¡”s
[
š¡r
->
rs
] =ğ»gi¡”s[š¡r->
¹
])

163 
pcAá”
 = 
»gi¡”s
[
NextPCReg
] + 
	`IndexToAddr
(
š¡r
->
exŒa
);

166 
OP_BGEZAL
:

167 
»gi¡”s
[
R31
] =„egi¡”s[
NextPCReg
] + 4;

168 
OP_BGEZ
:

169 ià(!(
»gi¡”s
[
š¡r
->
rs
] & 
SIGN_BIT
))

170 
pcAá”
 = 
»gi¡”s
[
NextPCReg
] + 
	`IndexToAddr
(
š¡r
->
exŒa
);

173 
OP_BGTZ
:

174 ià(
»gi¡”s
[
š¡r
->
rs
] > 0)

175 
pcAá”
 = 
»gi¡”s
[
NextPCReg
] + 
	`IndexToAddr
(
š¡r
->
exŒa
);

178 
OP_BLEZ
:

179 ià(
»gi¡”s
[
š¡r
->
rs
] <= 0)

180 
pcAá”
 = 
»gi¡”s
[
NextPCReg
] + 
	`IndexToAddr
(
š¡r
->
exŒa
);

183 
OP_BLTZAL
:

184 
»gi¡”s
[
R31
] =„egi¡”s[
NextPCReg
] + 4;

185 
OP_BLTZ
:

186 ià(
»gi¡”s
[
š¡r
->
rs
] & 
SIGN_BIT
)

187 
pcAá”
 = 
»gi¡”s
[
NextPCReg
] + 
	`IndexToAddr
(
š¡r
->
exŒa
);

190 
OP_BNE
:

191 ià(
»gi¡”s
[
š¡r
->
rs
] !ğ»gi¡”s[š¡r->
¹
])

192 
pcAá”
 = 
»gi¡”s
[
NextPCReg
] + 
	`IndexToAddr
(
š¡r
->
exŒa
);

195 
OP_DIV
:

196 ià(
»gi¡”s
[
š¡r
->
¹
] == 0) {

197 
»gi¡”s
[
LoReg
] = 0;

198 
»gi¡”s
[
HiReg
] = 0;

200 
»gi¡”s
[
LoReg
] =„egi¡”s[
š¡r
->
rs
] /„egi¡”s[š¡r->
¹
];

201 
»gi¡”s
[
HiReg
] =„egi¡”s[
š¡r
->
rs
] %„egi¡”s[š¡r->
¹
];

205 
OP_DIVU
:

206 
rs
 = (è
»gi¡”s
[
š¡r
->rs];

207 
¹
 = (è
»gi¡”s
[
š¡r
->rt];

208 ià(
¹
 == 0) {

209 
»gi¡”s
[
LoReg
] = 0;

210 
»gi¡”s
[
HiReg
] = 0;

212 
tmp
 = 
rs
 / 
¹
;

213 
»gi¡”s
[
LoReg
] = (è
tmp
;

214 
tmp
 = 
rs
 % 
¹
;

215 
»gi¡”s
[
HiReg
] = (è
tmp
;

219 
OP_JAL
:

220 
»gi¡”s
[
R31
] =„egi¡”s[
NextPCReg
] + 4;

221 
OP_J
:

222 
pcAá”
 = (pcAá” & 0xf0000000è| 
	`IndexToAddr
(
š¡r
->
exŒa
);

225 
OP_JALR
:

226 
»gi¡”s
[
š¡r
->
rd
] =„egi¡”s[
NextPCReg
] + 4;

227 
OP_JR
:

228 
pcAá”
 = 
»gi¡”s
[
š¡r
->
rs
];

231 
OP_LB
:

232 
OP_LBU
:

233 
tmp
 = 
»gi¡”s
[
š¡r
->
rs
] + in¡r->
exŒa
;

234 ià(!
machše
->
	`R—dMem
(
tmp
, 1, &
v®ue
))

237 ià((
v®ue
 & 0x80è&& (
š¡r
->
İCode
 =ğ
OP_LB
))

238 
v®ue
 |= 0xffffff00;

240 
v®ue
 &= 0xff;

241 
ÃxtLßdReg
 = 
š¡r
->
¹
;

242 
ÃxtLßdV®ue
 = 
v®ue
;

245 
OP_LH
:

246 
OP_LHU
:

247 
tmp
 = 
»gi¡”s
[
š¡r
->
rs
] + in¡r->
exŒa
;

248 ià(
tmp
 & 0x1) {

249 
	`Rai£Exû±iÚ
(
Add»ssE¼ÜExû±iÚ
, 
tmp
);

252 ià(!
machše
->
	`R—dMem
(
tmp
, 2, &
v®ue
))

255 ià((
v®ue
 & 0x8000è&& (
š¡r
->
İCode
 =ğ
OP_LH
))

256 
v®ue
 |= 0xffff0000;

258 
v®ue
 &= 0xffff;

259 
ÃxtLßdReg
 = 
š¡r
->
¹
;

260 
ÃxtLßdV®ue
 = 
v®ue
;

263 
OP_LUI
:

264 
	`DEBUG
('m', "Executšg: LUI„%d,%d\n", 
š¡r
->
¹
, in¡r->
exŒa
);

265 
»gi¡”s
[
š¡r
->
¹
] = in¡r->
exŒa
 << 16;

268 
OP_LW
:

269 
tmp
 = 
»gi¡”s
[
š¡r
->
rs
] + in¡r->
exŒa
;

270 ià(
tmp
 & 0x3) {

271 
	`Rai£Exû±iÚ
(
Add»ssE¼ÜExû±iÚ
, 
tmp
);

274 ià(!
machše
->
	`R—dMem
(
tmp
, 4, &
v®ue
))

276 
ÃxtLßdReg
 = 
š¡r
->
¹
;

277 
ÃxtLßdV®ue
 = 
v®ue
;

280 
OP_LWL
:

281 
tmp
 = 
»gi¡”s
[
š¡r
->
rs
] + in¡r->
exŒa
;

286 
	`ASSERT
((
tmp
 & 0x3) == 0);

288 ià(!
machše
->
	`R—dMem
(
tmp
, 4, &
v®ue
))

290 ià(
»gi¡”s
[
LßdReg
] =ğ
š¡r
->
¹
)

291 
ÃxtLßdV®ue
 = 
»gi¡”s
[
LßdV®ueReg
];

293 
ÃxtLßdV®ue
 = 
»gi¡”s
[
š¡r
->
¹
];

294 
tmp
 & 0x3) {

296 
ÃxtLßdV®ue
 = 
v®ue
;

299 
ÃxtLßdV®ue
 = (ÃxtLßdV®u& 0xffè| (
v®ue
 << 8);

302 
ÃxtLßdV®ue
 = (ÃxtLßdV®u& 0xffffè| (
v®ue
 << 16);

305 
ÃxtLßdV®ue
 = (ÃxtLßdV®u& 0xffffffè| (
v®ue
 << 24);

308 
ÃxtLßdReg
 = 
š¡r
->
¹
;

311 
OP_LWR
:

312 
tmp
 = 
»gi¡”s
[
š¡r
->
rs
] + in¡r->
exŒa
;

317 
	`ASSERT
((
tmp
 & 0x3) == 0);

319 ià(!
machše
->
	`R—dMem
(
tmp
, 4, &
v®ue
))

321 ià(
»gi¡”s
[
LßdReg
] =ğ
š¡r
->
¹
)

322 
ÃxtLßdV®ue
 = 
»gi¡”s
[
LßdV®ueReg
];

324 
ÃxtLßdV®ue
 = 
»gi¡”s
[
š¡r
->
¹
];

325 
tmp
 & 0x3) {

327 
ÃxtLßdV®ue
 = (nextLoadValue & 0xffffff00) |

328 ((
v®ue
 >> 24) & 0xff);

331 
ÃxtLßdV®ue
 = (nextLoadValue & 0xffff0000) |

332 ((
v®ue
 >> 16) & 0xffff);

335 
ÃxtLßdV®ue
 = (nextLoadValue & 0xff000000)

336 | ((
v®ue
 >> 8) & 0xffffff);

339 
ÃxtLßdV®ue
 = 
v®ue
;

342 
ÃxtLßdReg
 = 
š¡r
->
¹
;

345 
OP_MFHI
:

346 
»gi¡”s
[
š¡r
->
rd
] =„egi¡”s[
HiReg
];

349 
OP_MFLO
:

350 
»gi¡”s
[
š¡r
->
rd
] =„egi¡”s[
LoReg
];

353 
OP_MTHI
:

354 
»gi¡”s
[
HiReg
] =„egi¡”s[
š¡r
->
rs
];

357 
OP_MTLO
:

358 
»gi¡”s
[
LoReg
] =„egi¡”s[
š¡r
->
rs
];

361 
OP_MULT
:

362 
	`MuÉ
(
»gi¡”s
[
š¡r
->
rs
],„egi¡”s[š¡r->
¹
], 
TRUE
,

363 &
»gi¡”s
[
HiReg
], &»gi¡”s[
LoReg
]);

366 
OP_MULTU
:

367 
	`MuÉ
(
»gi¡”s
[
š¡r
->
rs
],„egi¡”s[š¡r->
¹
], 
FALSE
,

368 &
»gi¡”s
[
HiReg
], &»gi¡”s[
LoReg
]);

371 
OP_NOR
:

372 
»gi¡”s
[
š¡r
->
rd
] = ~Ôegi¡”s[š¡r->
rs
] |„egi¡”s[š¡r->
¹
]);

375 
OP_OR
:

376 
»gi¡”s
[
š¡r
->
rd
] =„egi¡”s[š¡r->
rs
] |„egisters[instr->rs];

379 
OP_ORI
:

380 
»gi¡”s
[
š¡r
->
¹
] =„egi¡”s[š¡r->
rs
] | (š¡r->
exŒa
 & 0xffff);

383 
OP_SB
:

384 ià(!
machše
->
	`Wr™eMem
(()

385 (
»gi¡”s
[
š¡r
->
rs
] + in¡r->
exŒa
), 1,„egi¡”s[š¡r->
¹
]))

389 
OP_SH
:

390 ià(!
machše
->
	`Wr™eMem
(()

391 (
»gi¡”s
[
š¡r
->
rs
] + in¡r->
exŒa
), 2,„egi¡”s[š¡r->
¹
]))

395 
OP_SLL
:

396 
»gi¡”s
[
š¡r
->
rd
] =„egi¡”s[š¡r->
¹
] << in¡r->
exŒa
;

399 
OP_SLLV
:

400 
»gi¡”s
[
š¡r
->
rd
] =„egi¡”s[š¡r->
¹
] <<

401 (
»gi¡”s
[
š¡r
->
rs
] & 0x1f);

404 
OP_SLT
:

405 ià(
»gi¡”s
[
š¡r
->
rs
] <„egi¡”s[š¡r->
¹
])

406 
»gi¡”s
[
š¡r
->
rd
] = 1;

408 
»gi¡”s
[
š¡r
->
rd
] = 0;

411 
OP_SLTI
:

412 ià(
»gi¡”s
[
š¡r
->
rs
] < in¡r->
exŒa
)

413 
»gi¡”s
[
š¡r
->
¹
] = 1;

415 
»gi¡”s
[
š¡r
->
¹
] = 0;

418 
OP_SLTIU
:

419 
rs
 = 
»gi¡”s
[
š¡r
->rs];

420 
imm
 = 
š¡r
->
exŒa
;

421 ià(
rs
 < 
imm
)

422 
»gi¡”s
[
š¡r
->
¹
] = 1;

424 
»gi¡”s
[
š¡r
->
¹
] = 0;

427 
OP_SLTU
:

428 
rs
 = 
»gi¡”s
[
š¡r
->rs];

429 
¹
 = 
»gi¡”s
[
š¡r
->rt];

430 ià(
rs
 < 
¹
)

431 
»gi¡”s
[
š¡r
->
rd
] = 1;

433 
»gi¡”s
[
š¡r
->
rd
] = 0;

436 
OP_SRA
:

437 
»gi¡”s
[
š¡r
->
rd
] =„egi¡”s[š¡r->
¹
] >> in¡r->
exŒa
;

440 
OP_SRAV
:

441 
»gi¡”s
[
š¡r
->
rd
] =„egi¡”s[š¡r->
¹
] >>

442 (
»gi¡”s
[
š¡r
->
rs
] & 0x1f);

445 
OP_SRL
:

446 
tmp
 = 
»gi¡”s
[
š¡r
->
¹
];

447 
tmp
 >>ğ
š¡r
->
exŒa
;

448 
»gi¡”s
[
š¡r
->
rd
] = 
tmp
;

451 
OP_SRLV
:

452 
tmp
 = 
»gi¡”s
[
š¡r
->
¹
];

453 
tmp
 >>ğ(
»gi¡”s
[
š¡r
->
rs
] & 0x1f);

454 
»gi¡”s
[
š¡r
->
rd
] = 
tmp
;

457 
OP_SUB
:

458 
diff
 = 
»gi¡”s
[
š¡r
->
rs
] -„egi¡”s[š¡r->
¹
];

459 ià(((
»gi¡”s
[
š¡r
->
rs
] ^„egi¡”s[š¡r->
¹
]è& 
SIGN_BIT
) &&

460 ((
»gi¡”s
[
š¡r
->
rs
] ^ 
diff
è& 
SIGN_BIT
)) {

461 
	`Rai£Exû±iÚ
(
Ov”æowExû±iÚ
, 0);

464 
»gi¡”s
[
š¡r
->
rd
] = 
diff
;

467 
OP_SUBU
:

468 
»gi¡”s
[
š¡r
->
rd
] =„egi¡”s[š¡r->
rs
] -„egi¡”s[š¡r->
¹
];

471 
OP_SW
:

472 ià(!
machše
->
	`Wr™eMem
(()

473 (
»gi¡”s
[
š¡r
->
rs
] + in¡r->
exŒa
), 4,„egi¡”s[š¡r->
¹
]))

477 
OP_SWL
:

478 
tmp
 = 
»gi¡”s
[
š¡r
->
rs
] + in¡r->
exŒa
;

482 
	`ASSERT
((
tmp
 & 0x3) == 0);

484 ià(!
machše
->
	`R—dMem
((
tmp
 & ~0x3), 4, &
v®ue
))

486 
tmp
 & 0x3) {

488 
v®ue
 = 
»gi¡”s
[
š¡r
->
¹
];

491 
v®ue
 = (v®u& 0xff000000è| ((
»gi¡”s
[
š¡r
->
¹
] >> 8) &

495 
v®ue
 = (v®u& 0xffff0000è| ((
»gi¡”s
[
š¡r
->
¹
] >> 16) &

499 
v®ue
 = (v®u& 0xffffff00è| ((
»gi¡”s
[
š¡r
->
¹
] >> 24) &

503 ià(!
machše
->
	`Wr™eMem
((
tmp
 & ~0x3), 4, 
v®ue
))

507 
OP_SWR
:

508 
tmp
 = 
»gi¡”s
[
š¡r
->
rs
] + in¡r->
exŒa
;

512 
	`ASSERT
((
tmp
 & 0x3) == 0);

514 ià(!
machše
->
	`R—dMem
((
tmp
 & ~0x3), 4, &
v®ue
))

516 
tmp
 & 0x3) {

518 
v®ue
 = (v®u& 0xffffffè| (
»gi¡”s
[
š¡r
->
¹
] << 24);

521 
v®ue
 = (v®u& 0xffffè| (
»gi¡”s
[
š¡r
->
¹
] << 16);

524 
v®ue
 = (v®u& 0xffè| (
»gi¡”s
[
š¡r
->
¹
] << 8);

527 
v®ue
 = 
»gi¡”s
[
š¡r
->
¹
];

530 ià(!
machše
->
	`Wr™eMem
((
tmp
 & ~0x3), 4, 
v®ue
))

534 
OP_SYSCALL
:

535 
	`Rai£Exû±iÚ
(
SysÿÎExû±iÚ
, 0);

538 
OP_XOR
:

539 
»gi¡”s
[
š¡r
->
rd
] =„egi¡”s[š¡r->
rs
] ^„egi¡”s[š¡r->
¹
];

542 
OP_XORI
:

543 
»gi¡”s
[
š¡r
->
¹
] =„egi¡”s[š¡r->
rs
] ^ (š¡r->
exŒa
 & 0xffff);

546 
OP_RES
:

547 
OP_UNIMP
:

548 
	`Rai£Exû±iÚ
(
IÎeg®In¡rExû±iÚ
, 0);

552 
	`ASSERT
(
FALSE
);

558 
	`D–ayedLßd
(
ÃxtLßdReg
, 
ÃxtLßdV®ue
);

561 
»gi¡”s
[
P»vPCReg
] =„egi¡”s[
PCReg
];

563 
»gi¡”s
[
PCReg
] =„egi¡”s[
NextPCReg
];

564 
»gi¡”s
[
NextPCReg
] = 
pcAá”
;

565 
	}
}

576 
	gMachše
::
	$D–ayedLßd
(
ÃxtReg
, 
ÃxtV®ue
)

578 
»gi¡”s
[»gi¡”s[
LßdReg
]] =„egi¡”s[
LßdV®ueReg
];

579 
»gi¡”s
[
LßdReg
] = 
ÃxtReg
;

580 
»gi¡”s
[
LßdV®ueReg
] = 
ÃxtV®ue
;

581 
»gi¡”s
[0] = 0;

582 
	}
}

590 
	gIn¡ruùiÚ
::
	$Decode
()

592 
OpInfo
 *
İPŒ
;

594 
rs
 = (
v®ue
 >> 21) & 0x1f;

595 
¹
 = (
v®ue
 >> 16) & 0x1f;

596 
rd
 = (
v®ue
 >> 11) & 0x1f;

597 
İPŒ
 = &
İTabË
[(
v®ue
 >> 26) & 0x3f];

598 
İCode
 = 
İPŒ
->opCode;

599 ià(
İPŒ
->
fÜm©
 =ğ
IFMT
) {

600 
exŒa
 = 
v®ue
 & 0xffff;

601 ià(
exŒa
 & 0x8000) {

602 
exŒa
 |= 0xffff0000;

604 } ià(
İPŒ
->
fÜm©
 =ğ
RFMT
) {

605 
exŒa
 = (
v®ue
 >> 6) & 0x1f;

607 
exŒa
 = 
v®ue
 & 0x3ffffff;

609 ià(
İCode
 =ğ
SPECIAL
) {

610 
İCode
 = 
¥ecŸlTabË
[
v®ue
 & 0x3f];

611 } ià(
İCode
 =ğ
BCOND
) {

612 
i
 = 
v®ue
 & 0x1f0000;

614 ià(
i
 == 0) {

615 
İCode
 = 
OP_BLTZ
;

616 } ià(
i
 == 0x10000) {

617 
İCode
 = 
OP_BGEZ
;

618 } ià(
i
 == 0x100000) {

619 
İCode
 = 
OP_BLTZAL
;

620 } ià(
i
 == 0x110000) {

621 
İCode
 = 
OP_BGEZAL
;

623 
İCode
 = 
OP_UNIMP
;

626 
	}
}

636 
	$MuÉ
(
a
, 
b
, 
boŞ
 
sigÃdAr™h
, * 
hiPŒ
, * 
loPŒ
)

638 ià((
a
 =ğ0è|| (
b
 == 0)) {

639 *
hiPŒ
 = *
loPŒ
 = 0;

645 
boŞ
 
Ãg©ive
 = 
FALSE
;

646 ià(
sigÃdAr™h
) {

647 ià(
a
 < 0) {

648 
Ãg©ive
 = !negative;

649 
a
 = -a;

651 ià(
b
 < 0) {

652 
Ãg©ive
 = !negative;

653 
b
 = -b;

659 
bLo
 = 
b
;

660 
bHi
 = 0;

661 
lo
 = 0;

662 
hi
 = 0;

663 
i
 = 0; i < 32; i++) {

664 ià(
a
 & 1) {

665 
lo
 +ğ
bLo
;

666 ià(
lo
 < 
bLo
)

667 
hi
 += 1;

668 
hi
 +ğ
bHi
;

669 ià((
a
 & 0xfffffffe) == 0)

672 
bHi
 <<= 1;

673 ià(
bLo
 & 0x80000000)

674 
bHi
 |= 1;

676 
bLo
 <<= 1;

677 
a
 >>= 1;

682 ià(
Ãg©ive
) {

683 
hi
 = ~hi;

684 
lo
 = ~lo;

685 
lo
++;

686 ià(
lo
 == 0)

687 
hi
++;

690 *
hiPŒ
 = (è
hi
;

691 *
loPŒ
 = (è
lo
;

692 
	}
}

	@machine/mipssim.h

10 #iâdeà
MIPSSIM_H


11 
	#MIPSSIM_H


	)

13 
	~"cİyright.h
"

25 
	#OP_ADD
 1

	)

26 
	#OP_ADDI
 2

	)

27 
	#OP_ADDIU
 3

	)

28 
	#OP_ADDU
 4

	)

29 
	#OP_AND
 5

	)

30 
	#OP_ANDI
 6

	)

31 
	#OP_BEQ
 7

	)

32 
	#OP_BGEZ
 8

	)

33 
	#OP_BGEZAL
 9

	)

34 
	#OP_BGTZ
 10

	)

35 
	#OP_BLEZ
 11

	)

36 
	#OP_BLTZ
 12

	)

37 
	#OP_BLTZAL
 13

	)

38 
	#OP_BNE
 14

	)

40 
	#OP_DIV
 16

	)

41 
	#OP_DIVU
 17

	)

42 
	#OP_J
 18

	)

43 
	#OP_JAL
 19

	)

44 
	#OP_JALR
 20

	)

45 
	#OP_JR
 21

	)

46 
	#OP_LB
 22

	)

47 
	#OP_LBU
 23

	)

48 
	#OP_LH
 24

	)

49 
	#OP_LHU
 25

	)

50 
	#OP_LUI
 26

	)

51 
	#OP_LW
 27

	)

52 
	#OP_LWL
 28

	)

53 
	#OP_LWR
 29

	)

55 
	#OP_MFHI
 31

	)

56 
	#OP_MFLO
 32

	)

58 
	#OP_MTHI
 34

	)

59 
	#OP_MTLO
 35

	)

60 
	#OP_MULT
 36

	)

61 
	#OP_MULTU
 37

	)

62 
	#OP_NOR
 38

	)

63 
	#OP_OR
 39

	)

64 
	#OP_ORI
 40

	)

65 
	#OP_RFE
 41

	)

66 
	#OP_SB
 42

	)

67 
	#OP_SH
 43

	)

68 
	#OP_SLL
 44

	)

69 
	#OP_SLLV
 45

	)

70 
	#OP_SLT
 46

	)

71 
	#OP_SLTI
 47

	)

72 
	#OP_SLTIU
 48

	)

73 
	#OP_SLTU
 49

	)

74 
	#OP_SRA
 50

	)

75 
	#OP_SRAV
 51

	)

76 
	#OP_SRL
 52

	)

77 
	#OP_SRLV
 53

	)

78 
	#OP_SUB
 54

	)

79 
	#OP_SUBU
 55

	)

80 
	#OP_SW
 56

	)

81 
	#OP_SWL
 57

	)

82 
	#OP_SWR
 58

	)

83 
	#OP_XOR
 59

	)

84 
	#OP_XORI
 60

	)

85 
	#OP_SYSCALL
 61

	)

86 
	#OP_UNIMP
 62

	)

87 
	#OP_RES
 63

	)

88 
	#MaxOpcode
 63

	)

94 
	#IndexToAddr
(
x
è((xè<< 2)

	)

96 
	#SIGN_BIT
 0x80000000

	)

97 
	#R31
 31

	)

105 
	#SPECIAL
 100

	)

106 
	#BCOND
 101

	)

108 
	#IFMT
 1

	)

109 
	#JFMT
 2

	)

110 
	#RFMT
 3

	)

112 
	sOpInfo
 {

113 
	mİCode
;

114 
	mfÜm©
;

117 
OpInfo
 
	gİTabË
[] = {

118 {
SPECIAL
, 
RFMT
}, {
BCOND
, 
IFMT
}, {
OP_J
, 
JFMT
}, {
OP_JAL
, JFMT},

119 {
OP_BEQ
, 
IFMT
}, {
OP_BNE
, IFMT}, {
OP_BLEZ
, IFMT}, {
OP_BGTZ
, IFMT},

120 {
OP_ADDI
, 
IFMT
}, {
OP_ADDIU
, IFMT}, {
OP_SLTI
, IFMT}, {
OP_SLTIU
, IFMT},

121 {
OP_ANDI
, 
IFMT
}, {
OP_ORI
, IFMT}, {
OP_XORI
, IFMT}, {
OP_LUI
, IFMT},

122 {
OP_UNIMP
, 
IFMT
}, {OP_UNIMP, IFMT}, {OP_UNIMP, IFMT}, {OP_UNIMP, IFMT},

123 {
OP_RES
, 
IFMT
}, {OP_RES, IFMT}, {OP_RES, IFMT}, {OP_RES, IFMT},

124 {
OP_RES
, 
IFMT
}, {OP_RES, IFMT}, {OP_RES, IFMT}, {OP_RES, IFMT},

125 {
OP_RES
, 
IFMT
}, {OP_RES, IFMT}, {OP_RES, IFMT}, {OP_RES, IFMT},

126 {
OP_LB
, 
IFMT
}, {
OP_LH
, IFMT}, {
OP_LWL
, IFMT}, {
OP_LW
, IFMT},

127 {
OP_LBU
, 
IFMT
}, {
OP_LHU
, IFMT}, {
OP_LWR
, IFMT}, {
OP_RES
, IFMT},

128 {
OP_SB
, 
IFMT
}, {
OP_SH
, IFMT}, {
OP_SWL
, IFMT}, {
OP_SW
, IFMT},

129 {
OP_RES
, 
IFMT
}, {OP_RES, IFMT}, {
OP_SWR
, IFMT}, {OP_RES, IFMT},

130 {
OP_UNIMP
, 
IFMT
}, {OP_UNIMP, IFMT}, {OP_UNIMP, IFMT}, {OP_UNIMP, IFMT},

131 {
OP_RES
, 
IFMT
}, {OP_RES, IFMT}, {OP_RES, IFMT}, {OP_RES, IFMT},

132 {
OP_UNIMP
, 
IFMT
}, {OP_UNIMP, IFMT}, {OP_UNIMP, IFMT}, {OP_UNIMP, IFMT},

133 {
OP_RES
, 
IFMT
}, {OP_RES, IFMT}, {OP_RES, IFMT}, {OP_RES, IFMT}

141 
	g¥ecŸlTabË
[] = {

142 
OP_SLL
, 
OP_RES
, 
OP_SRL
, 
OP_SRA
, 
OP_SLLV
, OP_RES, 
OP_SRLV
, 
OP_SRAV
,

143 
OP_JR
, 
OP_JALR
, 
OP_RES
, OP_RES, 
OP_SYSCALL
, 
OP_UNIMP
, OP_RES, OP_RES,

144 
OP_MFHI
, 
OP_MTHI
, 
OP_MFLO
, 
OP_MTLO
, 
OP_RES
, OP_RES, OP_RES, OP_RES,

145 
OP_MULT
, 
OP_MULTU
, 
OP_DIV
, 
OP_DIVU
, 
OP_RES
, OP_RES, OP_RES, OP_RES,

146 
OP_ADD
, 
OP_ADDU
, 
OP_SUB
, 
OP_SUBU
, 
OP_AND
, 
OP_OR
, 
OP_XOR
, 
OP_NOR
,

147 
OP_RES
, OP_RES, 
OP_SLT
, 
OP_SLTU
, OP_RES, OP_RES, OP_RES, OP_RES,

148 
OP_RES
, OP_RES, OP_RES, OP_RES, OP_RES, OP_RES, OP_RES, OP_RES,

149 
OP_RES
, OP_RES, OP_RES, OP_RES, OP_RES, OP_RES, OP_RES, OP_RES

155 
	eRegTy³
 { 
	mNONE
, 
	mRS
, 
	mRT
, 
	mRD
, 
	mEXTRA
 };

157 
	sOpSŒšg
 {

158 *
	m¡ršg
;

159 
RegTy³
 
	m¬gs
[3];

162 
OpSŒšg
 
	gİSŒšgs
[] = {

163 {"Shouldn'ˆh­³n", {
NONE
, NONE, NONE}},

164 {"ADD„%d,r%d,r%d", {
RD
, 
RS
, 
RT
}},

165 {"ADDI„%d,r%d,%d", {
RT
, 
RS
, 
EXTRA
}},

166 {"ADDIU„%d,r%d,%d", {
RT
, 
RS
, 
EXTRA
}},

167 {"ADDU„%d,r%d,r%d", {
RD
, 
RS
, 
RT
}},

168 {"AND„%d,r%d,r%d", {
RD
, 
RS
, 
RT
}},

169 {"ANDI„%d,r%d,%d", {
RT
, 
RS
, 
EXTRA
}},

170 {"BEQ„%d,r%d,%d", {
RS
, 
RT
, 
EXTRA
}},

171 {"BGEZ„%d,%d", {
RS
, 
EXTRA
, 
NONE
}},

172 {"BGEZAL„%d,%d", {
RS
, 
EXTRA
, 
NONE
}},

173 {"BGTZ„%d,%d", {
RS
, 
EXTRA
, 
NONE
}},

174 {"BLEZ„%d,%d", {
RS
, 
EXTRA
, 
NONE
}},

175 {"BLTZ„%d,%d", {
RS
, 
EXTRA
, 
NONE
}},

176 {"BLTZAL„%d,%d", {
RS
, 
EXTRA
, 
NONE
}},

177 {"BNE„%d,r%d,%d", {
RS
, 
RT
, 
EXTRA
}},

178 {"Shouldn'ˆh­³n", {
NONE
, NONE, NONE}},

179 {"DIV„%d,r%d", {
RS
, 
RT
, 
NONE
}},

180 {"DIVU„%d,r%d", {
RS
, 
RT
, 
NONE
}},

181 {"J %d", {
EXTRA
, 
NONE
, NONE}},

182 {"JAL %d", {
EXTRA
, 
NONE
, NONE}},

183 {"JALR„%d,r%d", {
RD
, 
RS
, 
NONE
}},

184 {"JR„%d,r%d", {
RD
, 
RS
, 
NONE
}},

185 {"LB„%d,%dÔ%d)", {
RT
, 
EXTRA
, 
RS
}},

186 {"LBU„%d,%dÔ%d)", {
RT
, 
EXTRA
, 
RS
}},

187 {"LH„%d,%dÔ%d)", {
RT
, 
EXTRA
, 
RS
}},

188 {"LHU„%d,%dÔ%d)", {
RT
, 
EXTRA
, 
RS
}},

189 {"LUI„%d,%d", {
RT
, 
EXTRA
, 
NONE
}},

190 {"LW„%d,%dÔ%d)", {
RT
, 
EXTRA
, 
RS
}},

191 {"LWL„%d,%dÔ%d)", {
RT
, 
EXTRA
, 
RS
}},

192 {"LWR„%d,%dÔ%d)", {
RT
, 
EXTRA
, 
RS
}},

193 {"Shouldn'ˆh­³n", {
NONE
, NONE, NONE}},

194 {"MFHI„%d", {
RD
, 
NONE
, NONE}},

195 {"MFLO„%d", {
RD
, 
NONE
, NONE}},

196 {"Shouldn'ˆh­³n", {
NONE
, NONE, NONE}},

197 {"MTHI„%d", {
RS
, 
NONE
, NONE}},

198 {"MTLO„%d", {
RS
, 
NONE
, NONE}},

199 {"MULT„%d,r%d", {
RS
, 
RT
, 
NONE
}},

200 {"MULTU„%d,r%d", {
RS
, 
RT
, 
NONE
}},

201 {"NOR„%d,r%d,r%d", {
RD
, 
RS
, 
RT
}},

202 {"OR„%d,r%d,r%d", {
RD
, 
RS
, 
RT
}},

203 {"ORI„%d,r%d,%d", {
RT
, 
RS
, 
EXTRA
}},

204 {"RFE", {
NONE
, NONE, NONE}},

205 {"SB„%d,%dÔ%d)", {
RT
, 
EXTRA
, 
RS
}},

206 {"SH„%d,%dÔ%d)", {
RT
, 
EXTRA
, 
RS
}},

207 {"SLL„%d,r%d,%d", {
RD
, 
RT
, 
EXTRA
}},

208 {"SLLV„%d,r%d,r%d", {
RD
, 
RT
, 
RS
}},

209 {"SLT„%d,r%d,r%d", {
RD
, 
RS
, 
RT
}},

210 {"SLTI„%d,r%d,%d", {
RT
, 
RS
, 
EXTRA
}},

211 {"SLTIU„%d,r%d,%d", {
RT
, 
RS
, 
EXTRA
}},

212 {"SLTU„%d,r%d,r%d", {
RD
, 
RS
, 
RT
}},

213 {"SRA„%d,r%d,%d", {
RD
, 
RT
, 
EXTRA
}},

214 {"SRAV„%d,r%d,r%d", {
RD
, 
RT
, 
RS
}},

215 {"SRL„%d,r%d,%d", {
RD
, 
RT
, 
EXTRA
}},

216 {"SRLV„%d,r%d,r%d", {
RD
, 
RT
, 
RS
}},

217 {"SUB„%d,r%d,r%d", {
RD
, 
RS
, 
RT
}},

218 {"SUBU„%d,r%d,r%d", {
RD
, 
RS
, 
RT
}},

219 {"SW„%d,%dÔ%d)", {
RT
, 
EXTRA
, 
RS
}},

220 {"SWL„%d,%dÔ%d)", {
RT
, 
EXTRA
, 
RS
}},

221 {"SWR„%d,%dÔ%d)", {
RT
, 
EXTRA
, 
RS
}},

222 {"XOR„%d,r%d,r%d", {
RD
, 
RS
, 
RT
}},

223 {"XORI„%d,r%d,%d", {
RT
, 
RS
, 
EXTRA
}},

224 {"SYSCALL", {
NONE
, NONE, NONE}},

225 {"Unim¶em’‹d", {
NONE
, NONE, NONE}},

226 {"Re£rved", {
NONE
, NONE, NONE}}

	@machine/network.cc

11 
	~"cİyright.h
"

12 
	~"sy¡em.h
"

13 #ifdeà
HOST_SPARC


14 
	~<¡ršgs.h
>

18 
	$N‘wÜkR—dPŞl
(
¬g
)

20 
N‘wÜk
 *
Ãt
 = (N‘wÜk *)
¬g
;

21 
Ãt
->
	`CheckPktAva
();

22 
	}
}

23 
	$N‘wÜkS’dDÚe
(
¬g
)

25 
N‘wÜk
 *
Ãt
 = (N‘wÜk *)
¬g
;

26 
Ãt
->
	`S’dDÚe
();

27 
	}
}

33 
	gN‘wÜk
::
	$N‘wÜk
(
N‘wÜkAdd»ss
 
addr
, 
»lŸb™y
,

34 
VoidFunùiÚPŒ
 
»adAva
, VoidFunùiÚPŒ 
wr™eDÚe
, 
ÿÎArg
)

36 
id’t
 = 
addr
;

37 ià(
»lŸb™y
 < 0è
chªûToWÜk
 = 0;

38 ià(
»lŸb™y
 > 1è
chªûToWÜk
 = 1;

39 
chªûToWÜk
 = 
»lŸb™y
;

42 
wr™eHªdËr
 = 
wr™eDÚe
;

43 
»adHªdËr
 = 
»adAva
;

44 
hªdËrArg
 = 
ÿÎArg
;

45 
£ndBusy
 = 
FALSE
;

46 
šHdr
.
Ëngth
 = 0;

48 
sock
 = 
	`O³nSock‘
();

49 
	`¥rštf
(
sockName
, "SOCKET_%d", ()
addr
);

50 
	`AssignNameToSock‘
(
sockName
, 
sock
);

54 
š‹¼u±
->
	`ScheduË
(
N‘wÜkR—dPŞl
, ()
this
, 
N‘wÜkTime
, 
N‘wÜkRecvIÁ
);

55 
	}
}

57 
	gN‘wÜk
::~
	$N‘wÜk
()

59 
	`Clo£Sock‘
(
sock
);

60 
	`DeAssignNameToSock‘
(
sockName
);

61 
	}
}

67 
	gN‘wÜk
::
	$CheckPktAva
()

70 
š‹¼u±
->
	`ScheduË
(
N‘wÜkR—dPŞl
, ()
this
, 
N‘wÜkTime
, 
N‘wÜkRecvIÁ
);

72 ià(
šHdr
.
Ëngth
 != 0)

74 ià(!
	`PŞlSock‘
(
sock
))

78 *
bufãr
 = 
Ãw
 [
MaxWœeSize
];

79 
	`R—dFromSock‘
(
sock
, 
bufãr
, 
MaxWœeSize
);

82 
šHdr
 = *(
Pack‘H—d”
 *)
bufãr
;

83 
	`ASSERT
((
šHdr
.
to
 =ğ
id’t
è&& (šHdr.
Ëngth
 <ğ
MaxPack‘Size
));

84 
	`bcİy
(
bufãr
 + (
Pack‘H—d”
), 
šbox
, 
šHdr
.
Ëngth
);

85 
d–‘e
 []
bufãr
 ;

87 
	`DEBUG
('n', "Network„eceived…acket from %d,†ength %d...\n",

88 (è
šHdr
.
äom
, inHdr.
Ëngth
);

89 
¡©s
->
numPack‘sRecvd
++;

92 (*
»adHªdËr
)(
hªdËrArg
);

93 
	}
}

97 
	gN‘wÜk
::
	$S’dDÚe
()

99 
£ndBusy
 = 
FALSE
;

100 
¡©s
->
numPack‘sS’t
++;

101 (*
wr™eHªdËr
)(
hªdËrArg
);

102 
	}
}

110 
	gN‘wÜk
::
	$S’d
(
Pack‘H—d”
 
hdr
, * 
d©a
)

112 
toName
[32];

114 
	`¥rštf
(
toName
, "SOCKET_%d", ()
hdr
.
to
);

116 
	`ASSERT
((
£ndBusy
 =ğ
FALSE
è&& (
hdr
.
Ëngth
 > 0)

117 && (
hdr
.
Ëngth
 <ğ
MaxPack‘Size
è&& (hdr.
äom
 =ğ
id’t
));

118 
	`DEBUG
('n', "S’dšgØadd¸%d, %d by‹s... ", 
hdr
.
to
, hdr.
Ëngth
);

120 
š‹¼u±
->
	`ScheduË
(
N‘wÜkS’dDÚe
, ()
this
, 
N‘wÜkTime
, 
N‘wÜkS’dIÁ
);

122 ià(
	`Rªdom
(è% 100 >ğ
chªûToWÜk
 * 100) {

123 
	`DEBUG
('n', "oops,†ost it!\n");

128 *
bufãr
 = 
Ãw
 [
MaxWœeSize
];

129 *(
Pack‘H—d”
 *)
bufãr
 = 
hdr
;

130 
	`bcİy
(
d©a
, 
bufãr
 + (
Pack‘H—d”
), 
hdr
.
Ëngth
);

131 
	`S’dToSock‘
(
sock
, 
bufãr
, 
MaxWœeSize
, 
toName
);

132 
d–‘e
 []
bufãr
;

133 
	}
}

136 
Pack‘H—d”


137 
	gN‘wÜk
::
	$Reûive
(* 
d©a
)

139 
Pack‘H—d”
 
hdr
 = 
šHdr
;

141 
šHdr
.
Ëngth
 = 0;

142 ià(
hdr
.
Ëngth
 != 0)

143 
	`bcİy
(
šbox
, 
d©a
, 
hdr
.
Ëngth
);

144  
hdr
;

145 
	}
}

	@machine/network.h

15 #iâdeà
NETWORK_H


16 
	#NETWORK_H


	)

18 
	~"cİyright.h
"

19 
	~"ut™y.h
"

23 
	tN‘wÜkAdd»ss
;

31 şas 
	cPack‘H—d”
 {

32 
	mpublic
:

33 
N‘wÜkAdd»ss
 
to
;

34 
N‘wÜkAdd»ss
 
	mäom
;

35 
	mËngth
;

40 
	#MaxWœeSize
 64

41 
	#MaxPack‘Size
 (
MaxWœeSize
 - (
Pack‘H—d”
))

	)

55 şas 
	cN‘wÜk
 {

56 
	mpublic
:

57 
N‘wÜk
(
N‘wÜkAdd»ss
 
addr
, 
»lŸb™y
,

58 
VoidFunùiÚPŒ
 
»adAva
, VoidFunùiÚPŒ 
wr™eDÚe
, 
ÿÎArg
);

60 ~
N‘wÜk
();

62 
S’d
(
Pack‘H—d”
 
hdr
, * 
d©a
);

72 
Pack‘H—d”
 
Reûive
(* 
d©a
);

79 
S’dDÚe
();

81 
CheckPktAva
();

83 
	m´iv©e
:

84 
N‘wÜkAdd»ss
 
id’t
;

85 
	mchªûToWÜk
;

86 
	msock
;

87 
	msockName
[32];

88 
VoidFunùiÚPŒ
 
	mwr™eHªdËr
;

90 
VoidFunùiÚPŒ
 
	m»adHªdËr
;

92 
	mhªdËrArg
;

94 
boŞ
 
	m£ndBusy
;

95 
boŞ
 
	m·ck‘Ava
;

97 
Pack‘H—d”
 
	mšHdr
;

98 
	mšbox
[
MaxPack‘Size
];

	@machine/stats.cc

10 
	~"cİyright.h
"

11 
	~"ut™y.h
"

12 
	~"¡©s.h
"

19 
	gSti¡ics
::
	$Sti¡ics
()

21 
tÙ®Ticks
 = 
idËTicks
 = 
sy¡emTicks
 = 
u£rTicks
 = 0;

22 
numDiskR—ds
 = 
numDiskWr™es
 = 0;

23 
numCÚsŞeCh¬sR—d
 = 
numCÚsŞeCh¬sWr™‹n
 = 0;

24 
numPageFauÉs
 = 
numPack‘sS’t
 = 
numPack‘sRecvd
 = 0;

25 
	}
}

34 
	gSti¡ics
::
	$Pršt
()

36 
	`´štf
("Ticks:Ù® %d, idË %d, sy¡em %d, u£¸%d\n", 
tÙ®Ticks
,

37 
idËTicks
, 
sy¡emTicks
, 
u£rTicks
);

38 
	`´štf
("Disk I/O:„—d %d, wr™e %d\n", 
numDiskR—ds
, 
numDiskWr™es
);

39 
	`´štf
("CÚsŞI/O:„—d %d, wr™e %d\n", 
numCÚsŞeCh¬sR—d
,

40 
numCÚsŞeCh¬sWr™‹n
);

41 
	`´štf
("Pagšg: fauÉ %d\n", 
numPageFauÉs
);

42 
	`´štf
("N‘wÜk I/O:…ack‘ »ûived %d, s’ˆ%d\n", 
numPack‘sRecvd
,

43 
numPack‘sS’t
);

44 
	}
}

	@machine/stats.h

11 #iâdeà
STATS_H


12 
	#STATS_H


	)

14 
	~"cİyright.h
"

22 şas 
	cSti¡ics
 {

23 
	mpublic
:

24 
tÙ®Ticks
;

25 
	midËTicks
;

26 
	msy¡emTicks
;

27 
	mu£rTicks
;

31 
	mnumDiskR—ds
;

32 
	mnumDiskWr™es
;

33 
	mnumCÚsŞeCh¬sR—d
;

34 
	mnumCÚsŞeCh¬sWr™‹n
;

35 
	mnumPageFauÉs
;

36 
	mnumPack‘sS’t
;

37 
	mnumPack‘sRecvd
;

39 
Sti¡ics
();

41 
Pršt
();

52 
	#U£rTick
 1

53 
	#Sy¡emTick
 10

54 
	#RÙ©iÚTime
 500

55 
	#S“kTime
 500

56 
	#CÚsŞeTime
 100

57 
	#N‘wÜkTime
 100

58 
	#Tim”Ticks
 100

59 

	)

	@machine/sysdep.cc

26 
	~"cİyright.h
"

29 
	~<¡dio.h
>

30 
	~<¡ršg.h
>

31 
	~<sigÇl.h
>

32 
	~<sys/ty³s.h
>

33 
	~<sys/time.h
>

34 
	~<sys/sock‘.h
>

35 
	~<sys/fe.h
>

36 
	~<sys/un.h
>

37 
	~<sys/mmª.h
>

38 #ifdeà
HOST_i386


39 
	~<uni¡d.h
>

40 
	~<sys/time.h
>

41 
	~<”ºo.h
>

43 #ifdeà
HOST_SPARC


44 
	~<uni¡d.h
>

45 
	~<fú.h
>

46 
	~<sys/time.h
>

52 #ifdeà
HOST_SNAKE


59 #ifdeà
HOST_i386


60 
£Ëù
(
nfds
, 
fd_£t
 *
»adfds
, fd_£ˆ*
wr™efds
, fd_£ˆ*
exû±fds
,

61 
timev®
 *
timeout
);

63 #ifdeà
HOST_SPARC


64 
£Ëù
(
nfds
, 
fd_£t
 *
»adfds
, fd_£ˆ*
wr™efds
, fd_£ˆ*
exû±fds
,

65 
timev®
 *
timeout
);

67 
£Ëù
(
numB™s
, *
»adFds
, *
wr™eFds
, *
exû±Fds
,

68 
timev®
 *
timeout
);

87 
¤ªd
(
£ed
);

88 
¿nd
();

89 
¦“p
();

90 
abÜt
();

91 
ex™
();

100 
	~"š‹¼u±.h
"

101 
	~"sy¡em.h
"

120 
boŞ


121 
	$PŞlFe
(
fd
)

123 
rfd
 = (1 << 
fd
), 
wfd
 = 0, 
xfd
 = 0, 
»tV®
;

124 
timev®
 
pŞlTime
;

127 
pŞlTime
.
tv_£c
 = 0;

128 ià(
š‹¼u±
->
	`g‘Stus
(è=ğ
IdËMode
)

129 
pŞlTime
.
tv_u£c
 = 20000;

131 
pŞlTime
.
tv_u£c
 = 0;

134 #ià(
	`defšed
(
HOST_i386
è|| defšed(
HOST_SPARC
))

135 
»tV®
 = 
	`£Ëù
(32, (
fd_£t
*)&
rfd
, (fd_£t*)&
wfd
, (fd_£t*)&
xfd
, &
pŞlTime
);

137 
»tV®
 = 
	`£Ëù
(32, &
rfd
, &
wfd
, &
xfd
, &
pŞlTime
);

140 
	`ASSERT
((
»tV®
 == 0) || (retVal == 1));

141 ià(
»tV®
 == 0)

142  
FALSE
;

143  
TRUE
;

144 
	}
}

155 
	$O³nFÜWr™e
(*
Çme
)

157 
fd
 = 
	`İ’
(
Çme
, 
O_RDWR
|
O_CREAT
|
O_TRUNC
, 0666);

159 
	`ASSERT
(
fd
 >= 0);

160  
fd
;

161 
	}
}

172 
	$O³nFÜR—dWr™e
(*
Çme
, 
boŞ
 
üashOnE¼Ü
)

174 
fd
 = 
	`İ’
(
Çme
, 
O_RDWR
, 0);

176 
	`ASSERT
(!
üashOnE¼Ü
 || 
fd
 >= 0);

177  
fd
;

178 
	}
}

186 
	$R—d
(
fd
, *
bufãr
, 
nBy‹s
)

188 
»tV®
 = 
	`»ad
(
fd
, 
bufãr
, 
nBy‹s
);

189 
	`ASSERT
(
»tV®
 =ğ
nBy‹s
);

190 
	}
}

199 
	$R—dP¬tŸl
(
fd
, *
bufãr
, 
nBy‹s
)

201  
	`»ad
(
fd
, 
bufãr
, 
nBy‹s
);

202 
	}
}

211 
	$Wr™eFe
(
fd
, *
bufãr
, 
nBy‹s
)

213 
»tV®
 = 
	`wr™e
(
fd
, 
bufãr
, 
nBy‹s
);

214 
	`ASSERT
(
»tV®
 =ğ
nBy‹s
);

215 
	}
}

223 
	$L£ek
(
fd
, 
off£t
, 
wh’û
)

225 
»tV®
 = 
	`l£ek
(
fd
, 
off£t
, 
wh’û
);

226 
	`ASSERT
(
»tV®
 >= 0);

227 
	}
}

235 
	$T–l
(
fd
)

237 #ifdeà
HOST_i386


238  
	`l£ek
(
fd
,0,
SEEK_CUR
);

240  
	`‹Î
(
fd
);

242 
	}
}

251 
	$Clo£
(
fd
)

253 
»tV®
 = 
	`şo£
(
fd
);

254 
	`ASSERT
(
»tV®
 >= 0);

255 
	}
}

262 
boŞ


263 
	$UÆšk
(*
Çme
)

265  
	`uÆšk
(
Çme
);

266 
	}
}

276 
	$O³nSock‘
()

278 
sockID
;

280 
sockID
 = 
	`sock‘
(
AF_UNIX
, 
SOCK_DGRAM
, 0);

281 
	`ASSERT
(
sockID
 >= 0);

283  
sockID
;

284 
	}
}

292 
	$Clo£Sock‘
(
sockID
)

294 (è
	`şo£
(
sockID
);

295 
	}
}

303 
	$In™Sock‘Name
(
sockaddr_un
 *
uÇme
, *
Çme
)

305 
uÇme
->
sun_çmy
 = 
AF_UNIX
;

306 
	`¡rıy
(
uÇme
->
sun_·th
, 
Çme
);

307 
	}
}

316 
	$AssignNameToSock‘
(*
sock‘Name
, 
sockID
)

318 
sockaddr_un
 
uName
;

319 
»tV®
;

321 (è
	`uÆšk
(
sock‘Name
);

323 
	`In™Sock‘Name
(&
uName
, 
sock‘Name
);

324 
»tV®
 = 
	`bšd
(
sockID
, (
sockaddr
 *è&
uName
, (uName));

325 
	`ASSERT
(
»tV®
 >= 0);

326 
	`DEBUG
('n', "C»©ed sock‘ %s\n", 
sock‘Name
);

327 
	}
}

334 
	$DeAssignNameToSock‘
(*
sock‘Name
)

336 (è
	`uÆšk
(
sock‘Name
);

337 
	}
}

344 
boŞ


345 
	$PŞlSock‘
(
sockID
)

347  
	`PŞlFe
(
sockID
);

348 
	}
}

355 
	$R—dFromSock‘
(
sockID
, *
bufãr
, 
·ck‘Size
)

357 
»tV®
;

358 
sockaddr_un
 
uName
;

359 #ifdeà
HOST_i386


360 
size
 = (
uName
);

362 
”ºo
;

363 
sockËn_t
 
size
 = (
uName
);

366 
»tV®
 = 
	`»cväom
(
sockID
, 
bufãr
, 
·ck‘Size
, 0,

367 (
sockaddr
 *è&
uName
, &
size
);

369 ià(
»tV®
 !ğ
·ck‘Size
) {

370 
	`³¼Ü
("in„ecvfrom");

371 
	`´štf
("ÿÎed: %x, gÙ back %d, %d\n", (è
bufãr
, 
»tV®
, 
”ºo
);

373 
	`ASSERT
(
»tV®
 =ğ
·ck‘Size
);

374 
	}
}

382 
	$S’dToSock‘
(
sockID
, *
bufãr
, 
·ck‘Size
, *
toName
)

384 
sockaddr_un
 
uName
;

385 
»tV®
;

387 
	`In™Sock‘Name
(&
uName
, 
toName
);

388 
»tV®
 = 
	`£ndto
(
sockID
, 
bufãr
, 
·ck‘Size
, 0,

389 (
sockaddr
*è&
uName
, (uName));

390 
	`ASSERT
(
»tV®
 =ğ
·ck‘Size
);

391 
	}
}

401 
	$C®lOnU£rAbÜt
(
VoidNoArgFunùiÚPŒ
 
func
)

403 ()
	`sigÇl
(
SIGINT
, (
VoidFunùiÚPŒ
è
func
);

404 
	}
}

414 
	$D–ay
(
£cÚds
)

416 (è
	`¦“p
((è
£cÚds
);

417 
	}
}

425 
	$AbÜt
()

427 
	`abÜt
();

428 
	}
}

436 
	$Ex™
(
ex™Code
)

438 
	`ex™
(
ex™Code
);

439 
	}
}

448 
	$RªdomIn™
(
£ed
)

450 
	`¤ªd
(
£ed
);

451 
	}
}

459 
	$Rªdom
()

461  
	`¿nd
();

462 
	}
}

477 
	$AÎocBoundedA¼ay
(
size
)

479 
pgSize
 = 
	`g‘·gesize
();

480 *
±r
 = 
Ãw
 [
pgSize
 * 2 + 
size
];

484  
±r
 + 
pgSize
;

485 
	}
}

496 
	$D—ÎocBoundedA¼ay
(*
±r
, 
size
)

498 
pgSize
 = 
	`g‘·gesize
();

500 
	`m´Ùeù
(
±r
 - 
pgSize
,…gSize, 
PROT_READ
 | 
PROT_WRITE
 | 
PROT_EXEC
);

501 
	`m´Ùeù
(
±r
 + 
size
, 
pgSize
, 
PROT_READ
 | 
PROT_WRITE
 | 
PROT_EXEC
);

502 
d–‘e
 [] (
±r
 - 
pgSize
);

503 
	}
}

	@machine/sysdep.h

11 #iâdeà
SYSDEP_H


12 
	#SYSDEP_H


	)

14 
	~"cİyright.h
"

18 
boŞ
 
PŞlFe
(
fd
);

22 
O³nFÜWr™e
(*
Çme
);

23 
O³nFÜR—dWr™e
(*
Çme
, 
boŞ
 
üashOnE¼Ü
);

24 
R—d
(
fd
, *
bufãr
, 
nBy‹s
);

25 
R—dP¬tŸl
(
fd
, *
bufãr
, 
nBy‹s
);

26 
Wr™eFe
(
fd
, *
bufãr
, 
nBy‹s
);

27 
L£ek
(
fd
, 
off£t
, 
wh’û
);

28 
T–l
(
fd
);

29 
Clo£
(
fd
);

30 
boŞ
 
UÆšk
(*
Çme
);

33 
O³nSock‘
();

34 
Clo£Sock‘
(
sockID
);

35 
AssignNameToSock‘
(*
sock‘Name
, 
sockID
);

36 
DeAssignNameToSock‘
(*
sock‘Name
);

37 
boŞ
 
PŞlSock‘
(
sockID
);

38 
R—dFromSock‘
(
sockID
, *
bufãr
, 
·ck‘Size
);

39 
S’dToSock‘
(
sockID
, *
bufãr
, 
·ck‘Size
,*
toName
);

42 
AbÜt
();

43 
Ex™
(
ex™Code
);

44 
D–ay
(
£cÚds
);

47 
C®lOnU£rAbÜt
(
VoidNoArgFunùiÚPŒ
 
ş—nUp
);

50 
RªdomIn™
(
£ed
);

51 
Rªdom
();

55 *
AÎocBoundedA¼ay
(
size
);

56 
D—ÎocBoundedA¼ay
(*
p
, 
size
);

61 
©oi
(cÚ¡ *
¡r
);

62 
©of
(cÚ¡ *
¡r
);

63 
abs
(
i
);

65 
	~<¡dio.h
>

66 
	~<¡ršg.h
>

	@machine/timer.cc

22 
	~"cİyright.h
"

23 
	~"tim”.h
"

24 
	~"sy¡em.h
"

27 
	$Tim”HªdËr
(
¬g
)

29 
Tim”
 *
p
 = (Tim” *)
¬g
;

30 
p
->
	`Tim”Expœed
();

31 
	}
}

47 
	gTim”
::
	$Tim”
(
VoidFunùiÚPŒ
 
tim”HªdËr
, 
ÿÎArg
, 
boŞ
 
doRªdom
)

49 
¿ndomize
 = 
doRªdom
;

50 
hªdËr
 = 
tim”HªdËr
;

51 
¬g
 = 
ÿÎArg
;

54 
š‹¼u±
->
	`ScheduË
(
Tim”HªdËr
, (è
this
, 
	`TimeOfNextIÁ”ru±
(),

55 
Tim”IÁ
);

56 
	}
}

65 
	gTim”
::
	$Tim”Expœed
()

68 
š‹¼u±
->
	`ScheduË
(
Tim”HªdËr
, (è
this
, 
	`TimeOfNextIÁ”ru±
(),

69 
Tim”IÁ
);

72 (*
hªdËr
)(
¬g
);

73 
	}
}

82 
	gTim”
::
	$TimeOfNextIÁ”ru±
()

84 ià(
¿ndomize
)

85  1 + (
	`Rªdom
(è% (
Tim”Ticks
 * 2));

87  
Tim”Ticks
;

88 
	}
}

	@machine/timer.h

20 #iâdeà
TIMER_H


21 
	#TIMER_H


	)

23 
	~"cİyright.h
"

24 
	~"ut™y.h
"

27 şas 
	cTim”
 {

28 
	mpublic
:

29 
Tim”
(
VoidFunùiÚPŒ
 
tim”HªdËr
, 
ÿÎArg
, 
boŞ
 
doRªdom
);

32 ~
	$Tim”
() {}

36 
	`Tim”Expœed
();

39 
	`TimeOfNextIÁ”ru±
();

42 
´iv©e
:

43 
boŞ
 
¿ndomize
;

44 
VoidFunùiÚPŒ
 
hªdËr
;

45 
¬g
;

47 
	}
};

	@machine/translate.cc

32 
	~"cİyright.h
"

33 
	~"machše.h
"

34 
	~"addr¥aû.h
"

35 
	~"sy¡em.h
"

37 #ifdeà
VM


44 
	$WÜdToHo¡
(
wÜd
) {

45 #ifdeà
HOST_IS_BIG_ENDIAN


46 
»suÉ
;

47 
»suÉ
 = (
wÜd
 >> 24) & 0x000000ff;

48 
»suÉ
 |ğ(
wÜd
 >> 8) & 0x0000ff00;

49 
»suÉ
 |ğ(
wÜd
 << 8) & 0x00ff0000;

50 
»suÉ
 |ğ(
wÜd
 << 24) & 0xff000000;

51  
»suÉ
;

53  
wÜd
;

55 
	}
}

58 
	$ShÜtToHo¡
(
shÜtwÜd
) {

59 #ifdeà
HOST_IS_BIG_ENDIAN


60 
»suÉ
;

61 
»suÉ
 = (
shÜtwÜd
 << 8) & 0xff00;

62 
»suÉ
 |ğ(
shÜtwÜd
 >> 8) & 0x00ff;

63  
»suÉ
;

65  
shÜtwÜd
;

67 
	}
}

70 
	$WÜdToMachše
(
wÜd
è{  
	`WÜdToHo¡
(wÜd); 
	}
}

73 
	$ShÜtToMachše
(
shÜtwÜd
è{  
	`ShÜtToHo¡
(shÜtwÜd); 
	}
}

89 
boŞ


90 
	gMachše
::
	$R—dMem
(
addr
, 
size
, *
v®ue
)

92 
d©a
;

93 
Exû±iÚTy³
 
exû±iÚ
;

94 
physiÿlAdd»ss
;

96 
	`DEBUG
('a', "R—dšg VA 0x%x, siz%d\n", 
addr
, 
size
);

98 
exû±iÚ
 = 
	`T¿n¦©e
(
addr
, &
physiÿlAdd»ss
, 
size
, 
FALSE
);

99 ià(
exû±iÚ
 !ğ
NoExû±iÚ
) {

100 
machše
->
	`Rai£Exû±iÚ
(
exû±iÚ
, 
addr
);

101  
FALSE
;

103 
size
) {

105 
d©a
 = 
machše
->
mašMemÜy
[
physiÿlAdd»ss
];

106 *
v®ue
 = 
d©a
;

110 
d©a
 = *(*è&
machše
->
mašMemÜy
[
physiÿlAdd»ss
];

111 *
v®ue
 = 
	`ShÜtToHo¡
(
d©a
);

115 
d©a
 = *(*è&
machše
->
mašMemÜy
[
physiÿlAdd»ss
];

116 *
v®ue
 = 
	`WÜdToHo¡
(
d©a
);

119 : 
	`ASSERT
(
FALSE
);

122 
	`DEBUG
('a', "\tv®u»ad = %8.8x\n", *
v®ue
);

123  (
TRUE
);

124 
	}
}

139 
boŞ


140 
	gMachše
::
	$Wr™eMem
(
addr
, 
size
, 
v®ue
)

142 
Exû±iÚTy³
 
exû±iÚ
;

143 
physiÿlAdd»ss
;

145 
	`DEBUG
('a', "Wr™šg VA 0x%x, siz%d, v®u0x%x\n", 
addr
, 
size
, 
v®ue
);

147 
exû±iÚ
 = 
	`T¿n¦©e
(
addr
, &
physiÿlAdd»ss
, 
size
, 
TRUE
);

148 ià(
exû±iÚ
 !ğ
NoExû±iÚ
) {

149 
machše
->
	`Rai£Exû±iÚ
(
exû±iÚ
, 
addr
);

150  
FALSE
;

152 
size
) {

154 
machše
->
mašMemÜy
[
physiÿlAdd»ss
] = (è(
v®ue
 & 0xff);

158 *(*è&
machše
->
mašMemÜy
[
physiÿlAdd»ss
]

159 ğ
	`ShÜtToMachše
((è(
v®ue
 & 0xffff));

163 *(*è&
machše
->
mašMemÜy
[
physiÿlAdd»ss
]

164 ğ
	`WÜdToMachše
((è
v®ue
);

167 : 
	`ASSERT
(
FALSE
);

170  
TRUE
;

171 
	}
}

188 
Exû±iÚTy³


189 
	gMachše
::
	$T¿n¦©e
(
vœtAddr
, * 
physAddr
, 
size
, 
boŞ
 
wr™šg
)

191 
i
;

192 
v²
, 
off£t
;

193 
T¿n¦©iÚEÁry
 *
’Œy
;

194 
·geF¿me
;

196 
	`DEBUG
('a', "\tT¿n¦©0x%x, %s: ", 
vœtAddr
, 
wr™šg
 ? "write" : "read");

199 ià(((
size
 =ğ4è&& (
vœtAddr
 & 0x3)) || ((size == 2) && (virtAddr & 0x1))){

200 
	`DEBUG
('a', "®ignm’ˆ´obËm‡ˆ%d, siz%d!\n", 
vœtAddr
, 
size
);

201  
Add»ssE¼ÜExû±iÚ
;

205 
	`ASSERT
(
b
 =ğ
NULL
 || 
·geTabË
 == NULL);

206 
	`ASSERT
(
b
 !ğ
NULL
 || 
·geTabË
 != NULL);

210 
v²
 = (è
vœtAddr
 / 
PageSize
;

211 
off£t
 = (è
vœtAddr
 % 
PageSize
;

213 ià(
b
 =ğ
NULL
) {

214 ià(
v²
 >ğ
·geTabËSize
) {

215 
	`DEBUG
('a', "virtual…age # %doo†arge for…ageable size %d!\n",

216 
vœtAddr
, 
·geTabËSize
);

217  
Add»ssE¼ÜExû±iÚ
;

218 } ià(!
·geTabË
[
v²
].
v®id
) {

219 
	`DEBUG
('a', "virtual…age # %doo†arge for…ageable size %d!\n",

220 
vœtAddr
, 
·geTabËSize
);

221  
PageFauÉExû±iÚ
;

223 
’Œy
 = &
·geTabË
[
v²
];

225 
’Œy
 = 
NULL
, 
i
 = 0; i < 
TLBSize
; i++)

226 ià(
b
[
i
].
v®id
 && (((élb[i].
vœtu®Page
è=ğ
v²
)) {

227 
’Œy
 = &
b
[
i
];

230 ià(
’Œy
 =ğ
NULL
) {

231 
	`DEBUG
('a', "***‚o valid TLBƒntry found forhis virtual…age!\n");

232  
PageFauÉExû±iÚ
;

238 ià(
’Œy
->
»adOÆy
 && 
wr™šg
) {

239 
	`DEBUG
('a', "%d m­³d„—d-Úly‡ˆ%d iÀTLB!\n", 
vœtAddr
, 
i
);

240  
R—dOÆyExû±iÚ
;

242 
·geF¿me
 = 
’Œy
->
physiÿlPage
;

246 ià(
·geF¿me
 >ğ
NumPhysPages
) {

247 
	`DEBUG
('a', "*** f¿m%d > %d!\n", 
·geF¿me
, 
NumPhysPages
);

248  
BusE¼ÜExû±iÚ
;

250 
’Œy
->
u£
 = 
TRUE
;

254 ià(
wr™šg
)

256 
’Œy
->
dœty
 = 
TRUE
;

259 *
physAddr
 = 
·geF¿me
 * 
PageSize
 + 
off£t
;

260 
	`ASSERT
((*
physAddr
 >ğ0è&& ((*physAdd¸+ 
size
è<ğ
MemÜySize
));

261 
	`DEBUG
('a', "phy add¸ğ0x%x\n", *
physAddr
);

262  
NoExû±iÚ
;

263 
	}
}

272 
	$WÜdToHo¡
(
wÜd
) {

273 #ifdeà
HOST_IS_BIG_ENDIAN


274 
»suÉ
;

275 
»suÉ
 = (
wÜd
 >> 24) & 0x000000ff;

276 
»suÉ
 |ğ(
wÜd
 >> 8) & 0x0000ff00;

277 
»suÉ
 |ğ(
wÜd
 << 8) & 0x00ff0000;

278 
»suÉ
 |ğ(
wÜd
 << 24) & 0xff000000;

279  
»suÉ
;

281  
wÜd
;

283 
	}
}

286 
	$ShÜtToHo¡
(
shÜtwÜd
) {

287 #ifdeà
HOST_IS_BIG_ENDIAN


288 
»suÉ
;

289 
»suÉ
 = (
shÜtwÜd
 << 8) & 0xff00;

290 
»suÉ
 |ğ(
shÜtwÜd
 >> 8) & 0x00ff;

291  
»suÉ
;

293  
shÜtwÜd
;

295 
	}
}

298 
	$WÜdToMachše
(
wÜd
è{  
	`WÜdToHo¡
(wÜd); 
	}
}

301 
	$ShÜtToMachše
(
shÜtwÜd
è{  
	`ShÜtToHo¡
(shÜtwÜd); 
	}
}

317 
boŞ


318 
	gMachše
::
	$R—dMem
(
addr
, 
size
, *
v®ue
)

320 
d©a
;

321 
Exû±iÚTy³
 
exû±iÚ
;

322 
physiÿlAdd»ss
;

324 
	`DEBUG
('a', "R—dšg VA 0x%x, siz%d\n", 
addr
, 
size
);

326 
exû±iÚ
 = 
	`T¿n¦©e
(
addr
, &
physiÿlAdd»ss
, 
size
, 
FALSE
);

327 ià(
exû±iÚ
 !ğ
NoExû±iÚ
) {

328 
machše
->
	`Rai£Exû±iÚ
(
exû±iÚ
, 
addr
);

329  
FALSE
;

331 
size
) {

333 
d©a
 = 
machše
->
mašMemÜy
[
physiÿlAdd»ss
];

334 *
v®ue
 = 
d©a
;

338 
d©a
 = *(*è&
machše
->
mašMemÜy
[
physiÿlAdd»ss
];

339 *
v®ue
 = 
	`ShÜtToHo¡
(
d©a
);

343 
d©a
 = *(*è&
machše
->
mašMemÜy
[
physiÿlAdd»ss
];

344 *
v®ue
 = 
	`WÜdToHo¡
(
d©a
);

347 : 
	`ASSERT
(
FALSE
);

350 
	`DEBUG
('a', "\tv®u»ad = %8.8x\n", *
v®ue
);

351  (
TRUE
);

352 
	}
}

367 
boŞ


368 
	gMachše
::
	$Wr™eMem
(
addr
, 
size
, 
v®ue
)

370 
Exû±iÚTy³
 
exû±iÚ
;

371 
physiÿlAdd»ss
;

373 
	`DEBUG
('a', "Wr™šg VA 0x%x, siz%d, v®u0x%x\n", 
addr
, 
size
, 
v®ue
);

375 
exû±iÚ
 = 
	`T¿n¦©e
(
addr
, &
physiÿlAdd»ss
, 
size
, 
TRUE
);

376 ià(
exû±iÚ
 !ğ
NoExû±iÚ
) {

377 
machše
->
	`Rai£Exû±iÚ
(
exû±iÚ
, 
addr
);

378  
FALSE
;

380 
size
) {

382 
machše
->
mašMemÜy
[
physiÿlAdd»ss
] = (è(
v®ue
 & 0xff);

386 *(*è&
machše
->
mašMemÜy
[
physiÿlAdd»ss
]

387 ğ
	`ShÜtToMachše
((è(
v®ue
 & 0xffff));

391 *(*è&
machše
->
mašMemÜy
[
physiÿlAdd»ss
]

392 ğ
	`WÜdToMachše
((è
v®ue
);

395 : 
	`ASSERT
(
FALSE
);

398  
TRUE
;

399 
	}
}

416 
Exû±iÚTy³


417 
	gMachše
::
	$T¿n¦©e
(
vœtAddr
, * 
physAddr
, 
size
, 
boŞ
 
wr™šg
)

419 
i
;

420 
v²
, 
off£t
;

421 
T¿n¦©iÚEÁry
 *
’Œy
;

422 
·geF¿me
;

424 
	`DEBUG
('a', "\tT¿n¦©0x%x, %s: ", 
vœtAddr
, 
wr™šg
 ? "write" : "read");

427 ià(((
size
 =ğ4è&& (
vœtAddr
 & 0x3)) || ((size == 2) && (virtAddr & 0x1))){

428 
	`DEBUG
('a', "®ignm’ˆ´obËm‡ˆ%d, siz%d!\n", 
vœtAddr
, 
size
);

429  
Add»ssE¼ÜExû±iÚ
;

433 
	`ASSERT
(
b
 =ğ
NULL
 || 
·geTabË
 == NULL);

434 
	`ASSERT
(
b
 !ğ
NULL
 || 
·geTabË
 != NULL);

438 
v²
 = (è
vœtAddr
 / 
PageSize
;

439 
off£t
 = (è
vœtAddr
 % 
PageSize
;

441 ià(
b
 =ğ
NULL
) {

442 ià(
v²
 >ğ
·geTabËSize
) {

443 
	`DEBUG
('a', "virtual…age # %doo†arge for…ageable size %d!\n",

444 
vœtAddr
, 
·geTabËSize
);

445  
Add»ssE¼ÜExû±iÚ
;

446 } ià(!
·geTabË
[
v²
].
v®id
) {

447 
	`DEBUG
('a', "virtual…age # %doo†arge for…ageable size %d!\n",

448 
vœtAddr
, 
·geTabËSize
);

449  
PageFauÉExû±iÚ
;

451 
’Œy
 = &
·geTabË
[
v²
];

453 
’Œy
 = 
NULL
, 
i
 = 0; i < 
TLBSize
; i++)

454 ià(
b
[
i
].
v®id
 && (((élb[i].
vœtu®Page
è=ğ
v²
)) {

455 
’Œy
 = &
b
[
i
];

458 ià(
’Œy
 =ğ
NULL
) {

459 
	`DEBUG
('a', "***‚o valid TLBƒntry found forhis virtual…age!\n");

460  
PageFauÉExû±iÚ
;

466 ià(
’Œy
->
»adOÆy
 && 
wr™šg
) {

467 
	`DEBUG
('a', "%d m­³d„—d-Úly‡ˆ%d iÀTLB!\n", 
vœtAddr
, 
i
);

468  
R—dOÆyExû±iÚ
;

470 
·geF¿me
 = 
’Œy
->
physiÿlPage
;

474 ià(
·geF¿me
 >ğ
NumPhysPages
) {

475 
	`DEBUG
('a', "*** f¿m%d > %d!\n", 
·geF¿me
, 
NumPhysPages
);

476  
BusE¼ÜExû±iÚ
;

478 
’Œy
->
u£
 = 
TRUE
;

479 ià(
wr™šg
)

480 
’Œy
->
dœty
 = 
TRUE
;

481 *
physAddr
 = 
·geF¿me
 * 
PageSize
 + 
off£t
;

482 
	`ASSERT
((*
physAddr
 >ğ0è&& ((*physAdd¸+ 
size
è<ğ
MemÜySize
));

483 
	`DEBUG
('a', "phy add¸ğ0x%x\n", *
physAddr
);

484  
NoExû±iÚ
;

485 
	}
}

	@machine/translate.h

18 #iâdeà
TLB_H


19 
	#TLB_H


	)

21 
	~"cİyright.h
"

22 
	~"ut™y.h
"

32 şas 
	cT¿n¦©iÚEÁry
 {

33 
	mpublic
:

34 
vœtu®Page
;

35 
	mphysiÿlPage
;

37 
boŞ
 
	mv®id
;

39 
boŞ
 
	m»adOÆy
;

41 
boŞ
 
	mu£
;

43 
boŞ
 
	mdœty
;

46 
	mloÿtiÚOnDisk
;

	@network/nettest.cc

19 
	~"cİyright.h
"

21 
	~"sy¡em.h
"

22 
	~"ÃtwÜk.h
"

23 
	~"po¡.h
"

24 
	~"š‹¼u±.h
"

34 
	$MaTe¡
(
çrAddr
)

36 
Pack‘H—d”
 
outPktHdr
, 
šPktHdr
;

37 
MaH—d”
 
outMaHdr
, 
šMaHdr
;

38 *
d©a
 = "Hellohere!";

39 *
ack
 = "Got it!";

40 
bufãr
[
MaxMaSize
];

45 
outPktHdr
.
to
 = 
çrAddr
;

46 
outMaHdr
.
to
 = 0;

47 
outMaHdr
.
äom
 = 1;

48 
outMaHdr
.
Ëngth
 = 
	`¡¾’
(
d©a
) + 1;

51 
po¡Offiû
->
	`S’d
(
outPktHdr
, 
outMaHdr
, 
d©a
);

54 
po¡Offiû
->
	`Reûive
(0, &
šPktHdr
, &
šMaHdr
, 
bufãr
);

55 
	`´štf
("GÙ \"%s\" from %d, box %d\n",
bufãr
,
šPktHdr
.
äom
,
šMaHdr
.from);

56 
	`fæush
(
¡dout
);

60 
outPktHdr
.
to
 = 
šPktHdr
.
äom
;

61 
outMaHdr
.
to
 = 
šMaHdr
.
äom
;

62 
outMaHdr
.
Ëngth
 = 
	`¡¾’
(
ack
) + 1;

63 
po¡Offiû
->
	`S’d
(
outPktHdr
, 
outMaHdr
, 
ack
);

66 
po¡Offiû
->
	`Reûive
(1, &
šPktHdr
, &
šMaHdr
, 
bufãr
);

67 
	`´štf
("GÙ \"%s\" from %d, box %d\n",
bufãr
,
šPktHdr
.
äom
,
šMaHdr
.from);

68 
	`fæush
(
¡dout
);

71 
š‹¼u±
->
	`H®t
();

72 
	}
}

	@network/post.cc

19 
	~"cİyright.h
"

20 
	~"po¡.h
"

21 #ifdeà
HOST_SPARC


22 
	~<¡ršgs.h
>

34 
	gMa
::
	$Ma
(
Pack‘H—d”
 
pktH
, 
MaH—d”
 
maH
, *
msgD©a
)

36 
	`ASSERT
(
maH
.
Ëngth
 <ğ
MaxMaSize
);

38 
pktHdr
 = 
pktH
;

39 
maHdr
 = 
maH
;

40 
	`bcİy
(
msgD©a
, 
d©a
, 
maHdr
.
Ëngth
);

41 
	}
}

52 
	gMaBox
::
	$MaBox
()

54 
mes§ges
 = 
Ãw
 
	`SynchLi¡
();

55 
	}
}

65 
	gMaBox
::~
	$MaBox
()

67 
d–‘e
 
mes§ges
;

68 
	}
}

80 
	$PrštH—d”
(
Pack‘H—d”
 
pktHdr
, 
MaH—d”
 
maHdr
)

82 
	`´štf
("From (%d, %d)o (%d, %d) bytes %d\n",

83 
pktHdr
.
äom
, 
maHdr
.äom,…ktHdr.
to
, maHdr.to, maHdr.
Ëngth
);

84 
	}
}

100 
	gMaBox
::
	$Put
(
Pack‘H—d”
 
pktHdr
, 
MaH—d”
 
maHdr
, *
d©a
)

102 
Ma
 *
ma
 = 
Ãw
 
	`Ma
(
pktHdr
, 
maHdr
, 
d©a
);

104 
mes§ges
->
	`Aµ’d
((*)
ma
);

107 
	}
}

122 
	gMaBox
::
	$G‘
(
Pack‘H—d”
 *
pktHdr
, 
MaH—d”
 *
maHdr
, *
d©a
)

124 
	`DEBUG
('n', "Waiting for mail in mailbox\n");

125 
Ma
 *
ma
 = (Ma *è
mes§ges
->
	`Remove
();

128 *
pktHdr
 = 
ma
->pktHdr;

129 *
maHdr
 = 
ma
->mailHdr;

130 ià(
	`DebugIsEÇbËd
('n')) {

131 
	`´štf
("Got mail from mailbox: ");

132 
	`PrštH—d”
(*
pktHdr
, *
maHdr
);

134 
	`bcİy
(
ma
->
d©a
, d©a, ma->
maHdr
.
Ëngth
);

137 
d–‘e
 
ma
;

139 
	}
}

150 
	$Po¡®H–³r
(
¬g
)

152 
Po¡Offiû
* 
po
 = (Po¡Offiû *è
¬g
;

153 
po
->
	`Po¡®D–iv”y
();

154 
	}
}

155 
	$R—dAva
(
¬g
)

157 
Po¡Offiû
* 
po
 = (Po¡Offiû *è
¬g
;

158 
po
->
	`IncomšgPack‘
();

159 
	}
}

160 
	$Wr™eDÚe
(
¬g
)

162 
Po¡Offiû
* 
po
 = (Po¡Offiû *è
¬g
;

163 
po
->
	`Pack‘S’t
();

164 
	}
}

185 
	gPo¡Offiû
::
	$Po¡Offiû
(
N‘wÜkAdd»ss
 
addr
, 
»lŸb™y
, 
nBoxes
)

188 
mes§geAvaabË
 = 
Ãw
 
	`Sem­hÜe
("message‡vailable", 0);

189 
mes§geS’t
 = 
Ãw
 
	`Sem­hÜe
("message sent", 0);

190 
£ndLock
 = 
Ãw
 
	`Lock
("message send†ock");

193 
ÃtAddr
 = 
addr
;

194 
numBoxes
 = 
nBoxes
;

195 
boxes
 = 
Ãw
 
MaBox
[
nBoxes
];

198 
ÃtwÜk
 = 
Ãw
 
	`N‘wÜk
(
addr
, 
»lŸb™y
, 
R—dAva
, 
Wr™eDÚe
, (è
this
);

203 
Th»ad
 *
t
 = 
Ãw
 
	`Th»ad
("postal worker");

205 
t
->
	`FÜk
(
Po¡®H–³r
, (è
this
);

206 
	}
}

213 
	gPo¡Offiû
::~
	$Po¡Offiû
()

215 
d–‘e
 
ÃtwÜk
;

216 
d–‘e
 [] 
boxes
;

217 
d–‘e
 
mes§geAvaabË
;

218 
d–‘e
 
mes§geS’t
;

219 
d–‘e
 
£ndLock
;

220 
	}
}

231 
	gPo¡Offiû
::
	$Po¡®D–iv”y
()

233 
Pack‘H—d”
 
pktHdr
;

234 
MaH—d”
 
maHdr
;

235 *
bufãr
 = 
Ãw
 [
MaxPack‘Size
];

239 
mes§geAvaabË
->
	`P
();

240 
pktHdr
 = 
ÃtwÜk
->
	`Reûive
(
bufãr
);

242 
maHdr
 = *(
MaH—d”
 *)
bufãr
;

243 ià(
	`DebugIsEÇbËd
('n')) {

244 
	`´štf
("Putting mail into mailbox: ");

245 
	`PrštH—d”
(
pktHdr
, 
maHdr
);

249 
	`ASSERT
(0 <ğ
maHdr
.
to
 && maHdr.tØ< 
numBoxes
);

250 
	`ASSERT
(
maHdr
.
Ëngth
 <ğ
MaxMaSize
);

253 
boxes
[
maHdr
.
to
].
	`Put
(
pktHdr
, maHdr, 
bufãr
 + (
MaH—d”
));

255 
	}
}

271 
	gPo¡Offiû
::
	$S’d
(
Pack‘H—d”
 
pktHdr
, 
MaH—d”
 
maHdr
, * 
d©a
)

273 * 
bufãr
 = 
Ãw
 [
MaxPack‘Size
];

276 ià(
	`DebugIsEÇbËd
('n')) {

277 
	`´štf
("Post send: ");

278 
	`PrštH—d”
(
pktHdr
, 
maHdr
);

280 
	`ASSERT
(
maHdr
.
Ëngth
 <ğ
MaxMaSize
);

281 
	`ASSERT
(0 <ğ
maHdr
.
to
 && maHdr.tØ< 
numBoxes
);

284 
pktHdr
.
äom
 = 
ÃtAddr
;

285 
pktHdr
.
Ëngth
 = 
maHdr
.Ëngth + (
MaH—d”
);

288 
	`bcİy
(&
maHdr
, 
bufãr
, (
MaH—d”
));

289 
	`bcİy
(
d©a
, 
bufãr
 + (
MaH—d”
), 
maHdr
.
Ëngth
);

291 
£ndLock
->
	`Acquœe
();

293 
ÃtwÜk
->
	`S’d
(
pktHdr
, 
bufãr
);

294 
mes§geS’t
->
	`P
();

296 
£ndLock
->
	`R–—£
();

298 
d–‘e
 [] 
bufãr
;

300 
	}
}

318 
	gPo¡Offiû
::
	$Reûive
(
box
, 
Pack‘H—d”
 *
pktHdr
,

319 
MaH—d”
 *
maHdr
, * 
d©a
)

321 
	`ASSERT
((
box
 >ğ0è&& (box < 
numBoxes
));

323 
boxes
[
box
].
	`G‘
(
pktHdr
, 
maHdr
, 
d©a
);

324 
	`ASSERT
(
maHdr
->
Ëngth
 <ğ
MaxMaSize
);

325 
	}
}

335 
	gPo¡Offiû
::
	$IncomšgPack‘
()

337 
mes§geAvaabË
->
	`V
();

338 
	}
}

351 
	gPo¡Offiû
::
	$Pack‘S’t
()

353 
mes§geS’t
->
	`V
();

354 
	}
}

	@network/post.h

26 
	~"cİyright.h
"

28 #iâdeà
POST_H


29 
	#POST_H


	)

31 
	~"ÃtwÜk.h
"

32 
	~"synchli¡.h
"

36 
	tMaBoxAdd»ss
;

42 şas 
	cMaH—d”
 {

43 
	mpublic
:

44 
MaBoxAdd»ss
 
to
;

45 
MaBoxAdd»ss
 
	mäom
;

46 
	mËngth
;

53 
	#MaxMaSize
 (
MaxPack‘Size
 - (
MaH—d”
))

	)

62 şas 
	cMa
 {

63 
	mpublic
:

64 
Ma
(
Pack‘H—d”
 
pktH
, 
MaH—d”
 
maH
, *
msgD©a
);

68 
Pack‘H—d”
 
	mpktHdr
;

69 
MaH—d”
 
	mmaHdr
;

70 
	md©a
[
MaxMaSize
];

78 şas 
	cMaBox
 {

79 
	mpublic
:

80 
MaBox
();

81 ~
MaBox
();

83 
Put
(
Pack‘H—d”
 
pktHdr
, 
MaH—d”
 
maHdr
, *
d©a
);

85 
G‘
(
Pack‘H—d”
 *
pktHdr
, 
MaH—d”
 *
maHdr
, *
d©a
);

89 
	m´iv©e
:

90 
SynchLi¡
 *
mes§ges
;

102 şas 
	cPo¡Offiû
 {

103 
	mpublic
:

104 
Po¡Offiû
(
N‘wÜkAdd»ss
 
addr
, 
»lŸb™y
, 
nBoxes
);

108 ~
Po¡Offiû
();

110 
S’d
(
Pack‘H—d”
 
pktHdr
, 
MaH—d”
 
maHdr
, *
d©a
);

115 
Reûive
(
box
, 
Pack‘H—d”
 *
pktHdr
,

116 
MaH—d”
 *
maHdr
, *
d©a
);

120 
Po¡®D–iv”y
();

123 
Pack‘S’t
();

126 
IncomšgPack‘
();

131 
	m´iv©e
:

132 
N‘wÜk
 *
ÃtwÜk
;

133 
N‘wÜkAdd»ss
 
	mÃtAddr
;

134 
MaBox
 *
	mboxes
;

135 
	mnumBoxes
;

136 
Sem­hÜe
 *
	mmes§geAvaabË
;

137 
Sem­hÜe
 *
	mmes§geS’t
;

138 
Lock
 *
	m£ndLock
;

	@test/exec-test1.c

5 
	~<sysÿÎ.h
>

7 
	$´št
(*
s
)

9 
Ën
 = 0;

11 *
s
++)

12 ++
Ën
;

14 
	`Wr™e
(
s
-
Ën
-1,†en, 1);

15 
	}
}

17 
	$maš
()

19 
pid1
,
pid2
,
pid3
;

21 
	`´št
("Abouto Exec() some stuff...\n");

22 
pid1
 = 
	`Exec
("exec1");

23 
pid2
 = 
	`Exec
("exec2");

24 
pid3
 = 
	`Exec
("exec2");

33 
	}
}

	@test/exec-test2.c

5 
	~<sysÿÎ.h
>

7 
	$´št
(*
s
)

9 
Ën
 = 0;

11 *
s
++)

12 ++
Ën
;

14 
	`Wr™e
(
s
-
Ën
-1,†en, 1);

15 
	}
}

17 
	$maš
()

19 
pid1
,
pid2
,
pid3
;

21 
	`´št
("Abouto Exec() some stuff...\n");

22 
pid1
 = 
	`Exec
("exec1");

23 
pid2
 = 
	`Exec
("exec2");

24 
pid3
 = 
	`Exec
("exec2");

28 
	`´št
("Abouto join child…rocesses...\n");

29 
	`Još
(
pid1
);

30 
	`Još
(
pid2
);

31 
	`Još
(
pid3
);

32 
	`Ex™
(0);

34 
	}
}

	@test/exec2.c

5 
	~<sysÿÎ.h
>

7 
	$´št
(*
s
)

9 
Ën
 = 0;

11 *
s
++)

12 ++
Ën
;

14 
	`Wr™e
(
s
-
Ën
-1,†en, 1);

15 
	}
}

17 
	$maš
()

19 
	`´št
("Greetings fromƒxec2.c\n");

21 
	}
}

	@test/halt.c

1 
	~"sysÿÎ.h
"

3 
	gbufãr
[512];

5 
	$maš
()

7 
id
;

8 
i
;

9 
	`C»©e
("bigf2");

10 
id
 = 
	`O³n
("bigf2");

12 
i
 = 0; i < 512; i++)

13 
bufãr
[
i
] = 'a' + (i % 26);

15 
i
 = 0; i < 80; i++)

16 
	`Wr™e
(
bufãr
, 512, 
id
);

18 
	`Clo£
(
id
);

19 
	`Ex™
(10);

20 
	}
}

	@test/start.cc

9 
	#IN_ASM


	)

10 
	~"sysÿÎ.h
"

12 .
	g‹xt


13 .
	g®ign
 2

24 .
globl
 
	g__¡¬t


25 .
’t
 
__¡¬t


26 
	g__¡¬t
:

27 
j®
 
maš


28 
move
 
$4
,
$0


29 
j®
 
	gEx™


30 .
’d
 
	g__¡¬t


45 .
globl
 
	gH®t


46 .
’t
 
H®t


47 
	gH®t
:

48 
addiu
 
$2
,
	g$0
,
SC_H®t


49 
sysÿÎ


50 
j
 
	g$31


51 .
’d
 
	gH®t


53 .
globl
 
	gEx™


54 .
’t
 
Ex™


55 
	gEx™
:

56 
addiu
 
$2
,
	g$0
,
SC_Ex™


57 
sysÿÎ


58 
j
 
	g$31


59 .
’d
 
	gEx™


61 .
globl
 
	gExec


62 .
’t
 
Exec


63 
	gExec
:

64 
addiu
 
$2
,
	g$0
,
SC_Exec


65 
sysÿÎ


66 
j
 
	g$31


67 .
’d
 
	gExec


69 .
globl
 
	gJoš


70 .
’t
 
Još


71 
	gJoš
:

72 
addiu
 
$2
,
	g$0
,
SC_Još


73 
sysÿÎ


74 
j
 
	g$31


75 .
’d
 
	gJoš


77 .
globl
 
	gC»©e


78 .
’t
 
C»©e


79 
	gC»©e
:

80 
addiu
 
$2
,
	g$0
,
SC_C»©e


81 
sysÿÎ


82 
j
 
	g$31


83 .
’d
 
	gC»©e


85 .
globl
 
	gO³n


86 .
’t
 
O³n


87 
	gO³n
:

88 
addiu
 
$2
,
	g$0
,
SC_O³n


89 
sysÿÎ


90 
j
 
	g$31


91 .
’d
 
	gO³n


93 .
globl
 
	gR—d


94 .
’t
 
R—d


95 
	gR—d
:

96 
addiu
 
$2
,
	g$0
,
SC_R—d


97 
sysÿÎ


98 
j
 
	g$31


99 .
’d
 
	gR—d


101 .
globl
 
	gWr™e


102 .
’t
 
Wr™e


103 
	gWr™e
:

104 
addiu
 
$2
,
	g$0
,
SC_Wr™e


105 
sysÿÎ


106 
j
 
	g$31


107 .
’d
 
	gWr™e


109 .
globl
 
	gClo£


110 .
’t
 
Clo£


111 
	gClo£
:

112 
addiu
 
$2
,
	g$0
,
SC_Clo£


113 
sysÿÎ


114 
j
 
	g$31


115 .
’d
 
	gClo£


117 .
globl
 
	gFÜk


118 .
’t
 
FÜk


119 
	gFÜk
:

120 
addiu
 
$2
,
	g$0
,
SC_FÜk


121 
sysÿÎ


122 
j
 
	g$31


123 .
’d
 
	gFÜk


125 .
globl
 
	gY›ld


126 .
’t
 
Y›ld


127 
	gY›ld
:

128 
addiu
 
$2
,
	g$0
,
SC_Y›ld


129 
sysÿÎ


130 
j
 
	g$31


131 .
’d
 
	gY›ld


134 .
globl
 
	g__maš


135 .
’t
 
__maš


136 
	g__maš
:

137 
j
 
$31


138 .
’d
 
__maš


	@test/testvm.c

1 
	~"sysÿÎ.h
"

4 
	gbufãr
[1024*9];

5 
	gbufãr2
[1024*9];

9 
	$maš
()

11 
id2
;

12 
i
;

13 
	`C»©e
("aaaa");

14 
id2
 = 
	`O³n
("aaaa");

16 
i
 = 0; i < 1024*9; i++) {

17 
bufãr
[
i
] = 'a' + (i % 26);

19 
i
 = 0; i < 1024*9; i++) {

20 
bufãr2
[
i
] = 
bufãr
[i];

22 
	`Wr™e
(
bufãr2
, 4, 
id2
);

23 
	`Wr™e
("DÚe\n", 5, 
CÚsŞeOuut
);

24 
	`Clo£
(
id2
);

25 
	}
}

	@test/testvm1.c

1 
	~"sysÿÎ.h
"

4 
	gbufãr
[1024*9];

5 
	gbufãr2
[1024*9];

9 
	$maš
()

11 
id2
;

12 
i
;

13 
i
 = 0; i < 1024*9; i++) {

14 
bufãr
[
i
] = 'a' + (i % 26);

16 
	`Y›ld
();

17 
i
 = 0; i < 1024*9; i++) {

18 
bufãr2
[
i
] = 
bufãr
[i];

20 if(
bufãr2
[0]=='a')

21 
	`Wr™e
("DÚe\n", 5, 
CÚsŞeOuut
);

23 
	`Wr™e
("Faed\n", 7, 
CÚsŞeOuut
);

24 
	`Ex™
(0);

25 
	}
}

	@test/testvmexec.c

1 
	~"sysÿÎ.h
"

8 
	gbufãr
[1500];

11 
	$maš
()

13 
id
,
id1
,
id2
;

14 
id
 = 
	`Exec
("../test/testvm1");

15 
id2
 = 
	`Exec
("../test/testvm1");

16 
	`Još
(
id
);

17 
	`Još
(
id2
);

18 
	`Wr™e
("DÚe\n",5,
CÚsŞeOuut
);

19 
	`Ex™
(0);

20 
	}
}

	@test/testvmexec2.c

1 
	~"sysÿÎ.h
"

8 
	gbufãr
[1500];

11 
	$maš
()

13 
id
,
id1
,
id2
;

14 
id
 = 
	`Exec
("../test/testvm1");

15 
id2
 = 
	`Exec
("../test/testvm1");

16 
	`Još
(
id
);

17 
	`Još
(
id2
);

18 
	`Wr™e
("R•—t\n",7,
CÚsŞeOuut
);

19 
id
 = 
	`Exec
("../test/testvm1");

20 
id2
 = 
	`Exec
("../test/testvm1");

21 
	`Još
(
id
);

22 
	`Još
(
id2
);

23 
	`Wr™e
("R•—t\n",7,
CÚsŞeOuut
);

24 
id
 = 
	`Exec
("../test/testvm1");

25 
id2
 = 
	`Exec
("../test/testvm1");

26 
	`Još
(
id
);

27 
	`Još
(
id2
);

28 
	`Wr™e
("Ex™\n",5,
CÚsŞeOuut
);

29 
	}
}

	@test/testvmfork.c

1 
	~"sysÿÎ.h
"

8 
fÜkedfunc
();

9 
fÜkedfunc2
();

11 
	gbufãr
[1024*9];

13 
	$maš
()

15 
	`Wr™e
("Maš\n", 7, 
CÚsŞeOuut
);

16 
	`FÜk
(
fÜkedfunc
);

17 
	`Wr™e
("Maš-2\n", 7, 
CÚsŞeOuut
);

18 
	`Ex™
(0);

19 
	}
}

22 
	$fÜkedfunc
()

24 
	`FÜk
(
fÜkedfunc2
);

25 
	`Wr™e
("FÜked 1\n", 11, 
CÚsŞeOuut
);

26 
	`Ex™
(1);

27 
	}
}

29 
	$fÜkedfunc2
()

31 
	`Wr™e
("FÜked 2\n", 11, 
CÚsŞeOuut
);

32 
	`Ex™
(2);

33 
	}
};

	@test/testvmfork1.c

1 
	~"sysÿÎ.h
"

8 
fÜkedfunc
();

9 
fÜkedfunc2
();

11 
	gbufãr
[1024*9];

13 
	$maš
()

15 
	`Wr™e
("Maš\n", 7, 
CÚsŞeOuut
);

16 
	`FÜk
(
fÜkedfunc
);

17 
	`Wr™e
("Maš-2\n", 7, 
CÚsŞeOuut
);

18 
	`Ex™
(0);

19 
	}
}

22 
	$fÜkedfunc
()

24 
	`FÜk
(
fÜkedfunc2
);

25 
	`Wr™e
("FÜked 1\n", 11, 
CÚsŞeOuut
);

26 
	`Ex™
(1);

27 
	}
}

29 
	$fÜkedfunc2
()

31 
i
;

32 
i
=0; i<1024*9; i++)

33 
bufãr
[
i
]='a';

34 
	`Wr™e
("FÜked 2\n", 11, 
CÚsŞeOuut
);

35 
	`Ex™
(2);

36 
	}
};

	@test/vm-test.c

1 
	~<sysÿÎ.h
>

3 
	#PageSize
 128

	)

4 
	#NumPhysPages
 100

	)

6 
	gv”y_Ïrge_¬¿y
[
PageSize
 * 
NumPhysPages
 * 2];

8 
	$´št
(*
s
)

10 
Ën
 = 0;

12 *
s
++)

13 ++
Ën
;

15 
	`Wr™e
(
s
-
Ën
-1,†en, 1);

16 
	}
}

18 
	$maš
()

20 
i
;

22 
i
 = 0; i < 
NumPhysPages
 * 2; ++i) {

23 *(*)(&
v”y_Ïrge_¬¿y
[
i
 * 
PageSize
]) = i;

26 
	`´št
("Attemptedo writeo 200…ages.\n");

28 
i
 = 0; i < 
NumPhysPages
 * 2; ++i) {

29 ià(*(*)(&
v”y_Ïrge_¬¿y
[
i
 * 
PageSize
]) != i) {

30 
	`´št
("Paging failed! Read wrong value from swapped…age!\n");

34 
	`´št
("Attemptedo„ead from 200…ages.\n");

36 
	`H®t
();

37 
	}
}

	@threads/bool.h

1 #iâdeà
__NACHBOOL_H__


2 
	#__NACHBOOL_H__
 1

	)

4 
	#FALSE
 0

	)

5 
	#TRUE
 1

	)

	@threads/copyright.h

22 #ifdeà
MAIN


23 *
	gcİyright
 = "Copyright (c) 1992-1993 The Regents ofhe University of California. All„ights„eserved.";

	@threads/list.cc

18 
	~"cİyright.h
"

19 
	~"li¡.h
"

30 
	gLi¡EËm’t
::
	$Li¡EËm’t
(*
™emPŒ
, 
sÜtKey
)

32 
™em
 = 
™emPŒ
;

33 
key
 = 
sÜtKey
;

34 
Ãxt
 = 
NULL
;

35 
	}
}

43 
	gLi¡
::
	$Li¡
()

45 
fœ¡
 = 
Ï¡
 = 
NULL
;

46 
	}
}

58 
	gLi¡
::~
	$Li¡
()

60 
	`Remove
(è!ğ
NULL
)

62 
	}
}

76 
	gLi¡
::
	$Aµ’d
(*
™em
)

78 
Li¡EËm’t
 *
–em’t
 = 
Ãw
 
	`Li¡EËm’t
(
™em
, 0);

80 ià(
	`IsEm±y
()) {

81 
fœ¡
 = 
–em’t
;

82 
Ï¡
 = 
–em’t
;

84 
Ï¡
->
Ãxt
 = 
–em’t
;

85 
Ï¡
 = 
–em’t
;

87 
	}
}

101 
	gLi¡
::
	$P»³nd
(*
™em
)

103 
Li¡EËm’t
 *
–em’t
 = 
Ãw
 
	`Li¡EËm’t
(
™em
, 0);

105 ià(
	`IsEm±y
()) {

106 
fœ¡
 = 
–em’t
;

107 
Ï¡
 = 
–em’t
;

109 
–em’t
->
Ãxt
 = 
fœ¡
;

110 
fœ¡
 = 
–em’t
;

112 
	}
}

122 * 
	gLi¡
::
	$Remove
()

124  
	`SÜ‹dRemove
(
NULL
);

125 
	}
}

137 
	gLi¡
::
	$M­ÿr
(
VoidFunùiÚPŒ
 
func
)

139 
Li¡EËm’t
 *
±r
 = 
fœ¡
;…Œ !ğ
NULL
;…Œ =…Œ->
Ãxt
) {

140 
	`DEBUG
('l', "IÀm­ÿr,‡bouˆtØšvok%x(%x)\n", 
func
, 
±r
->
™em
);

141 (*
func
)(()
±r
->
™em
);

143 
	}
}

150 
boŞ
 
	gLi¡
::
	$IsEm±y
()

152 ià(
fœ¡
 =ğ
NULL
)

153  
TRUE
;

155  
FALSE
;

156 
	}
}

163 * 
	gLi¡
::
	$G‘EËm’tAt
(
šdex
)

165 
i
 = 0;

166 
Li¡EËm’t
* 
cu¼EËm’t
 = 
fœ¡
;

167 
cu¼EËm’t
 !ğ
NULL
)

169 ià(
i
 =ğ
šdex
)

171  
cu¼EËm’t
->
™em
;

173 
cu¼EËm’t
 = cu¼EËm’t->
Ãxt
;

174 
i
++;

176  
NULL
;

177 
	}
}

184 
	gLi¡
::
	$Remove
(* 
–em’t
)

186 
Li¡
 
‹mpLi¡
;

187 * 
cu¼EËm’t
 = 
	`Remove
();

190 
cu¼EËm’t
 !ğ
NULL
)

192 ià(
cu¼EËm’t
 !ğ
–em’t
) {

193 
‹mpLi¡
.
	`Aµ’d
(
cu¼EËm’t
);

195 
cu¼EËm’t
 = 
	`Remove
();

197 
cu¼EËm’t
 = 
‹mpLi¡
.
	`Remove
();

200 
cu¼EËm’t
 !ğ
NULL
)

202 
	`Aµ’d
(
cu¼EËm’t
);

203 
cu¼EËm’t
 = 
‹mpLi¡
.
	`Remove
();

205 
	}
}

211 
	gLi¡
::
	$G‘Size
()

213 
couÁ
 = 0;

214 
Li¡EËm’t
* 
cu¼EËm’t
 = 
fœ¡
;

215 
cu¼EËm’t
 !ğ
NULL
)

217 
couÁ
++;

218 
cu¼EËm’t
 = cu¼EËm’t->
Ãxt
;

220  
couÁ
;

221 
	}
}

238 
	gLi¡
::
	$SÜ‹dIn£¹
(*
™em
, 
sÜtKey
)

240 
Li¡EËm’t
 *
–em’t
 = 
Ãw
 
	`Li¡EËm’t
(
™em
, 
sÜtKey
);

241 
Li¡EËm’t
 *
±r
;

243 ià(
	`IsEm±y
()) {

244 
fœ¡
 = 
–em’t
;

245 
Ï¡
 = 
–em’t
;

246 } ià(
sÜtKey
 < 
fœ¡
->
key
) {

248 
–em’t
->
Ãxt
 = 
fœ¡
;

249 
fœ¡
 = 
–em’t
;

251 
±r
 = 
fœ¡
;…Œ->
Ãxt
 !ğ
NULL
;…tr =…tr->next) {

252 ià(
sÜtKey
 < 
±r
->
Ãxt
->
key
) {

253 
–em’t
->
Ãxt
 = 
±r
->next;

254 
±r
->
Ãxt
 = 
–em’t
;

258 
Ï¡
->
Ãxt
 = 
–em’t
;

259 
Ï¡
 = 
–em’t
;

261 
	}
}

276 * 
	gLi¡
::
	$SÜ‹dRemove
(*
keyPŒ
)

278 
Li¡EËm’t
 *
–em’t
 = 
fœ¡
;

279 *
thšg
;

281 ià(
	`IsEm±y
())

282  
NULL
;

284 
thšg
 = 
fœ¡
->
™em
;

285 ià(
fœ¡
 =ğ
Ï¡
) {

286 
fœ¡
 = 
NULL
;

287 
Ï¡
 = 
NULL
;

289 
fœ¡
 = 
–em’t
->
Ãxt
;

291 ià(
keyPŒ
 !ğ
NULL
)

292 *
keyPŒ
 = 
–em’t
->
key
;

293 
d–‘e
 
–em’t
;

294  
thšg
;

295 
	}
}

302 * 
	gLi¡
::
	$G‘Tİ
()

304 ià(
	`IsEm±y
()) {

305  
NULL
;

307  
fœ¡
->
™em
;

309 
	}
}

	@threads/list.h

13 #iâdeà
LIST_H


14 
	#LIST_H


	)

16 
	~"cİyright.h
"

17 
	~"ut™y.h
"

27 şas 
	cLi¡EËm’t
 {

28 
	mpublic
:

29 
Li¡EËm’t
(* 
™emPŒ
, 
sÜtKey
);

31 
Li¡EËm’t
* 
	mÃxt
;

33 
	mkey
;

34 * 
	m™em
;

43 şas 
	cLi¡
 {

44 
	mpublic
:

45 
Li¡
();

46 ~
Li¡
();

48 
P»³nd
(* 
™em
);

49 
Aµ’d
(* 
™em
);

50 * 
Remove
();

52 
M­ÿr
(
VoidFunùiÚPŒ
 
func
);

54 
boŞ
 
IsEm±y
();

56 * 
G‘EËm’tAt
(
šdex
);

57 
Remove
(* 
–em’t
);

58 
G‘Size
();

62 
SÜ‹dIn£¹
(* 
™em
, 
sÜtKey
);

63 * 
SÜ‹dRemove
(* 
keyPŒ
);

64 * 
G‘Tİ
();

66 
	m´iv©e
:

67 
Li¡EËm’t
* 
fœ¡
;

68 
Li¡EËm’t
* 
	mÏ¡
;

	@threads/main.cc

49 
	#MAIN


	)

50 
	~"cİyright.h
"

51 #undeà
MAIN


53 
	~"ut™y.h
"

54 
	~"sy¡em.h
"

56 #ifdeà
THREADS


57 
‹¡num
;

62 #ià
defšed
(
THREADS
è&& defšed(
CHANGED
)

63 
Th»adTe¡
();

64 
İ’Laundrom©
();

66 
Th»adTe¡
();

68 
Cİy
(*
unixFe
, *
ÇchosFe
);

69 
Pršt
(*
fe
), 
P”fÜmªûTe¡
();

70 
S¹Proûss
(*
fe
), 
CÚsŞeTe¡
(*
š
, *
out
);

71 
MaTe¡
(
ÃtwÜkID
);

88 
	$maš
(
¬gc
, **
¬gv
)

90 
¬gCouÁ
;

93 
	`DEBUG
('t', "Entering main");

94 (è
	`In™Ÿlize
(
¬gc
, 
¬gv
);

96 #ifdeà
THREADS


99 #ià
	`defšed
(
CHANGED
è&& defšed(
HW1_LAUNDRY
)

100 
numCu¡om”s
 = 0;

101 
¬gc
--, 
¬gv
++;‡rgø> 0;‡rgø-ğ
¬gCouÁ
,‡rgv +=‡rgCount) {

102 
¬gCouÁ
 = 1;

103 
¬gv
[0][1]) {

105 
numCu¡om”s
 = 
	`©oi
(
¬gv
[1]);

106 
¬gCouÁ
++;

109 
‹¡num
 = 1;

113 
	`İ’Laundrom©
(
numCu¡om”s
);

114 #–ià
	`defšed
(
CHANGED
è&& !defšed(
FILESYS
)

115 
¬gc
--, 
¬gv
++;‡rgø> 0;‡rgø-ğ
¬gCouÁ
,‡rgv +=‡rgCount) {

116 
¬gCouÁ
 = 1;

117 
¬gv
[0][1]) {

119 
‹¡num
 = 
	`©oi
(
¬gv
[1]);

120 
¬gCouÁ
++;

123 
‹¡num
 = -1;

127 
	`Th»adTe¡
(
‹¡num
);

128 #–ià!
	`defšed
(
FILESYS
)

129 
¬gc
--, 
¬gv
++;‡rgø> 0;‡rgø-ğ
¬gCouÁ
,‡rgv +=‡rgCount) {

130 
¬gCouÁ
 = 1;

131 
¬gv
[0][1]) {

133 
‹¡num
 = 
	`©oi
(
¬gv
[1]);

134 
¬gCouÁ
++;

137 
‹¡num
 = 1;

141 
	`Th»adTe¡
();

146 
¬gc
--, 
¬gv
++;‡rgø> 0;‡rgø-ğ
¬gCouÁ
,‡rgv +=‡rgCount) {

147 
¬gCouÁ
 = 1;

148 ià(!
	`¡rcmp
(*
¬gv
, "-z"))

149 
	`´štf
 (
cİyright
);

150 #ià
	`defšed
(
USER_PROGRAM
)

151 ià(!
	`¡rcmp
(*
¬gv
, "-x")) {

152 
	`ASSERT
(
¬gc
 > 1);

153 
	`S¹Proûss
(*(
¬gv
 + 1));

154 
¬gCouÁ
 = 2;

155 } ià(!
	`¡rcmp
(*
¬gv
, "-c")) {

156 ià(
¬gc
 == 1)

157 
	`CÚsŞeTe¡
(
NULL
, NULL);

159 
	`ASSERT
(
¬gc
 > 2);

160 
	`CÚsŞeTe¡
(*(
¬gv
 + 1), *(argv + 2));

161 
¬gCouÁ
 = 3;

163 
š‹¼u±
->
	`H®t
();

168 #ifdeà
FILESYS
 && !
	`defšed
(
USER_PROGRAM
è&& !defšed(
FILESYS_STUB
)

169 ià(!
	`¡rcmp
(*
¬gv
, "-cp")) {

170 
	`ASSERT
(
¬gc
 > 2);

171 
	`Cİy
(*(
¬gv
 + 1), *(argv + 2));

172 
¬gCouÁ
 = 3;

173 } ià(!
	`¡rcmp
(*
¬gv
, "-p")) {

174 
	`ASSERT
(
¬gc
 > 1);

175 
	`Pršt
(*(
¬gv
 + 1));

176 
¬gCouÁ
 = 2;

177 } ià(!
	`¡rcmp
(*
¬gv
, "-r")) {

178 
	`ASSERT
(
¬gc
 > 1);

179 
feSy¡em
->
	`Remove
(*(
¬gv
 + 1));

180 
¬gCouÁ
 = 2;

181 } ià(!
	`¡rcmp
(*
¬gv
, "-l")) {

182 
feSy¡em
->
	`Li¡
();

183 } ià(!
	`¡rcmp
(*
¬gv
, "-D")) {

184 
feSy¡em
->
	`Pršt
();

185 } ià(!
	`¡rcmp
(*
¬gv
, "-t")) {

186 
	`P”fÜmªûTe¡
();

189 #ifdeà
NETWORK


190 ià(!
	`¡rcmp
(*
¬gv
, "-o")) {

191 
	`ASSERT
(
¬gc
 > 1);

192 
	`D–ay
(2);

195 
	`MaTe¡
(
	`©oi
(*(
¬gv
 + 1)));

196 
¬gCouÁ
 = 2;

201 
cu¼’tTh»ad
->
	`Fšish
();

210 
	}
}

	@threads/scheduler.cc

21 
	~"cİyright.h
"

22 
	~"scheduËr.h
"

23 
	~"sy¡em.h
"

30 
	gScheduËr
::
	$ScheduËr
()

32 
»adyLi¡
 = 
Ãw
 
Li¡
;

33 
	}
}

40 
	gScheduËr
::~
	$ScheduËr
()

42 
d–‘e
 
»adyLi¡
;

43 
	}
}

54 
	gScheduËr
::
	$R—dyToRun
 (
Th»ad
 *
th»ad
)

56 
	`DEBUG
('t', "Pu‰šgh»ad % Ú„—dy†i¡.\n", 
th»ad
->
	`g‘Name
());

58 
th»ad
->
	`£tStus
(
READY
);

59 
»adyLi¡
->
	`Aµ’d
((*)
th»ad
);

60 
	}
}

70 
Th»ad
 *

71 
	gScheduËr
::
	$FšdNextToRun
 ()

73  (
Th»ad
 *)
»adyLi¡
->
	`Remove
();

74 
	}
}

91 
	gScheduËr
::
	$Run
 (
Th»ad
 *
ÃxtTh»ad
)

93 
Th»ad
 *
ŞdTh»ad
 = 
cu¼’tTh»ad
;

95 #ifdeà
USER_PROGRAM


96 ià(
cu¼’tTh»ad
->
¥aû
 !ğ
NULL
) {

97 
cu¼’tTh»ad
->
	`SaveU£rS‹
();

98 
cu¼’tTh»ad
->
¥aû
->
	`SaveS‹
();

102 
ŞdTh»ad
->
	`CheckOv”æow
();

105 
cu¼’tTh»ad
 = 
ÃxtTh»ad
;

106 
cu¼’tTh»ad
->
	`£tStus
(
RUNNING
);

108 
	`DEBUG
('t', "Switching fromhread \"%s\"ohread \"%s\"\n",

109 
ŞdTh»ad
->
	`g‘Name
(), 
ÃxtTh»ad
->getName());

116 
	`SWITCH
(
ŞdTh»ad
, 
ÃxtTh»ad
);

118 
	`DEBUG
('t', "Now iÀth»ad \"%s\"\n", 
cu¼’tTh»ad
->
	`g‘Name
());

124 ià(
th»adToBeDe¡royed
 !ğ
NULL
) {

125 
d–‘e
 
th»adToBeDe¡royed
;

126 
th»adToBeDe¡royed
 = 
NULL
;

129 #ifdeà
USER_PROGRAM


130 ià(
cu¼’tTh»ad
->
¥aû
 !ğ
NULL
) {

131 
cu¼’tTh»ad
->
	`Re¡ÜeU£rS‹
();

132 
cu¼’tTh»ad
->
¥aû
->
	`Re¡ÜeS‹
();

135 
	}
}

143 
	gScheduËr
::
	$Pršt
()

145 
	`´štf
("Ready†ist contents:\n");

146 
»adyLi¡
->
	`M­ÿr
((
VoidFunùiÚPŒ
è
Th»adPršt
);

147 
	}
}

	@threads/scheduler.h

9 #iâdeà
SCHEDULER_H


10 
	#SCHEDULER_H


	)

12 
	~"cİyright.h
"

13 
	~"li¡.h
"

14 
	~"th»ad.h
"

20 şas 
	cScheduËr
 {

21 
	mpublic
:

22 
ScheduËr
();

23 ~
ScheduËr
();

25 
R—dyToRun
(
Th»ad
* 
th»ad
);

26 
Th»ad
* 
FšdNextToRun
();

28 
Run
(
Th»ad
* 
ÃxtTh»ad
);

29 
Pršt
();

31 
	m´iv©e
:

32 
Li¡
 *
»adyLi¡
;

	@threads/stdarg-old.h

6 #iâdeà
_STDARG_H


7 #iâdeà
_ANSI_STDARG_H_


8 #iâdeà
__Ãed___va_li¡


9 
	#_STDARG_H


	)

10 
	#_ANSI_STDARG_H_


	)

12 #undeà
__Ãed___va_li¡


14 #ifdeà
__ş³r__


15 
	~"va-ş³r.h
"

17 #ifdeà
__m88k__


18 
	~"va-m88k.h
"

20 #ifdeà
__i860__


21 
	~"va-i860.h
"

23 #ifdeà
__hµa__


24 
	~"va-·.h
"

26 #ifdeà
__ms__


27 
	~"va-ms.h
"

29 #ifdeà
__¥¬c__


30 
	~"va-¥¬c.h
"

32 #ifdeà
__i960__


33 
	~"va-i960.h
"

35 #ifdeà
__®pha__


36 
	~"va-®pha.h
"

38 #ià
defšed
 (
__H8300__
è|| defšed (
__H8300H__
è|| defšed (
__H8300S__
)

39 
	~"va-h8300.h
"

41 #ià
defšed
 (
__PPC__
è&& (defšed (
_CALL_SYSV
è|| defšed (
_WIN32
))

42 
	~"va-µc.h
"

44 #ifdeà
__¬c__


45 
	~"va-¬c.h
"

47 #ifdeà
__M32R__


48 
	~"va-m32r.h
"

50 #ifdeà
__sh__


51 
	~"va-sh.h
"

53 #ifdeà
__mn10300__


54 
	~"va-mn10300.h
"

56 #ifdeà
__mn10200__


57 
	~"va-mn10200.h
"

59 #ifdeà
__v850__


60 
	~"va-v850.h
"

65 #iâdeà
__GNUC_VA_LIST


66 
	#__GNUC_VA_LIST


	)

67 #ià
defšed
(
__svr4__
è|| defšed(
_AIX
è|| defšed(
_M_UNIX
è|| defšed(
__N‘BSD__
)

68 *
	t__gnuc_va_li¡
;

70 *
	t__gnuc_va_li¡
;

76 #ifdeà
_STDARG_H


81 #ià
defšed
(
sysV68
)

82 
	#__va_rounded_size
(
TYPE
) \

83 ((( (
TYPE
è+  (è- 1è/  ()è*  ())

	)

85 
	#__va_rounded_size
(
TYPE
) \

86 ((( (
TYPE
è+  (è- 1è/  ()è*  ())

	)

89 
	#va_¡¬t
(
AP
, 
LASTARG
) \

90 (
AP
 = ((
__gnuc_va_li¡
è
	`__butš_Ãxt_¬g
 (
LASTARG
)))

	)

92 #undeà
va_’d


93 
va_’d
 (
__gnuc_va_li¡
);

94 
	#va_’d
(
AP
è(()0)

	)

99 #ià(
defšed
 (
__¬m__
è&& ! defšed (
__ARMEB__
)è|| defšed (
__i386__
è|| defšed (
__i860__
è|| defšed (
__ns32000__
è|| defšed (
__vax__
)

101 
	#va_¬g
(
AP
, 
TYPE
) \

102 (
AP
 = (
__gnuc_va_li¡
è((*è(APè+ 
	`__va_rounded_size
 (
TYPE
)), \

103 *((
TYPE
 *è(*è((*è(
AP
è- 
	`__va_rounded_size
 (TYPE))))

	)

106 
	#va_¬g
(
AP
, 
TYPE
) \

107 (
AP
 = (
__gnuc_va_li¡
è((*è(APè+ 
	`__va_rounded_size
 (
TYPE
)), \

108 *((
TYPE
 *è(*è((*è(
AP
) \

109 - (( (
TYPE
è< 
	`__va_rounded_size
 () \

110 ?  (
TYPE
è: 
	`__va_rounded_size
 (TYPE))))))

	)

114 
	#__va_cİy
(
de¡
, 
¤c
è(de¡èğ(¤c)

	)

135 #ifdeà
_STDARG_H


143 #ifdeà
_HIDDEN_VA_LIST


144 #undeà
_VA_LIST


147 #ifdeà
_BSD_VA_LIST


148 #undeà
_BSD_VA_LIST


151 #ià
defšed
(
__svr4__
è|| (defšed(
_SCO_DS
è&& !defšed(
__VA_LIST
))

156 #iâdeà
_VA_LIST_


157 
	#_VA_LIST_


	)

158 #ifdeà
__i860__


159 #iâdeà
_VA_LIST


160 
	#_VA_LIST
 
va_li¡


	)

163 
__gnuc_va_li¡
 
	tva_li¡
;

164 #ifdeà
_SCO_DS


165 
	#__VA_LIST


	)

174 #ià!
defšed
 (
_VA_LIST_
è|| defšed (
__BSD_NET2__
è|| defšed (
____386BSD____
è|| defšed (
__bsdi__
è|| defšed (
__£qu’t__
è|| defšed (
__F»eBSD__
è|| defšed(
WINNT
)

176 #iâdeà
_VA_LIST_DEFINED


178 #iâdeà
_VA_LIST


180 #iâdeà
_VA_LIST_T_H


181 
__gnuc_va_li¡
 
	tva_li¡
;

185 #ià!(
defšed
 (
__BSD_NET2__
è|| defšed (
____386BSD____
è|| defšed (
__bsdi__
è|| defšed (
__£qu’t__
è|| defšed (
__F»eBSD__
))

186 
	#_VA_LIST_


	)

188 #iâdeà
_VA_LIST


189 
	#_VA_LIST


	)

191 #iâdeà
_VA_LIST_DEFINED


192 
	#_VA_LIST_DEFINED


	)

194 #iâdeà
_VA_LIST_T_H


195 
	#_VA_LIST_T_H


	)

	@threads/stdarg-tmp.h

31 #iâdeà
_STDARG_H


32 #iâdeà
_ANSI_STDARG_H_


33 #iâdeà
__Ãed___va_li¡


34 
	#_STDARG_H


	)

35 
	#_ANSI_STDARG_H_


	)

37 #undeà
__Ãed___va_li¡


41 #iâdeà
__GNUC_VA_LIST


42 
	#__GNUC_VA_LIST


	)

43 
__butš_va_li¡
 
	t__gnuc_va_li¡
;

44 
	gfoo


49 #ifdeà
_STDARG_H


51 
	#va_¡¬t
(
v
,
l
è
	`__butš_va_¡¬t
(v,l)

	)

52 
	#va_’d
(
v
è
	`__butš_va_’d
(v)

	)

53 
	#va_¬g
(
v
,
l
è
	`__butš_va_¬g
(v,l)

	)

54 #ià!
defšed
(
__STRICT_ANSI__
è|| 
__STDC_VERSION__
 + 0 >= 199900L

55 
	#va_cİy
(
d
,
s
è
	`__butš_va_cİy
(d,s)

	)

57 
	#__va_cİy
(
d
,
s
è
	`__butš_va_cİy
(d,s)

	)

66 #ifdeà
_HIDDEN_VA_LIST


67 #undeà
_VA_LIST


70 #ifdeà
_BSD_VA_LIST


71 #undeà
_BSD_VA_LIST


74 #ià
defšed
(
__svr4__
è|| (defšed(
_SCO_DS
è&& !defšed(
__VA_LIST
))

79 #iâdeà
_VA_LIST_


80 
	#_VA_LIST_


	)

81 #ifdeà
__i860__


82 #iâdeà
_VA_LIST


83 
	#_VA_LIST
 
va_li¡


	)

86 
__gnuc_va_li¡
 
	tva_li¡
;

87 #ifdeà
_SCO_DS


88 
	#__VA_LIST


	)

97 #ià!
defšed
 (
_VA_LIST_
è|| defšed (
__BSD_NET2__
è|| defšed (
____386BSD____
è|| defšed (
__bsdi__
è|| defšed (
__£qu’t__
è|| defšed (
__F»eBSD__
è|| defšed(
WINNT
)

99 #iâdeà
_VA_LIST_DEFINED


101 #iâdeà
_VA_LIST


103 #iâdeà
_VA_LIST_T_H


105 #iâdeà
__va_li¡__


106 
__gnuc_va_li¡
 
	tva_li¡
;

111 #ià!(
defšed
 (
__BSD_NET2__
è|| defšed (
____386BSD____
è|| defšed (
__bsdi__
è|| defšed (
__£qu’t__
è|| defšed (
__F»eBSD__
))

112 
	#_VA_LIST_


	)

114 #iâdeà
_VA_LIST


115 
	#_VA_LIST


	)

117 #iâdeà
_VA_LIST_DEFINED


118 
	#_VA_LIST_DEFINED


	)

120 #iâdeà
_VA_LIST_T_H


121 
	#_VA_LIST_T_H


	)

123 #iâdeà
__va_li¡__


124 
	#__va_li¡__


	)

	@threads/stdarg.h

6 #iâdeà
_STDARG_H


7 #iâdeà
_ANSI_STDARG_H_


8 #iâdeà
__Ãed___va_li¡


9 
	#_STDARG_H


	)

10 
	#_ANSI_STDARG_H_


	)

12 #undeà
__Ãed___va_li¡


14 #ifdeà
__ş³r__


15 
	~"va-ş³r.h
"

17 #ifdeà
__m88k__


18 
	~"va-m88k.h
"

20 #ifdeà
__i860__


21 
	~"va-i860.h
"

23 #ifdeà
__hµa__


24 
	~"va-·.h
"

26 #ifdeà
__ms__


27 
	~"va-ms.h
"

29 #ifdeà
__¥¬c__


30 
	~"va-¥¬c.h
"

32 #ifdeà
__i960__


33 
	~"va-i960.h
"

35 #ifdeà
__®pha__


36 
	~"va-®pha.h
"

38 #ià
defšed
 (
__H8300__
è|| defšed (
__H8300H__
è|| defšed (
__H8300S__
)

39 
	~"va-h8300.h
"

41 #ià
defšed
 (
__PPC__
è&& (defšed (
_CALL_SYSV
è|| defšed (
_WIN32
))

42 
	~"va-µc.h
"

44 #ifdeà
__¬c__


45 
	~"va-¬c.h
"

47 #ifdeà
__M32R__


48 
	~"va-m32r.h
"

50 #ifdeà
__sh__


51 
	~"va-sh.h
"

53 #ifdeà
__mn10300__


54 
	~"va-mn10300.h
"

56 #ifdeà
__mn10200__


57 
	~"va-mn10200.h
"

59 #ifdeà
__v850__


60 
	~"va-v850.h
"

65 #iâdeà
__GNUC_VA_LIST


66 
	#__GNUC_VA_LIST


	)

67 #ià
defšed
(
__svr4__
è|| defšed(
_AIX
è|| defšed(
_M_UNIX
è|| defšed(
__N‘BSD__
)

68 *
	t__gnuc_va_li¡
;

70 *
	t__gnuc_va_li¡
;

76 #ifdeà
_STDARG_H


81 #ià
defšed
(
sysV68
)

82 
	#__va_rounded_size
(
TYPE
) \

83 ((( (
TYPE
è+  (è- 1è/  ()è*  ())

	)

85 
	#__va_rounded_size
(
TYPE
) \

86 ((( (
TYPE
è+  (è- 1è/  ()è*  ())

	)

89 
	#va_¡¬t
(
AP
, 
LASTARG
) \

90 (
AP
 = ((
__gnuc_va_li¡
è
	`__butš_Ãxt_¬g
 (
LASTARG
)))

	)

92 #undeà
va_’d


93 
va_’d
 (
__gnuc_va_li¡
);

94 
	#va_’d
(
AP
è(()0)

	)

99 #ià(
defšed
 (
__¬m__
è&& ! defšed (
__ARMEB__
)è|| defšed (
__i386__
è|| defšed (
__i860__
è|| defšed (
__ns32000__
è|| defšed (
__vax__
)

101 
	#va_¬g
(
AP
, 
TYPE
) \

102 (
AP
 = (
__gnuc_va_li¡
è((*è(APè+ 
	`__va_rounded_size
 (
TYPE
)), \

103 *((
TYPE
 *è(*è((*è(
AP
è- 
	`__va_rounded_size
 (TYPE))))

	)

106 
	#va_¬g
(
AP
, 
TYPE
) \

107 (
AP
 = (
__gnuc_va_li¡
è((*è(APè+ 
	`__va_rounded_size
 (
TYPE
)), \

108 *((
TYPE
 *è(*è((*è(
AP
) \

109 - (( (
TYPE
è< 
	`__va_rounded_size
 () \

110 ?  (
TYPE
è: 
	`__va_rounded_size
 (TYPE))))))

	)

114 
	#__va_cİy
(
de¡
, 
¤c
è(de¡èğ(¤c)

	)

135 #ifdeà
_STDARG_H


143 #ifdeà
_HIDDEN_VA_LIST


144 #undeà
_VA_LIST


147 #ifdeà
_BSD_VA_LIST


148 #undeà
_BSD_VA_LIST


151 #ià
defšed
(
__svr4__
è|| (defšed(
_SCO_DS
è&& !defšed(
__VA_LIST
))

156 #iâdeà
_VA_LIST_


157 
	#_VA_LIST_


	)

158 #ifdeà
__i860__


159 #iâdeà
_VA_LIST


160 
	#_VA_LIST
 
va_li¡


	)

163 
__gnuc_va_li¡
 
	tva_li¡
;

164 #ifdeà
_SCO_DS


165 
	#__VA_LIST


	)

174 #ià!
defšed
 (
_VA_LIST_
è|| defšed (
__BSD_NET2__
è|| defšed (
____386BSD____
è|| defšed (
__bsdi__
è|| defšed (
__£qu’t__
è|| defšed (
__F»eBSD__
è|| defšed(
WINNT
)

176 #iâdeà
_VA_LIST_DEFINED


178 #iâdeà
_VA_LIST


180 #iâdeà
_VA_LIST_T_H


181 
__gnuc_va_li¡
 
	tva_li¡
;

185 #ià!(
defšed
 (
__BSD_NET2__
è|| defšed (
____386BSD____
è|| defšed (
__bsdi__
è|| defšed (
__£qu’t__
è|| defšed (
__F»eBSD__
))

186 
	#_VA_LIST_


	)

188 #iâdeà
_VA_LIST


189 
	#_VA_LIST


	)

191 #iâdeà
_VA_LIST_DEFINED


192 
	#_VA_LIST_DEFINED


	)

194 #iâdeà
_VA_LIST_T_H


195 
	#_VA_LIST_T_H


	)

	@threads/switch.h

17 #iâdeà
SWITCH_H


18 
	#SWITCH_H


	)

20 
	~"cİyright.h
"

22 #ifdeà
HOST_MIPS


28 
	#SP
 0

	)

29 
	#S0
 4

	)

30 
	#S1
 8

	)

31 
	#S2
 12

	)

32 
	#S3
 16

	)

33 
	#S4
 20

	)

34 
	#S5
 24

	)

35 
	#S6
 28

	)

36 
	#S7
 32

	)

37 
	#FP
 36

	)

38 
	#PC
 40

	)

50 
	#In™ŸlPC
 
s0


	)

51 
	#In™ŸlArg
 
s1


	)

52 
	#Wh’DÚePC
 
s2


	)

53 
	#S¹upPC
 
s3


	)

55 
	#PCS‹
 (
PC
/4-1)

	)

56 
	#FPS‹
 (
FP
/4-1)

	)

57 
	#In™ŸlPCS‹
 (
S0
/4-1)

	)

58 
	#In™ŸlArgS‹
 (
S1
/4-1)

	)

59 
	#Wh’DÚePCS‹
 (
S2
/4-1)

	)

60 
	#S¹upPCS‹
 (
S3
/4-1)

	)

64 #ifdeà
HOST_SPARC


67 
	#I0
 4

	)

68 
	#I1
 8

	)

69 
	#I2
 12

	)

70 
	#I3
 16

	)

71 
	#I4
 20

	)

72 
	#I5
 24

	)

73 
	#I6
 28

	)

74 
	#I7
 32

	)

77 
	#FP
 
I6


	)

78 
	#PC
 
I7


	)

81 
	#In™ŸlPC
 %
o0


	)

82 
	#In™ŸlArg
 %
o1


	)

83 
	#Wh’DÚePC
 %
o2


	)

84 
	#S¹upPC
 %
o3


	)

86 
	#PCS‹
 (
PC
/4-1)

	)

87 
	#In™ŸlPCS‹
 (
I0
/4-1)

	)

88 
	#In™ŸlArgS‹
 (
I1
/4-1)

	)

89 
	#Wh’DÚePCS‹
 (
I2
/4-1)

	)

90 
	#S¹upPCS‹
 (
I3
/4-1)

	)

93 #ifdeà
HOST_SNAKE


96 
	#SP
 0

	)

97 
	#S0
 4

	)

98 
	#S1
 8

	)

99 
	#S2
 12

	)

100 
	#S3
 16

	)

101 
	#S4
 20

	)

102 
	#S5
 24

	)

103 
	#S6
 28

	)

104 
	#S7
 32

	)

105 
	#S8
 36

	)

106 
	#S9
 40

	)

107 
	#S10
 44

	)

108 
	#S11
 48

	)

109 
	#S12
 52

	)

110 
	#S13
 56

	)

111 
	#S14
 60

	)

112 
	#S15
 64

	)

113 
	#PC
 68

	)

116 
	#In™ŸlPC
 %
r3


	)

117 
	#In™ŸlArg
 %
r4


	)

118 
	#Wh’DÚePC
 %
r5


	)

119 
	#S¹upPC
 %
r6


	)

121 
	#PCS‹
 (
PC
/4-1)

	)

122 
	#In™ŸlPCS‹
 (
S0
/4-1)

	)

123 
	#In™ŸlArgS‹
 (
S1
/4-1)

	)

124 
	#Wh’DÚePCS‹
 (
S2
/4-1)

	)

125 
	#S¹upPCS‹
 (
S3
/4-1)

	)

128 #ifdeà
HOST_i386


131 
	#_ESP
 0

	)

132 
	#_EAX
 4

	)

133 
	#_EBX
 8

	)

134 
	#_ECX
 12

	)

135 
	#_EDX
 16

	)

136 
	#_EBP
 20

	)

137 
	#_ESI
 24

	)

138 
	#_EDI
 28

	)

139 
	#_PC
 32

	)

142 
	#PCS‹
 (
_PC
/4-1)

	)

143 
	#FPS‹
 (
_EBP
/4-1)

	)

144 
	#In™ŸlPCS‹
 (
_ESI
/4-1)

	)

145 
	#In™ŸlArgS‹
 (
_EDX
/4-1)

	)

146 
	#Wh’DÚePCS‹
 (
_EDI
/4-1)

	)

147 
	#S¹upPCS‹
 (
_ECX
/4-1)

	)

149 
	#In™ŸlPC
 %
esi


	)

150 
	#In™ŸlArg
 %
edx


	)

151 
	#Wh’DÚePC
 %
edi


	)

152 
	#S¹upPC
 %
ecx


	)

	@threads/synch.cc

24 
	~"cİyright.h
"

25 
	~"synch.h
"

26 
	~"sy¡em.h
"

29 cÚ¡ 
	gLOCK_BUSY
 = 0;

30 cÚ¡ 
	gLOCK_FREE
 = 1;

40 
	gSem­hÜe
::
	$Sem­hÜe
(* 
debugName
, 
š™ŸlV®ue
) {

42 
Çme
 = 
debugName
;

43 
v®ue
 = 
š™ŸlV®ue
;

44 
queue
 = 
Ãw
 
Li¡
;

45 
	}
}

53 
	gSem­hÜe
::~
	$Sem­hÜe
() {

55 
d–‘e
 
queue
;

56 
	}
}

68 
	gSem­hÜe
::
	$P
() {

70 
IÁStus
 
ŞdLev–
 = 
š‹¼u±
->
	`S‘Lev–
(
IÁOff
);

72 
v®ue
 == 0) {

73 
queue
->
	`Aµ’d
((*)
cu¼’tTh»ad
);

74 
cu¼’tTh»ad
->
	`SË•
();

76 
v®ue
--;

79 (è
š‹¼u±
->
	`S‘Lev–
(
ŞdLev–
);

80 
	}
}

90 
	gSem­hÜe
::
	$V
() {

92 
Th»ad
 *
th»ad
;

93 
IÁStus
 
ŞdLev–
 = 
š‹¼u±
->
	`S‘Lev–
(
IÁOff
);

95 
th»ad
 = (
Th»ad
 *)
queue
->
	`Remove
();

96 ià(
th»ad
 !ğ
NULL
)

97 
scheduËr
->
	`R—dyToRun
(
th»ad
);

98 
v®ue
++;

99 (è
š‹¼u±
->
	`S‘Lev–
(
ŞdLev–
);

100 
	}
}

102 #ifdeà
CHANGED


111 
	gLock
::
	$Lock
(* 
debugName
) {

113 
Çme
 = 
debugName
;

114 
v®ue
 = 
LOCK_FREE
;

115 
queue
 = 
Ãw
 
Li¡
;

116 
	}
}

123 
	gLock
::~
	$Lock
() {

125 
d–‘e
 
queue
;

126 
	}
}

138 
	gLock
::
	$Acquœe
() {

140 
	`DEBUG
('t', "Cu¼’ˆth»ad %x: Acquœšg†ock\n", 
cu¼’tTh»ad
);

141 
IÁStus
 
ŞdLev–
 = 
š‹¼u±
->
	`S‘Lev–
(
IÁOff
);

143 
v®ue
 =ğ
LOCK_BUSY
) {

144 
queue
->
	`Aµ’d
((*)
cu¼’tTh»ad
);

145 
cu¼’tTh»ad
->
	`SË•
();

147 
v®ue
 = 
LOCK_BUSY
;

148 
lockšgTh»ad
 = 
cu¼’tTh»ad
;

150 (è
š‹¼u±
->
	`S‘Lev–
(
ŞdLev–
);

151 
	}
}

162 
	gLock
::
	$R–—£
() {

164 ià(
	`isH–dByCu¼’tTh»ad
()) {

166 
	`DEBUG
('t', "Cu¼’ˆth»ad %x: R–—sšg†ock\n", 
cu¼’tTh»ad
);

167 
Th»ad
* 
th»ad
;

168 
IÁStus
 
ŞdLev–
 = 
š‹¼u±
->
	`S‘Lev–
(
IÁOff
);

170 
th»ad
 = (
Th»ad
*)
queue
->
	`Remove
();

171 ià(
th»ad
 !ğ
NULL
) {

172 
scheduËr
->
	`R—dyToRun
(
th»ad
);

174 
v®ue
 = 
LOCK_FREE
;

175 (è
š‹¼u±
->
	`S‘Lev–
(
ŞdLev–
);

177 
	}
}

185 
boŞ
 
	gLock
::
	$isH–dByCu¼’tTh»ad
() {

187  (
cu¼’tTh»ad
 =ğ
lockšgTh»ad
);

188 
	}
}

195 
	gCÚd™iÚ
::
	$CÚd™iÚ
(* 
debugName
) {

197 
Çme
 = 
debugName
;

198 
queue
 = 
Ãw
 
Li¡
;

199 
	}
}

206 
	gCÚd™iÚ
::~
	$CÚd™iÚ
() {

208 
d–‘e
 
queue
;

209 
	}
}

220 
	gCÚd™iÚ
::
	$Wa™
(
Lock
* 
cÚd™iÚLock
) {

222 ià(
cÚd™iÚLock
->
	`isH–dByCu¼’tTh»ad
()) {

224 
IÁStus
 
ŞdLev–
 = 
š‹¼u±
->
	`S‘Lev–
(
IÁOff
);

226 
queue
->
	`Aµ’d
((*)
cu¼’tTh»ad
);

227 
cÚd™iÚLock
->
	`R–—£
();

228 
cu¼’tTh»ad
->
	`SË•
();

230 (è
š‹¼u±
->
	`S‘Lev–
(
ŞdLev–
);

231 
cÚd™iÚLock
->
	`Acquœe
();

233 
	}
}

240 
	gCÚd™iÚ
::
	$SigÇl
(
Lock
* 
cÚd™iÚLock
) {

242 ià(
cÚd™iÚLock
->
	`isH–dByCu¼’tTh»ad
()) {

244 
IÁStus
 
ŞdLev–
 = 
š‹¼u±
->
	`S‘Lev–
(
IÁOff
);

246 
Th»ad
* 
th»ad
;

247 
th»ad
 = (
Th»ad
*)
queue
->
	`Remove
();

248 ià(
th»ad
 !ğ
NULL
) {

249 
scheduËr
->
	`R—dyToRun
(
th»ad
);

251 
	`DEBUG
('t', "no morehreads‡re waiting onhis condition.");

254 (è
š‹¼u±
->
	`S‘Lev–
(
ŞdLev–
);

256 
	}
}

263 
	gCÚd™iÚ
::
	$Brßdÿ¡
(
Lock
* 
cÚd™iÚLock
)

265 ià(
cÚd™iÚLock
->
	`isH–dByCu¼’tTh»ad
()) {

267 
IÁStus
 
ŞdLev–
 = 
š‹¼u±
->
	`S‘Lev–
(
IÁOff
);

269 
Th»ad
* 
th»ad
;

270 
boŞ
 
mÜeWa™šgTh»ads
 = 
Œue
;

272 
mÜeWa™šgTh»ads
) {

274 
th»ad
 = (
Th»ad
*)
queue
->
	`Remove
();

276 ià(
th»ad
 !ğ
NULL
) {

277 
scheduËr
->
	`R—dyToRun
(
th»ad
);

279 
	`DEBUG
('t', "No morehreads‡re waiting onhis condition.\n");

280 
mÜeWa™šgTh»ads
 = 
çl£
;

284 (è
š‹¼u±
->
	`S‘Lev–
(
ŞdLev–
);

286 
	}
}

290 
	gLock
::
	$Lock
(* 
debugName
è{
	}
}

291 
Lock
::~
	$Lock
(è{
	}
}

292 
Lock
::
	$Acquœe
(è{
	}
}

293 
Lock
::
	$R–—£
(){
	}
}

295 
CÚd™iÚ
::
	$CÚd™iÚ
(* 
debugName
è{ 
	}
}

296 
CÚd™iÚ
::~
	$CÚd™iÚ
(è{ 
	}
}

297 
CÚd™iÚ
::
	$Wa™
(
Lock
* 
cÚd™iÚLock
è{ 
	`ASSERT
(
FALSE
); 
	}
}

298 
	gCÚd™iÚ
::
	$SigÇl
(
Lock
* 
cÚd™iÚLock
è{ 
	}
}

299 
CÚd™iÚ
::
	$Brßdÿ¡
(
Lock
* 
cÚd™iÚLock
è{ 
	}
}

	@threads/synch.h

17 #iâdeà
SYNCH_H


18 
	#SYNCH_H


	)

20 
	~"cİyright.h
"

21 
	~"th»ad.h
"

22 
	~"li¡.h
"

39 şas 
	cSem­hÜe
 {

40 
	mpublic
:

41 
Sem­hÜe
(* 
debugName
, 
š™ŸlV®ue
);

42 ~
Sem­hÜe
();

43 * 
	$g‘Name
(è{  
Çme
;}

45 
	`P
();

46 
	`V
();

48 
´iv©e
:

49 * 
Çme
;

50 
v®ue
;

51 
Li¡
 *
queue
;

52 
	}
};

66 şas 
	cLock
 {

67 
	mpublic
:

68 
Lock
(* 
debugName
);

69 ~
Lock
();

70 * 
	$g‘Name
(è{  
Çme
; }

72 
	`Acquœe
();

73 
	`R–—£
();

75 
boŞ
 
	`isH–dByCu¼’tTh»ad
();

80 
´iv©e
:

81 * 
Çme
;

82 #ifdeà
CHANGED


84 
v®ue
;

85 
Li¡
* 
queue
;

86 
Th»ad
* 
lockšgTh»ad
;

89 
	}
};

123 şas 
	cCÚd™iÚ
 {

124 
	mpublic
:

125 
CÚd™iÚ
(* 
debugName
);

127 ~
CÚd™iÚ
();

128 * 
	$g‘Name
(è{  (
Çme
); }

130 
	`Wa™
(
Lock
 *
cÚd™iÚLock
);

134 
	`SigÇl
(
Lock
 *
cÚd™iÚLock
);

135 
	`Brßdÿ¡
(
Lock
 *
cÚd™iÚLock
);

138 
´iv©e
:

139 * 
Çme
;

141 #ifdeà
CHANGED


142 
Li¡
* 
queue
;

144 
	}
};

	@threads/synchlist.cc

15 
	~"cİyright.h
"

16 
	~"synchli¡.h
"

25 
	gSynchLi¡
::
	$SynchLi¡
()

27 
li¡
 = 
Ãw
 
	`Li¡
();

28 
lock
 = 
Ãw
 
	`Lock
("list†ock");

29 
li¡Em±y
 = 
Ãw
 
	`CÚd™iÚ
("listƒmpty cond");

30 
	}
}

37 
	gSynchLi¡
::~
	$SynchLi¡
()

39 
d–‘e
 
li¡
;

40 
d–‘e
 
lock
;

41 
d–‘e
 
li¡Em±y
;

42 
	}
}

54 
	gSynchLi¡
::
	$Aµ’d
(*
™em
)

56 
lock
->
	`Acquœe
();

57 
li¡
->
	`Aµ’d
(
™em
);

58 
li¡Em±y
->
	`SigÇl
(
lock
);

59 
lock
->
	`R–—£
();

60 
	}
}

71 
	gSynchLi¡
::
	$Remove
()

73 *
™em
;

75 
lock
->
	`Acquœe
();

76 
li¡
->
	`IsEm±y
())

77 
li¡Em±y
->
	`Wa™
(
lock
);

78 
™em
 = 
li¡
->
	`Remove
();

79 
	`ASSERT
(
™em
 !ğ
NULL
);

80 
lock
->
	`R–—£
();

81  
™em
;

82 
	}
}

93 
	gSynchLi¡
::
	$M­ÿr
(
VoidFunùiÚPŒ
 
func
)

95 
lock
->
	`Acquœe
();

96 
li¡
->
	`M­ÿr
(
func
);

97 
lock
->
	`R–—£
();

98 
	}
}

	@threads/synchlist.h

11 #iâdeà
SYNCHLIST_H


12 
	#SYNCHLIST_H


	)

14 
	~"cİyright.h
"

15 
	~"li¡.h
"

16 
	~"synch.h
"

24 şas 
	cSynchLi¡
 {

25 
	mpublic
:

26 
SynchLi¡
();

27 ~
SynchLi¡
();

29 
Aµ’d
(*
™em
);

31 *
Remove
();

34 
M­ÿr
(
VoidFunùiÚPŒ
 
func
);

36 
	m´iv©e
:

37 
Li¡
 *
li¡
;

38 
Lock
 *
	mlock
;

39 
CÚd™iÚ
 *
	mli¡Em±y
;

	@threads/system.cc

8 
	~"cİyright.h
"

9 
	~"sy¡em.h
"

10 
	~"synch.h
"

15 
Th»ad
 *
	gcu¼’tTh»ad
;

16 
Th»ad
 *
	gth»adToBeDe¡royed
;

17 
ScheduËr
 *
	gscheduËr
;

18 
IÁ”ru±
 *
	gš‹¼u±
;

19 
Sti¡ics
 *
	g¡©s
;

20 
Tim”
 *
	gtim”
;

23 #ifdeà
FILESYS_NEEDED


24 
FeSy¡em
 *
	gfeSy¡em
;

27 #ifdeà
FILESYS


28 
SynchDisk
 *
	gsynchDisk
;

31 #ifdeà
USER_PROGRAM


32 
Machše
 *
	gmachše
;

33 
Lock
* 
	gmachšeLock
;

35 
	gdiskBufãr
[
PageSize
];

36 
Lock
* 
	gdiskBufãrLock
;

38 
MemÜyMªag”
 *
	gmemÜyMªag”
;

39 
Lock
* 
	gmemMªag”Lock
;

41 
ProûssMªag”
 *
	g´oûssMªag”
;

42 
Lock
* 
	g´oûssMªag”Lock
;

44 
SysO³nFeMªag”
 *
	gfeMªag”
;

45 
Lock
* 
	gfeMªag”Lock
;

49 #ifdeà
VM


50 
Vœtu®MemÜyMªag”
 *
	gvœtu®MemÜyMªag”
;

51 
Lock
* 
	gvœtMemMªag”Lock
;

54 #ifdeà
NETWORK


55 
Po¡Offiû
 *
	gpo¡Offiû
;

59 
CËªup
();

79 
	$Tim”IÁ”ru±HªdËr
(
dummy
)

81 ià(
š‹¼u±
->
	`g‘Stus
(è!ğ
IdËMode
)

82 
š‹¼u±
->
	`Y›ldOnR‘uº
();

83 
	}
}

96 
	$In™Ÿlize
(
¬gc
, **
¬gv
)

98 
¬gCouÁ
;

99 * 
debugArgs
 = "";

100 
boŞ
 
¿ndomY›ld
 = 
FALSE
;

102 #ifdeà
USER_PROGRAM


103 
boŞ
 
debugU£rProg
 = 
FALSE
;

105 #ifdeà
FILESYS_NEEDED


106 
boŞ
 
fÜm©
 = 
FALSE
;

108 #ifdeà
NETWORK


109 
»ly
 = 1;

110 
ÃŠame
 = 0;

113 
¬gc
--, 
¬gv
++;‡rgø> 0;‡rgø-ğ
¬gCouÁ
,‡rgv +=‡rgCount) {

114 
¬gCouÁ
 = 1;

115 ià(!
	`¡rcmp
(*
¬gv
, "-d")) {

116 ià(
¬gc
 == 1)

117 
debugArgs
 = "+";

119 
debugArgs
 = *(
¬gv
 + 1);

120 
¬gCouÁ
 = 2;

122 } ià(!
	`¡rcmp
(*
¬gv
, "-rs")) {

123 
	`ASSERT
(
¬gc
 > 1);

124 
	`RªdomIn™
(
	`©oi
(*(
¬gv
 + 1)));

126 
¿ndomY›ld
 = 
TRUE
;

127 
¬gCouÁ
 = 2;

129 #ifdeà
USER_PROGRAM


130 ià(!
	`¡rcmp
(*
¬gv
, "-s"))

131 
debugU£rProg
 = 
TRUE
;

133 #ifdeà
FILESYS_NEEDED


134 ià(!
	`¡rcmp
(*
¬gv
, "-f"))

135 
fÜm©
 = 
TRUE
;

137 #ifdeà
NETWORK


138 ià(!
	`¡rcmp
(*
¬gv
, "-l")) {

139 
	`ASSERT
(
¬gc
 > 1);

140 
»ly
 = 
	`©of
(*(
¬gv
 + 1));

141 
¬gCouÁ
 = 2;

142 } ià(!
	`¡rcmp
(*
¬gv
, "-m")) {

143 
	`ASSERT
(
¬gc
 > 1);

144 
ÃŠame
 = 
	`©oi
(*(
¬gv
 + 1));

145 
¬gCouÁ
 = 2;

150 
	`DebugIn™
(
debugArgs
);

151 
¡©s
 = 
Ãw
 
	`Sti¡ics
();

152 
š‹¼u±
 = 
Ãw
 
IÁ”ru±
;

153 
scheduËr
 = 
Ãw
 
	`ScheduËr
();

154 ià(
¿ndomY›ld
)

155 
tim”
 = 
Ãw
 
	`Tim”
(
Tim”IÁ”ru±HªdËr
, 0, 
¿ndomY›ld
);

157 
th»adToBeDe¡royed
 = 
NULL
;

162 
cu¼’tTh»ad
 = 
Ãw
 
	`Th»ad
("main");

163 
cu¼’tTh»ad
->
	`£tStus
(
RUNNING
);

165 
š‹¼u±
->
	`EÇbË
();

166 
	`C®lOnU£rAbÜt
(
CËªup
);

168 #ifdeà
USER_PROGRAM


169 
machše
 = 
Ãw
 
	`Machše
(
debugU£rProg
);

170 
machšeLock
 = 
Ãw
 
	`Lock
("machineLock");

172 
memÜyMªag”
 = 
Ãw
 
	`MemÜyMªag”
();

173 
memMªag”Lock
 = 
Ãw
 
	`Lock
("memManagerLock");

175 
diskBufãrLock
 = 
Ãw
 
	`Lock
("diskBufferLock");

177 
´oûssMªag”
 = 
Ãw
 
	`ProûssMªag”
();

178 
´oûssMªag”Lock
 = 
Ãw
 
	`Lock
("processManagerLock");

180 
feMªag”
 = 
Ãw
 
	`SysO³nFeMªag”
();

181 
feMªag”Lock
 = 
Ãw
 
	`Lock
("fileManagerLock");

185 #ifdeà
VM


186 
vœtu®MemÜyMªag”
 = 
Ãw
 
	`Vœtu®MemÜyMªag”
();

187 
vœtMemMªag”Lock
 = 
Ãw
 
	`Lock
("virtMemManagerLock");

190 #ifdeà
FILESYS


191 
synchDisk
 = 
Ãw
 
	`SynchDisk
("DISK");

194 #ifdeà
FILESYS_NEEDED


195 
feSy¡em
 = 
Ãw
 
	`FeSy¡em
(
fÜm©
);

198 #ifdeà
NETWORK


199 
po¡Offiû
 = 
Ãw
 
	`Po¡Offiû
(
ÃŠame
, 
»ly
, 10);

201 
	}
}

208 
	$CËªup
()

211 #ifdeà
NETWORK


212 
d–‘e
 
po¡Offiû
;

215 #ifdeà
USER_PROGRAM


216 
d–‘e
 
machše
;

217 
d–‘e
 
machšeLock
;

219 
d–‘e
 
memÜyMªag”
;

220 
d–‘e
 
memMªag”Lock
;

222 
d–‘e
 
diskBufãrLock
;

224 
d–‘e
 
´oûssMªag”
;

225 
d–‘e
 
´oûssMªag”Lock
;

227 
d–‘e
 
feMªag”
;

228 
d–‘e
 
feMªag”Lock
;

232 #ifdeà
VM


233 
d–‘e
 
vœtu®MemÜyMªag”
;

234 
d–‘e
 
vœtMemMªag”Lock
;

237 #ifdeà
FILESYS_NEEDED


238 
d–‘e
 
feSy¡em
;

241 #ifdeà
FILESYS


242 
d–‘e
 
synchDisk
;

245 
d–‘e
 
tim”
;

246 
d–‘e
 
scheduËr
;

247 
d–‘e
 
š‹¼u±
;

249 
	`Ex™
(0);

250 
	}
}

	@threads/system.h

8 #iâdeà
SYSTEM_H


9 
	#SYSTEM_H


	)

11 
	~"cİyright.h
"

12 
	~"ut™y.h
"

13 
	~"th»ad.h
"

14 
	~"scheduËr.h
"

15 
	~"š‹¼u±.h
"

16 
	~"¡©s.h
"

17 
	~"tim”.h
"

20 
In™Ÿlize
(
¬gc
, **
¬gv
);

22 
CËªup
();

25 
Th»ad
 *
cu¼’tTh»ad
;

26 
Th»ad
 *
th»adToBeDe¡royed
;

27 
ScheduËr
 *
scheduËr
;

28 
IÁ”ru±
 *
š‹¼u±
;

29 
Sti¡ics
 *
¡©s
;

30 
Tim”
 *
tim”
;

32 #ifdeà
USER_PROGRAM


34 
	~"synch.h
"

35 
	~"´oûssmªag”.h
"

36 
	~"memÜymªag”.h
"

37 
	~"machše.h
"

38 
	~"İ’femªag”.h
"

40 
Machše
* 
machše
;

41 
Lock
* 
machšeLock
;

43 
diskBufãr
[
PageSize
];

44 
Lock
* 
diskBufãrLock
;

46 
MemÜyMªag”
*
memÜyMªag”
;

47 
Lock
* 
memMªag”Lock
;

49 
ProûssMªag”
* 
´oûssMªag”
;

50 
Lock
* 
´oûssMªag”Lock
;

52 
SysO³nFeMªag”
* 
feMªag”
;

53 
Lock
* 
feMªag”Lock
;

57 #ifdeà
VM


58 
	~"vœtu®memÜymªag”.h
"

59 
Vœtu®MemÜyMªag”
*
vœtu®MemÜyMªag”
;

60 
Lock
* 
vœtMemMªag”Lock
;

63 #ifdeà
FILESYS_NEEDED


64 
	~"fesys.h
"

65 
FeSy¡em
 *
feSy¡em
;

68 #ifdeà
FILESYS


69 
	~"synchdisk.h
"

70 
SynchDisk
 *
synchDisk
;

73 #ifdeà
NETWORK


74 
	~"po¡.h
"

75 
Po¡Offiû
* 
po¡Offiû
;

	@threads/thread.cc

17 
	~"cİyright.h
"

18 
	~"th»ad.h
"

19 
	~"sw™ch.h
"

20 
	~"synch.h
"

21 
	~"sy¡em.h
"

23 
	#STACK_FENCEPOST
 0xdeadbeef

26 

	)

35 
	gTh»ad
::
	$Th»ad
(* 
th»adName
)

37 
Çme
 = 
th»adName
;

38 
¡ackTİ
 = 
NULL
;

39 
¡ack
 = 
NULL
;

40 
¡©us
 = 
JUST_CREATED
;

41 #ifdeà
USER_PROGRAM


42 
¥aû
 = 
NULL
;

44 
	}
}

58 
	gTh»ad
::~
	$Th»ad
()

60 
	`DEBUG
('t', "D–‘šgh»ad \"%s\"\n", 
Çme
);

62 
	`ASSERT
(
this
 !ğ
cu¼’tTh»ad
);

63 ià(
¡ack
 !ğ
NULL
)

64 
	`D—ÎocBoundedA¼ay
((*è
¡ack
, 
SckSize
 * ());

65 
	}
}

88 
	gTh»ad
::
	$FÜk
(
VoidFunùiÚPŒ
 
func
, 
¬g
)

90 
	`DEBUG
('t', "Forkinghread \"%s\" with func = 0x%x,‡rg = %d\n",

91 
Çme
, (è
func
, 
¬g
);

93 
	`SckAÎoÿ‹
(
func
, 
¬g
);

95 
IÁStus
 
ŞdLev–
 = 
š‹¼u±
->
	`S‘Lev–
(
IÁOff
);

96 
scheduËr
->
	`R—dyToRun
(
this
);

98 (è
š‹¼u±
->
	`S‘Lev–
(
ŞdLev–
);

99 
	}
}

117 
	gTh»ad
::
	$CheckOv”æow
()

119 ià(
¡ack
 !ğ
NULL
)

120 #ifdeà
HOST_SNAKE


121 
	`ASSERT
(
¡ack
[
SckSize
 - 1] =ğ
STACK_FENCEPOST
);

123 
	`ASSERT
((è*
¡ack
 =ğ(è
STACK_FENCEPOST
);

125 
	}
}

144 
	gTh»ad
::
	$Fšish
 ()

146 (è
š‹¼u±
->
	`S‘Lev–
(
IÁOff
);

147 
	`ASSERT
(
this
 =ğ
cu¼’tTh»ad
);

149 
	`DEBUG
('t', "Fšishšgh»ad \"%s\"\n", 
	`g‘Name
());

151 
th»adToBeDe¡royed
 = 
cu¼’tTh»ad
;

152 
	`SË•
();

154 
	}
}

175 
	gTh»ad
::
	$Y›ld
 ()

177 
Th»ad
 *
ÃxtTh»ad
;

178 
IÁStus
 
ŞdLev–
 = 
š‹¼u±
->
	`S‘Lev–
(
IÁOff
);

180 
	`ASSERT
(
this
 =ğ
cu¼’tTh»ad
);

182 
	`DEBUG
('t', "Y›ldšgh»ad \"%s\"\n", 
	`g‘Name
());

184 
ÃxtTh»ad
 = 
scheduËr
->
	`FšdNextToRun
();

185 ià(
ÃxtTh»ad
 !ğ
NULL
) {

186 
scheduËr
->
	`R—dyToRun
(
this
);

187 
scheduËr
->
	`Run
(
ÃxtTh»ad
);

189 (è
š‹¼u±
->
	`S‘Lev–
(
ŞdLev–
);

190 
	}
}

212 
	gTh»ad
::
	$SË•
 ()

214 
Th»ad
 *
ÃxtTh»ad
;

216 
	`ASSERT
(
this
 =ğ
cu¼’tTh»ad
);

217 
	`ASSERT
(
š‹¼u±
->
	`g‘Lev–
(è=ğ
IÁOff
);

219 
	`DEBUG
('t', "SË•šgh»ad \"%s\"\n", 
	`g‘Name
());

221 
¡©us
 = 
BLOCKED
;

222 (
ÃxtTh»ad
 = 
scheduËr
->
	`FšdNextToRun
()è=ğ
NULL
)

223 
š‹¼u±
->
	`IdË
();

225 
scheduËr
->
	`Run
(
ÃxtTh»ad
);

226 
	}
}

236 
	$Th»adFšish
(è{ 
cu¼’tTh»ad
->
	`Fšish
(); 
	}
}

237 
	$IÁ”ru±EÇbË
(è{ 
š‹¼u±
->
	`EÇbË
(); 
	}
}

238 
	$Th»adPršt
(
¬g
){ 
Th»ad
 *
t
 = (Th»ad *ïrg;->
	`Pršt
(); 
	}
}

253 
	gTh»ad
::
	$SckAÎoÿ‹
 (
VoidFunùiÚPŒ
 
func
, 
¬g
)

255 
¡ack
 = (*è
	`AÎocBoundedA¼ay
(
SckSize
 * ());

257 #ifdeà
HOST_SNAKE


259 
¡ackTİ
 = 
¡ack
 + 16;

260 
¡ack
[
SckSize
 - 1] = 
STACK_FENCEPOST
;

263 #ifdeà
HOST_SPARC


265 
¡ackTİ
 = 
¡ack
 + 
SckSize
 - 96;

267 
¡ackTİ
 = 
¡ack
 + 
SckSize
 - 4;

268 #ifdeà
HOST_i386


273 *(--
¡ackTİ
èğ()
Th»adRoÙ
;

276 *
¡ack
 = 
STACK_FENCEPOST
;

279 
machšeS‹
[
PCS‹
] = (è
Th»adRoÙ
;

280 
machšeS‹
[
S¹upPCS‹
] = (è
IÁ”ru±EÇbË
;

281 
machšeS‹
[
In™ŸlPCS‹
] = (è
func
;

282 
machšeS‹
[
In™ŸlArgS‹
] = 
¬g
;

283 
machšeS‹
[
Wh’DÚePCS‹
] = (è
Th»adFšish
;

284 
	}
}

286 #ifdeà
USER_PROGRAM


287 
	~"machše.h
"

299 
	gTh»ad
::
	$SaveU£rS‹
()

301 
i
 = 0; i < 
NumTÙ®Regs
; i++)

302 
u£rRegi¡”s
[
i
] = 
machše
->
	`R—dRegi¡”
(i);

303 
	}
}

315 
	gTh»ad
::
	$Re¡ÜeU£rS‹
()

317 
i
 = 0; i < 
NumTÙ®Regs
; i++)

318 
machše
->
	`Wr™eRegi¡”
(
i
, 
u£rRegi¡”s
[i]);

319 
	}
}

	@threads/thread.h

37 #iâdeà
THREAD_H


38 
	#THREAD_H


	)

40 
	~"cİyright.h
"

41 
	~"ut™y.h
"

43 #ifdeà
USER_PROGRAM


44 
	~"machše.h
"

45 
	~"addr¥aû.h
"

51 
	#MachšeS‹Size
 18

	)

56 
	#SckSize
 (4 * 1024)

57 

	)

60 
	eTh»adStus
 { 
	mJUST_CREATED
, 
	mRUNNING
, 
	mREADY
, 
	mBLOCKED
 };

63 
Th»adPršt
(
¬g
);

76 şas 
	cTh»ad
 {

77 
	m´iv©e
:

80 * 
¡ackTİ
;

81 
	mmachšeS‹
[
MachšeS‹Size
];

83 
	mpublic
:

84 
Th»ad
(* 
debugName
);

85 ~
Th»ad
();

92 
FÜk
(
VoidFunùiÚPŒ
 
func
, 
¬g
);

93 
Y›ld
();

95 
SË•
();

97 
Fšish
();

99 
CheckOv”æow
();

101 
	$£tStus
(
Th»adStus
 
¡
è{ 
¡©us
 = st; }

102 * 
	$g‘Name
(è{  (
Çme
); 
	}
}

103 
	$Pršt
(è{ 
	`´štf
("%s, ", 
Çme
); 
	}
}

105 
	g´iv©e
:

108 * 
¡ack
;

111 
Th»adStus
 
	g¡©us
;

112 * 
	gÇme
;

114 
SckAÎoÿ‹
(
VoidFunùiÚPŒ
 
func
, 
¬g
);

118 #ifdeà
USER_PROGRAM


123 
	gu£rRegi¡”s
[
NumTÙ®Regs
];

125 
	gpublic
:

126 
SaveU£rS‹
();

127 
Re¡ÜeU£rS‹
();

129 
AddrS·û
 *
	g¥aû
;

140 
Th»adRoÙ
();

143 
SWITCH
(
Th»ad
 *
ŞdTh»ad
, Th»ad *
ÃwTh»ad
);

	@threads/threadtest.cc

12 
	~"cİyright.h
"

13 
	~"sy¡em.h
"

14 
	~"synch.h
"

15 
	~"time.h
"

18 
	g‹¡num
 = 1;

29 #ifdeà
CHANGED


31 #ifdeà
HW1_LOCKS


32 
	gSh¬edV¬ŸbË
;

33 
Lock
 
cÚŒŞ
("SharedVariable control");

34 
Lock
 
b¬r›r
("Barrier control");

35 
	gnumRemaššgTh»ads
 = 0;

37 
	$Sim¶eTh»ad
(
which
) {

39 
	`DEBUG
('t', "SimpleThread„unning with†ocks controlling‡ccess.\n");

40 
num
, 
v®
;

42 
num
 = 0;‚um < 5;‚um++) {

43 
cÚŒŞ
.
	`Acquœe
();

44 
v®
 = 
Sh¬edV¬ŸbË
;

45 
	`´štf
("***h»ad %d s“ v®u%d\n", 
which
, 
v®
);

46 
Sh¬edV¬ŸbË
 = 
v®
+1;

47 
cÚŒŞ
.
	`R–—£
();

48 
cu¼’tTh»ad
->
	`Y›ld
();

51 
b¬r›r
.
	`Acquœe
();

52 
numRemaššgTh»ads
--;

53 
b¬r›r
.
	`R–—£
();

55 
numRemaššgTh»ads
 > 0) {

56 
cu¼’tTh»ad
->
	`Y›ld
();

59 
v®
 = 
Sh¬edV¬ŸbË
;

60 
	`´štf
("Th»ad %d s“ fš® v®u%d\n", 
which
, 
v®
);

61 
	}
}

63 #–ià
HW1_SEMAPHORES


64 
	gSh¬edV¬ŸbË
;

65 
	gNUM_LICENCES
 = 1;

66 
Sem­hÜe
 
cÚŒŞ
("Sh¬edV¬ŸbË cÚŒŞ", 
NUM_LICENCES
);

67 
Sem­hÜe
 
b¬r›r
("Barrier control", 1);

69 
	gnumRemaššgTh»ads
 = 0;

71 
	$Sim¶eTh»ad
(
which
) {

73 
	`DEBUG
('t', "SimpleThread„unning with semaphores controlling‡ccess.\n");

74 
num
, 
v®
;

76 
num
 = 0;‚um < 5;‚um++) {

77 
cÚŒŞ
.
	`P
();

78 
v®
 = 
Sh¬edV¬ŸbË
;

79 
	`´štf
("***h»ad %d s“ v®u%d\n", 
which
, 
v®
);

80 
Sh¬edV¬ŸbË
 = 
v®
+1;

81 
cÚŒŞ
.
	`V
();

82 
cu¼’tTh»ad
->
	`Y›ld
();

85 
b¬r›r
.
	`P
();

86 
numRemaššgTh»ads
--;

87 
b¬r›r
.
	`V
();

89 
numRemaššgTh»ads
 > 0) {

90 
cu¼’tTh»ad
->
	`Y›ld
();

93 
v®
 = 
Sh¬edV¬ŸbË
;

94 
	`´štf
("Th»ad %d s“ fš® v®u%d\n", 
which
, 
v®
);

95 
	}
}

98 
	gSh¬edV¬ŸbË
;

100 
	$Sim¶eTh»ad
(
which
) {

102 
	`DEBUG
('t', "SimpleThread„unning with‚o shared variable control; default\n");

103 
num
, 
v®
;

105 
num
 = 0;‚um < 5;‚um++) {

106 
v®
 = 
Sh¬edV¬ŸbË
;

107 
	`´štf
("***h»ad %d s“ v®u%d\n", 
which
, 
v®
);

108 
cu¼’tTh»ad
->
	`Y›ld
();

109 
Sh¬edV¬ŸbË
 = 
v®
+1;

110 
cu¼’tTh»ad
->
	`Y›ld
();

112 
v®
 = 
Sh¬edV¬ŸbË
;

113 
	`´štf
("Th»ad %d s“ fš® v®u%d\n", 
which
, 
v®
);

114 
	}
}

118 #ifdeà
HW1_LAUNDRY


120 
	gPARALLEL_MACHINE_ACCESSES
 = 1;

121 
	gMACHINE_FREE
 = 1;

122 
	gMACHINE_BUSY
 = 0;

123 cÚ¡ 
	gNMACHINES
 = 2;

124 
	gavaabË
[
NMACHINES
];

126 #ifdeà
HW1_LOCKS


128 
CÚd™iÚ
* 
	gavaabËMachše
 = 
Ãw
 Condition("Available machines");

129 
Lock
* 
	gcÚŒŞCÚd
 = 
Ãw
 Lock("Controlling condition variable");

130 
Lock
* 
	gmachšeHªdËr
 = 
Ãw
 Lock("Machine handler");

132 
	$®loÿ‹
(
³rsÚID
) {

134 
	`DEBUG
('l', "TryšgØ®loÿ‹‡ machštØ³rsÚ %d\n", 
³rsÚID
);

135 
i
;

136 
boŞ
 
machšeAcquœed
 = 
çl£
;

138 !
machšeAcquœed
) {

141 
machšeHªdËr
->
	`Acquœe
();

142 
	`DEBUG
('l', "MachšhªdË¸acqur›d fÜ…”sÚ %d\n", 
³rsÚID
);

143 
machšeNum
 = 0;

144 
machšeNum
 = 0; machšeNum < 
NMACHINES
; machineNum++) {

146 ià(
avaabË
[
machšeNum
] =ğ
MACHINE_FREE
) {

147 
avaabË
[
machšeNum
] = 
MACHINE_BUSY
;

148 
machšeHªdËr
->
	`R–—£
();

149 
machšeAcquœed
 = 
Œue
;

154 ià(
machšeAcquœed
) {

155 
	`DEBUG
('l', "Machš%d‡Îoÿ‹dØ³rsÚ %d\n", 
machšeNum
, 
³rsÚID
);

156  
machšeNum
;

158 
	`DEBUG
('l', "P”sÚ %d could‚Ù b®loÿ‹d‡ machše. SË•šg.\n", 
³rsÚID
);

159 
machšeHªdËr
->
	`R–—£
();

160 
cÚŒŞCÚd
->
	`Acquœe
();

161 
avaabËMachše
->
	`Wa™
(
cÚŒŞCÚd
);

162 
cÚŒŞCÚd
->
	`R–—£
();

165 
	}
}

167 
	$»Ëa£
(
machšeNum
) {

170 
machšeHªdËr
->
	`Acquœe
();

171 
avaabË
[
machšeNum
] = 
MACHINE_FREE
;

172 
machšeHªdËr
->
	`R–—£
();

173 
	`DEBUG
('l', "Machš%d sucûssfuÎy„–—£d\n", 
machšeNum
);

176 
	`DEBUG
('l', "L‘tšg…eİË know machš%d i ä“\n", 
machšeNum
);

177 
cÚŒŞCÚd
->
	`Acquœe
();

178 
avaabËMachše
->
	`Brßdÿ¡
(
cÚŒŞCÚd
);

179 
cÚŒŞCÚd
->
	`R–—£
();

180 
	}
}

182 #–ià
HW1_SEMAPHORES


184 
Sem­hÜe
* 
	gavaabËMachšes
 = 
Ãw
 Sem­hÜe("AvaabË machšes", 
NMACHINES
);

185 
Sem­hÜe
* 
	gmachšeHªdËr
 = 
Ãw
 Sem­hÜe("Machšes", 
PARALLEL_MACHINE_ACCESSES
);

187 
	$®loÿ‹
(
³rsÚID
) {

189 
	`DEBUG
('l', "Sem­ NACHOS im¶: TryšgØ®loÿ‹‡ machštØ³rsÚ %d\n", 
³rsÚID
);

190 
avaabËMachšes
->
	`P
();

191 
machšeHªdËr
->
	`P
();

193 
	`DEBUG
('l', "Semap impl: Allocating‡ machineo‡…erson\n");

195 
i
;

196 
i
 = 0; i < 
NMACHINES
; i++) {

197 ià(
avaabË
[
i
] =ğ
MACHINE_FREE
) {

198 
avaabË
[
i
] = 
MACHINE_BUSY
;

199 
	`DEBUG
('l', "Sem­ NACHOS im¶: AÎoÿtšg %dØ³rsÚ %d\n", 
i
, 
³rsÚID
);

200 
machšeHªdËr
->
	`V
();

201  
i
;

205 
	}
}

207 
	$»Ëa£
(
machše
) {

209 
machšeHªdËr
->
	`P
();

210 
	`DEBUG
('l', "Sem­hÜe im¶: R–—sšg machš%d fÜ u§ge\n", 
machše
);

211 
avaabË
[
machše
] = 
MACHINE_FREE
;

212 
machšeHªdËr
->
	`V
();

213 
avaabËMachšes
->
	`V
();

214 
	}
}

218 
Sem­hÜe
* 
	gavaabËMachšes
 = 
Ãw
 Sem­hÜe("AvaabË machšes", 
NMACHINES
);

220 
	$®loÿ‹
(
³rsÚID
) {

221 
	`DEBUG
('l', "DeçuÉ NACHOS im¶: TryšgØ®loÿ‹‡ machštØ³rsÚ %d\n", 
³rsÚID
);

222 
i
;

223 
avaabËMachšes
->
	`P
();

224 
i
=0; i < 
NMACHINES
; i++) {

225 ià(
avaabË
[
i
] =ğ
MACHINE_FREE
) {

226 
avaabË
[
i
] = 
MACHINE_BUSY
;

227 
	`DEBUG
('l', "DeçuÉ NACHOS im¶: AÎoÿtšg %dØ³rsÚ %d\n", 
i
, 
³rsÚID
);

228  
i
;

231 
	}
}

233 
	$»Ëa£
(
machše
) {

234 
	`DEBUG
('l', "Default NACHOS impl: Releasing‡ machine\n");

235 
avaabË
[
machše
] = 
MACHINE_FREE
;

236 
avaabËMachšes
->
	`V
();

237 
	}
}

241 
	$doLaundry
(
³rsÚID
) {

243 
	`DEBUG
('l', "P”sÚ %d i ©‹m±šgØg‘‡ machše\n", 
³rsÚID
);

244 
time_t
 
¡¬tLaundryTime
;

245 
machše
 = 
	`®loÿ‹
(
³rsÚID
);

246 
¡¬tLaundryTime
 = 
	`time
(
NULL
);

247 
	`DEBUG
('l', "P”sÚ %d i došg†aundry\n", 
³rsÚID
);

248 
	`difáime
(
	`time
(
NULL
),
¡¬tLaundryTime
) < 3) {

249 
cu¼’tTh»ad
->
	`Y›ld
();

251 
	`DEBUG
('l', "P”sÚ %d i dÚw™h†aundry‡nd i »Ëasšghmachše\n", 
³rsÚID
);

252 
	`»Ëa£
(
machše
);

253 
	}
}

255 
	$£tAÎMachšesToF»e
() {

257 
	`DEBUG
('l', "Setting‡ll machineso free\n");

258 
i
 = 0;

259 
i
 = 0; i < 
NMACHINES
; i++) {

260 
avaabË
[
i
] = 
MACHINE_FREE
;

262 
	}
}

264 
	$İ’Laundrom©
(
numCu¡om”s
) {

266 
numCu¡om”s
 =‚umCustomers > 0 ?‚umCustomers : 5;

267 
	`DEBUG
('l', "Num cu¡om”s: %d\n", 
numCu¡om”s
);

268 
	`DEBUG
('l', "Num machšes: %d\n", 
NMACHINES
);

270 
	`DEBUG
('l', "Opening†aundromat for business\n");

271 
	`£tAÎMachšesToF»e
();

272 
i
;

273 
Th»ad
* 
t
;

274 
i
 = 0; i < 
numCu¡om”s
; i++) {

275 
	`DEBUG
('l', "Forking‡‚ew…ersono do†aundry\n");

276 
t
 = 
Ãw
 
	`Th»ad
("person");

277 
t
->
	`FÜk
(
doLaundry
, 
i
);

279 
	}
}

290 
	$Th»adTe¡1
(
n
)

292 
	`DEBUG
('t', "Entering ThreadTest1\n");

294 #ifdeà
HW1_LOCKS


295 
	`DEBUG
('t', "Using†ocks\n");

296 #–ià
HW1_SEMAPHORES


297 
	`DEBUG
('t', "Using semaphores\n");

299 
	`DEBUG
('t', "Not using semaphores or†ocks\n");

302 
i
 = 0;

303 
Th»ad
* 
t
 = 
NULL
;

304 
i
 = 1; i <ğ
n
; i++) {

305 
	`DEBUG
('t', "Makšg‡nd fÜkšgh»ad #%d\n", 
i
);

306 
t
 = 
Ãw
 
	`Th»ad
("forkedhread");

307 
t
->
	`FÜk
(
Sim¶eTh»ad
, 
i
);

310 
	`Sim¶eTh»ad
(0);

311 
	}
}

319 
	$Th»adTe¡
(
n
)

321 ià(
n
 < 0) {

322 
	`´štf
("Setting‡rgument -qo 4. You can't specify‡‚egative‚um");

323 
n
 = 4;

327 
	`Th»adTe¡1
(
n
);

328 
	}
}

342 
	$Sim¶eTh»ad
(
which
)

344 
num
;

346 
num
 = 0;‚um < 5;‚um++) {

347 
	`´štf
("***h»ad %d†oİed %dimes\n", 
which
, 
num
);

348 
cu¼’tTh»ad
->
	`Y›ld
();

350 
	}
}

359 
	$Th»adTe¡1
()

361 
	`DEBUG
('t', "Entering ThreadTest1");

363 
Th»ad
 *
t
 = 
Ãw
 
	`Th»ad
("forkedhread");

365 
t
->
	`FÜk
(
Sim¶eTh»ad
, 1);

366 
	`Sim¶eTh»ad
(0);

367 
	}
}

375 
	$Th»adTe¡
()

377 
‹¡num
) {

379 
	`Th»adTe¡1
();

382 
	`´štf
("Noest specified.\n");

385 
	}
}

	@threads/utility.cc

9 
	~"cİyright.h
"

10 
	~"ut™y.h
"

14 #ifdeà
HOST_SNAKE


15 
	~<¡d¬g.h
>

17 #ifdeà
HOST_SPARC


18 
	~<¡d¬g.h
>

20 
	~"¡d¬g.h
"

24 *
	g’abËFÏgs
 = 
NULL
;

38 
	$DebugIn™
(*
æagLi¡
)

40 
’abËFÏgs
 = 
æagLi¡
;

41 
	}
}

48 
boŞ


49 
	$DebugIsEÇbËd
(
æag
)

51 ià(
’abËFÏgs
 !ğ
NULL
)

52  (
	`¡rchr
(
’abËFÏgs
, 
æag
) != 0)

53 || (
	`¡rchr
(
’abËFÏgs
, '+') != 0);

55  
FALSE
;

56 
	}
}

65 
	$DEBUG
(
æag
, *
fÜm©
, ...)

67 ià(
	`DebugIsEÇbËd
(
æag
)) {

68 
va_li¡
 
­
;

70 
	`va_¡¬t
(
­
, 
fÜm©
);

71 
	`vårštf
(
¡dout
, 
fÜm©
, 
­
);

72 
	`va_’d
(
­
);

73 
	`fæush
(
¡dout
);

75 
	}
}

	@threads/utility.h

23 #iâdeà
UTILITY_H


24 
	#UTILITY_H


	)

26 
	~"cİyright.h
"

30 
	~"boŞ.h
"

35 
	#mš
(
a
,
b
è((×è< (b)è? (aè: (b))

	)

36 
	#max
(
a
,
b
è((×è> (b)è? (aè: (b))

	)

39 
	#divRoundDown
(
n
,
s
è(Òè/ (s))

	)

40 
	#divRoundUp
(
n
,
s
è((Òè/ (s)è+ (((Òè% (s)è> 0è? 1 : 0))

	)

51 (*
	tVoidFunùiÚPŒ
)(
	t¬g
);

52 (*
	tVoidNoArgFunùiÚPŒ
)();

57 
	~"sysd•.h
"

61 
	`DebugIn™
(* 
æags
);

63 
boŞ
 
	`DebugIsEÇbËd
(
æag
);

65 
	`DEBUG
 (
æag
, * 
fÜm©
, ...);

76 
	#ASSERT
(
cÚd™iÚ
) \

77 ià(!(
cÚd™iÚ
)) { \

78 
	`årštf
(
¡d”r
, "Assertion failed:†ine %d, file \"%s\"\n", \

79 
__LINE__
, 
__FILE__
); \

80 
	`fæush
(
¡d”r
); \

81 
	`AbÜt
(); \

82 
	}

	)
}

	@userprog/addrspace.cc

18 
	~"cİyright.h
"

19 
	~"sy¡em.h
"

20 
	~"addr¥aû.h
"

21 
	~"noff.h
"

22 
	~"machše.h
"

23 
	~"vœtu®memÜymªag”.h
"

25 #ifdeà
HOST_SPARC


26 
	~<¡ršgs.h
>

37 
	$Sw­H—d”
 (
NoffH—d”
 *
noffH
)

39 
noffH
->
noffMagic
 = 
	`WÜdToHo¡
(noffH->noffMagic);

40 
noffH
->
code
.
size
 = 
	`WÜdToHo¡
(noffH->code.size);

41 
noffH
->
code
.
vœtu®Addr
 = 
	`WÜdToHo¡
(noffH->code.virtualAddr);

42 
noffH
->
code
.
šFeAddr
 = 
	`WÜdToHo¡
(noffH->code.inFileAddr);

43 
noffH
->
š™D©a
.
size
 = 
	`WÜdToHo¡
(noffH->initData.size);

44 
noffH
->
š™D©a
.
vœtu®Addr
 = 
	`WÜdToHo¡
(noffH->initData.virtualAddr);

45 
noffH
->
š™D©a
.
šFeAddr
 = 
	`WÜdToHo¡
(noffH->initData.inFileAddr);

46 
noffH
->
unš™D©a
.
size
 = 
	`WÜdToHo¡
(noffH->uninitData.size);

47 
noffH
->
unš™D©a
.
vœtu®Addr
 = 
	`WÜdToHo¡
(noffH->uninitData.virtualAddr);

48 
noffH
->
unš™D©a
.
šFeAddr
 = 
	`WÜdToHo¡
(noffH->uninitData.inFileAddr);

49 
	}
}

66 
	gAddrS·û
::
	$AddrS·û
(
O³nFe
 *
execubË
, 
PCB
* 
ÃwPCB
)

68 
NoffH—d”
 
noffH
;

69 
i
, 
size
;

71 
execubË
->
	`R—dAt
((*)&
noffH
, (noffH), 0);

72 ià((
noffH
.
noffMagic
 !ğ
NOFFMAGIC
) &&

73 (
	`WÜdToHo¡
(
noffH
.
noffMagic
è=ğ
NOFFMAGIC
))

74 
	`Sw­H—d”
(&
noffH
);

75 
	`ASSERT
(
noffH
.
noffMagic
 =ğ
NOFFMAGIC
);

78 
size
 = 
noffH
.
code
.siz+‚offH.
š™D©a
.siz+‚offH.
unš™D©a
.size

79 + 
U£rSckSize
;

81 
numPages
 = 
	`divRoundUp
(
size
, 
PageSize
);

82 
size
 = 
numPages
 * 
PageSize
;

84 
	`DEBUG
('a', "In™Ÿlizšg‡dd»s ¥aû,‚um…age %d, siz%d\n", 
numPages
, 
size
);

86 
this
->
pcb
 = 
ÃwPCB
;

88 
·geTabË
 = 
Ãw
 
T¿n¦©iÚEÁry
[
numPages
];

89 
i
 = 0; i < 
numPages
; i++) {

92 
·geTabË
[
i
].
vœtu®Page
 = i;

93 
·geTabË
[
i
].
physiÿlPage
 = -1;

94 
·geTabË
[
i
].
v®id
 = 
FALSE
;

95 
·geTabË
[
i
].
u£
 = 
FALSE
;

96 
·geTabË
[
i
].
dœty
 = 
FALSE
;

97 
·geTabË
[
i
].
»adOÆy
 = 
FALSE
;

101 
·geTabË
[
i
].
loÿtiÚOnDisk
 = 
vœtu®MemÜyMªag”
->
	`®locSw­SeùÜ
();

102 
¶aûHŞd”
[
PageSize
];

103 
	`bz”o
(
¶aûHŞd”
, 
PageSize
);

104 
vœtu®MemÜyMªag”
->
	`wr™eToSw­
(
¶aûHŞd”
, 
PageSize
, 
·geTabË
[
i
].
loÿtiÚOnDisk
);

107 
cu¼VœtPage
 = 
·geTabË
[
i
].
loÿtiÚOnDisk
 / 
PageSize
;

108 
	`DEBUG
('v',"Z %d: %d\n", 
pcb
->
	`g‘PID
(), 
cu¼VœtPage
);

117 
	`DEBUG
('v',"Loaded Program: %d code | %d data | %d bss\n",

118 
noffH
.
code
.
size
,‚offH.
š™D©a
.size,‚offH.
unš™D©a
.size);

122 ià(
noffH
.
code
.
size
 > 0) {

123 
	`DEBUG
('a', "Initializing code segment,‡t 0x%x, size %d\n",

124 
noffH
.
code
.
vœtu®Addr
,‚offH.code.
size
);

126 
	`R—dFe
(
noffH
.
code
.
vœtu®Addr
,
execubË
,noffH.code.
size
,

127 
noffH
.
code
.
šFeAddr
);

129 ià(
noffH
.
š™D©a
.
size
 > 0) {

130 
	`DEBUG
('a', "Initializing data segment,‡t 0x%x, size %d\n",

131 
noffH
.
š™D©a
.
vœtu®Addr
,‚offH.š™D©a.
size
);

132 
	`R—dFe
(
noffH
.
š™D©a
.
vœtu®Addr
,
execubË
,

133 
noffH
.
š™D©a
.
size
,noffH.š™D©a.
šFeAddr
);

135 
	}
}

142 
	gAddrS·û
::
	$AddrS·û
(cÚ¡ 
AddrS·û
* 
Ùh”
, 
PCB
* 
ÃwPCB
)

145 
numPages
 = 
Ùh”
->numPages;

146 
	`DEBUG
('a', "In™Ÿlizšg‡dd»s ¥aû w™h‚um…ages: %d.\n", 
numPages
);

148 
this
->
pcb
 = 
ÃwPCB
;

149 
·geTabË
 = 
Ãw
 
T¿n¦©iÚEÁry
[
numPages
];

151 
i
 = 0; i < 
numPages
; i++) {

153 
·geTabË
[
i
].
vœtu®Page
 = i;

154 
·geTabË
[
i
].
physiÿlPage
 = -1;

155 
·geTabË
[
i
].
v®id
 = 
FALSE
;

156 
·geTabË
[
i
].
u£
 = 
FALSE
;

157 
·geTabË
[
i
].
dœty
 = 
FALSE
;

158 
·geTabË
[
i
].
»adOÆy
 = 
FALSE
;

162 
·geTabË
[
i
].
loÿtiÚOnDisk
 = 
vœtu®MemÜyMªag”
->
	`®locSw­SeùÜ
();

163 
vœtu®MemÜyMªag”
->
	`cİySw­SeùÜ
(
·geTabË
[
i
].
loÿtiÚOnDisk
,

164 (
Ùh”
->
·geTabË
)[
i
].
loÿtiÚOnDisk
);

171 
	}
}

179 
	gAddrS·û
::~
	$AddrS·û
()

181 ià(
	`isV®id
())

183 
vœtu®MemÜyMªag”
->
	`»Ëa£Pages
(
this
);

184 
d–‘e
 [] 
·geTabË
;

185 
d–‘e
 
pcb
;

187 
	}
}

200 
	gAddrS·û
::
	$In™Regi¡”s
()

202 
i
;

204 
machšeLock
->
	`Acquœe
();

205 
i
 = 0; i < 
NumTÙ®Regs
; i++)

206 
machše
->
	`Wr™eRegi¡”
(
i
, 0);

209 
machše
->
	`Wr™eRegi¡”
(
PCReg
, 0);

213 
machše
->
	`Wr™eRegi¡”
(
NextPCReg
, 4);

218 
machše
->
	`Wr™eRegi¡”
(
SckReg
, 
numPages
 * 
PageSize
 - 16);

219 
machšeLock
->
	`R–—£
();

220 
	`DEBUG
('a', "In™Ÿlizšg sck„egi¡”Ø%d\n", 
numPages
 * 
PageSize
 - 16);

221 
	}
}

231 
	gAddrS·û
::
	$SaveS‹
()

232 {
	}
}

242 
AddrS·û
::
	$Re¡ÜeS‹
()

244 
machše
->
·geTabË
 =…ageTable;

245 
machše
->
·geTabËSize
 = 
numPages
;

246 
	}
}

257 
	gAddrS·û
::
	$T¿n¦©e
(
vœtu®Add»ss
)

259 
·geTabËIndex
 = (è
vœtu®Add»ss
 / 
PageSize
;

260 
off£t
 = 
vœtu®Add»ss
 % 
PageSize
;

261 
physiÿlAdd»ss
 = 0;

263 ià(
·geTabËIndex
 >ğ
numPages
) {

264 
	`årštf
(
¡d”r
,"PagbË index: %d bigg”hª‚um…ages: %d.\n", 
·geTabËIndex
, 
numPages
);

267 ià(!
·geTabË
[
·geTabËIndex
].
v®id
) {

268 
	`årštf
(
¡d”r
,"PagbË index %d i nÙ v®id.\n", 
·geTabËIndex
);

272 
äame
 = 
·geTabË
[
·geTabËIndex
].
physiÿlPage
;

274 ià(
äame
 >ğ
NumPhysPages
) {

275 
	`årštf
(
¡d”r
,"ThÿlcuÏ‹d f¿m%d†¬g”hª‚um…hy ·ge %d.\n", 
äame
, 
NumPhysPages
);

279 
physiÿlAdd»ss
 = 
äame
 * 
PageSize
 + 
off£t
;

280 
	`ASSERT
((
physiÿlAdd»ss
 >= 0));

281  
physiÿlAdd»ss
;

282 
	}
}

290 
	gAddrS·û
::
	$R—dFe
(
vœtAddr
, 
O³nFe
* 
fe
, 
size
, 
feAddr
)

292 
bufãr1
[
size
];

293 
numBy‹sTÙ®
 = 
fe
->
	`R—dAt
(
bufãr1
, 
size
, 
feAddr
);

294 
size
 = 
numBy‹sTÙ®
;

295 
by‹sCİ›dSoF¬
 = 0;

297 
size
 > 0) {

299 
·geTabËIndex
 = 
vœtAddr
 / 
PageSize
;

300 
off£t
 = 
vœtAddr
 % 
PageSize
;

301 
numBy‹sThisLoİ
 = 
size
 < 
PageSize
 ? size : PageSize;

302 
vœtu®MemÜyMªag”
->
	`wr™eToSw­
(
bufãr1
 + 
by‹sCİ›dSoF¬
, 
numBy‹sThisLoİ
,

303 
·geTabË
[
·geTabËIndex
].
loÿtiÚOnDisk
 + 
off£t
);

304 
size
 -ğ
numBy‹sThisLoİ
;

305 
by‹sCİ›dSoF¬
 +ğ
numBy‹sThisLoİ
;

306 
vœtAddr
 +ğ
numBy‹sThisLoİ
;

309  
numBy‹sTÙ®
;

310 
	}
}

317 
PCB
* 
	gAddrS·û
::
	$g‘PCB
()

319  
this
->
pcb
;

320 
	}
}

327 
boŞ
 
	gAddrS·û
::
	$isV®id
()

329  (
this
->
pcb
 !ğ
NULL
);

330 
	}
}

337 
T¿n¦©iÚEÁry
* 
	gAddrS·û
::
	$g‘PageTabËEÁry
(
·geTabËIndex
)

339  &
·geTabË
[
·geTabËIndex
];

340 
	}
}

347 
	gAddrS·û
::
	$g‘PageIndex
(
T¿n¦©iÚEÁry
* 
·ge
)

349 
i
 = 0; i < 
numPages
; i++)

351 ià(
·ge
 =ğ
·geTabË
 + 
i
)

353  
i
;

357 
	}
}

	@userprog/addrspace.h

13 #iâdeà
ADDRSPACE_H


14 
	#ADDRSPACE_H


	)

16 
	~"cİyright.h
"

17 
	~"fesys.h
"

18 
	~"pcb.h
"

19 
	~"memÜymªag”.h
"

21 #ifdeà
VM


23 
	~"Œª¦©e.h
"

25 
	#U£rSckSize
 2048

26 

	)

27 şas 
	cAddrS·û
 {

28 
	mpublic
:

29 
AddrS·û
(cÚ¡ AddrS·û* 
Ùh”
, 
PCB
* 
pcb
);

30 
AddrS·û
(
O³nFe
 *
execubË
, 
PCB
* 
pcb
);

31 ~
AddrS·û
();

33 
T¿n¦©e
(
vœtu®Add»ss
);

34 
R—dFe
(
vœtAddr
, 
O³nFe
* 
fe
, 
size
, 
feAddr
);

35 
	$g‘NumPages
(è{ 
numPages
;}

37 
	`In™Regi¡”s
();

38 
	`SaveS‹
();

39 
	`Re¡ÜeS‹
();

40 
PCB
* 
	`g‘PCB
();

41 
boŞ
 
	`isV®id
();

42 
T¿n¦©iÚEÁry
* 
	`g‘PageTabËEÁry
(
·geTabËIndex
);

43 
	`g‘PageIndex
(
T¿n¦©iÚEÁry
* 
·ge
);

44 
T¿n¦©iÚEÁry
 *
·geTabË
;

47 
´iv©e
:

48 
numPages
;

50 
PCB
* 
pcb
;

51 
	}
};

55 
	#U£rSckSize
 1024

56 

	)

57 şas 
	cAddrS·û
 {

58 
	mpublic
:

59 
AddrS·û
(cÚ¡ AddrS·û* 
Ùh”
, 
PCB
* 
pcb
);

60 
AddrS·û
(
O³nFe
 *
execubË
, 
PCB
* 
pcb
);

61 ~
AddrS·û
();

63 
T¿n¦©e
(
vœtu®Add»ss
);

64 
R—dFe
(
vœtAddr
, 
O³nFe
* 
fe
, 
size
, 
feAddr
);

65 
	$g‘NumPages
(è{ 
numPages
;}

67 
	`In™Regi¡”s
();

68 
	`SaveS‹
();

69 
	`Re¡ÜeS‹
();

70 
PCB
* 
	`g‘PCB
();

71 
boŞ
 
	`isV®id
();

72 
T¿n¦©iÚEÁry
 *
·geTabË
;

75 
´iv©e
:

76 
numPages
;

78 
PCB
* 
pcb
;

79 
	}
};

	@userprog/bitmap.cc

9 
	~"cİyright.h
"

10 
	~"b™m­.h
"

20 
	gB™M­
::
	$B™M­
(
n™ems
)

22 
numB™s
 = 
n™ems
;

23 
numWÜds
 = 
	`divRoundUp
(
numB™s
, 
B™sInWÜd
);

24 
m­
 = 
Ãw
 [
numWÜds
];

25 
i
 = 0; i < 
numB™s
; i++)

26 
	`CË¬
(
i
);

27 
	}
}

34 
	gB™M­
::~
	$B™M­
()

36 
d–‘e
 
m­
;

37 
	}
}

47 
	gB™M­
::
	$M¬k
(
which
)

49 
	`ASSERT
(
which
 >ğ0 && which < 
numB™s
);

50 
m­
[
which
 / 
B™sInWÜd
] |= 1 << (which % BitsInWord);

51 
	}
}

61 
	gB™M­
::
	$CË¬
(
which
)

63 
	`ASSERT
(
which
 >ğ0 && which < 
numB™s
);

64 
m­
[
which
 / 
B™sInWÜd
] &= ~(1 << (which % BitsInWord));

65 
	}
}

74 
boŞ


75 
	gB™M­
::
	$Te¡
(
which
)

77 
	`ASSERT
(
which
 >ğ0 && which < 
numB™s
);

79 ià(
m­
[
which
 / 
B™sInWÜd
] & (1 << (which % BitsInWord)))

80  
TRUE
;

82  
FALSE
;

83 
	}
}

95 
	gB™M­
::
	$Fšd
()

97 
i
 = 0; i < 
numB™s
; i++)

98 ià(!
	`Te¡
(
i
)) {

99 
	`M¬k
(
i
);

100  
i
;

103 
	}
}

112 
	gB™M­
::
	$NumCË¬
()

114 
couÁ
 = 0;

116 
i
 = 0; i < 
numB™s
; i++)

117 ià(!
	`Te¡
(
i
)è
couÁ
++;

118  
couÁ
;

119 
	}
}

130 
	gB™M­
::
	$Pršt
()

132 
	`´štf
("Bitmap set:\n");

133 
i
 = 0; i < 
numB™s
; i++)

134 ià(
	`Te¡
(
i
))

135 
	`´štf
("%d, ", 
i
);

136 
	`´štf
("\n");

137 
	}
}

149 
	gB™M­
::
	$F‘chFrom
(
O³nFe
 *
fe
)

151 
fe
->
	`R—dAt
((*)
m­
, 
numWÜds
 * (), 0);

152 
	}
}

162 
	gB™M­
::
	$Wr™eBack
(
O³nFe
 *
fe
)

164 
fe
->
	`Wr™eAt
((*)
m­
, 
numWÜds
 * (), 0);

165 
	}
}

	@userprog/bitmap.h

15 #iâdeà
BITMAP_H


16 
	#BITMAP_H


	)

18 
	~"cİyright.h
"

19 
	~"ut™y.h
"

20 
	~"İ’fe.h
"

23 
	#B™sInBy‹
 8

	)

24 
	#B™sInWÜd
 32

	)

34 şas 
	cB™M­
 {

35 
	mpublic
:

36 
B™M­
(
n™ems
);

38 ~
B™M­
();

40 
M¬k
(
which
);

41 
CË¬
(
which
);

42 
boŞ
 
Te¡
(
which
);

43 
Fšd
();

46 
NumCË¬
();

48 
Pršt
();

52 
F‘chFrom
(
O³nFe
 *
fe
);

53 
Wr™eBack
(
O³nFe
 *
fe
);

55 
	m´iv©e
:

56 
numB™s
;

57 
	mnumWÜds
;

61 *
	mm­
;

	@userprog/exception.cc

21 
	~"cİyright.h
"

22 
	~"sy¡em.h
"

23 
	~"sysÿÎ.h
"

24 
	~"machše.h
"

25 
	~"pcb.h
"

27 
	#MAX_FILENAME_LEN
 128

	)

28 
	#USER_READ
 0

29 
	#USER_WRITE
 1

30 

	)

31 
Inüem’tPC
();

32 
fÜkIm¶
();

33 
cİyS‹Back
(
fÜkPC
);

34 
y›ldIm¶
();

35 
ex™Im¶
();

36 
jošIm¶
();

37 
S·ûId
 
execIm¶
(* 
f’ame
);

38 
execH–³r
();

39 
»adF’ameFromU£¹oK”Ãl
(* 
f’ame
);

40 
ü—‹Im¶
(* 
f’ame
);

41 * 
cİySŒšg
(* 
ŞdSŒ
);

42 
İ’Im¶
(* 
f’ame
);

43 
u£rR—dWr™e
(
vœtAddr
, * 
bufãr
, 
size
, 
ty³
);

44 
wr™eIm¶
();

45 
»adIm¶
();

46 
şo£Im¶
();

47 
·geFauÉHªdËr
();

72 
	$Exû±iÚHªdËr
(
Exû±iÚTy³
 
which
)

74 
ÃwProûssPID
 = 0;

75 
Ùh”ProûssStus
 = 0;

76 
»suÉ
 = 0;

77 * 
f’ame
 = 
Ãw
 [
MAX_FILENAME_LEN
];

79 
ty³
 = 
machše
->
	`R—dRegi¡”
(2);

80 
PCB
* 
pcb
 = (
cu¼’tTh»ad
->
¥aû
)->
	`g‘PCB
();

82 ià(
which
 =ğ
SysÿÎExû±iÚ
) {

84 
ty³
) {

86 
SC_H®t
:

87 
	`DEBUG
('v',"Sy¡em C®l: %d invoked H®t\n", 
pcb
->
	`g‘PID
());

88 
š‹¼u±
->
	`H®t
();

90 
SC_FÜk
:

91 
	`DEBUG
('v',"Sy¡em C®l: %d invoked FÜk\n", 
pcb
->
	`g‘PID
());

92 
ÃwProûssPID
 = 
	`fÜkIm¶
();

93 
machšeLock
->
	`Acquœe
();

94 
machše
->
	`Wr™eRegi¡”
(2, 
ÃwProûssPID
);

95 
machšeLock
->
	`R–—£
();

97 
SC_Y›ld
:

98 
	`DEBUG
('v',"Sy¡em C®l: %d invoked Y›ld\n", 
pcb
->
	`g‘PID
());

99 
	`y›ldIm¶
();

101 
SC_Exec
:

102 
	`DEBUG
('v',"Sy¡em C®l: %d invoked Exec\n", 
pcb
->
	`g‘PID
());

103 
	`»adF’ameFromU£¹oK”Ãl
(
f’ame
);

104 
ÃwProûssPID
 = 
	`execIm¶
(
f’ame
);

105 
machšeLock
->
	`Acquœe
();

106 
machše
->
	`Wr™eRegi¡”
(2, 
ÃwProûssPID
);

107 
machšeLock
->
	`R–—£
();

109 
SC_Još
:

110 
	`DEBUG
('v',"Sy¡em C®l: %d invoked Još\n", 
pcb
->
	`g‘PID
());

111 
Ùh”ProûssStus
 = 
	`jošIm¶
();

112 
machšeLock
->
	`Acquœe
();

113 
machše
->
	`Wr™eRegi¡”
(2, 
Ùh”ProûssStus
);

114 
machšeLock
->
	`R–—£
();

116 
SC_Ex™
:

117 
	`DEBUG
('v',"Sy¡em C®l: %d invoked Ex™\n", 
pcb
->
	`g‘PID
());

118 
	`ex™Im¶
();

120 
SC_C»©e
:

121 
	`DEBUG
('v',"Sy¡em C®l: %d invoked C»©e\n", 
pcb
->
	`g‘PID
());

122 
	`»adF’ameFromU£¹oK”Ãl
(
f’ame
);

123 
	`ü—‹Im¶
(
f’ame
);

125 
SC_O³n
:

126 
	`DEBUG
('v',"Sy¡em C®l: %d invoked O³n\n", 
pcb
->
	`g‘PID
());

127 
	`»adF’ameFromU£¹oK”Ãl
(
f’ame
);

128 
	`cİySŒšg
(
f’ame
);

129 
»suÉ
 = 
	`İ’Im¶
(
f’ame
);

130 
machše
->
	`Wr™eRegi¡”
(2, 
»suÉ
);

132 
SC_Wr™e
:

133 
	`DEBUG
('v',"Sy¡em C®l: %d invoked Wr™e\n", 
pcb
->
	`g‘PID
());

134 
	`wr™eIm¶
();

136 
SC_R—d
:

137 
	`DEBUG
('v',"Sy¡em C®l: %d invoked R—d\n", 
pcb
->
	`g‘PID
());

138 
»suÉ
 = 
	`»adIm¶
();

139 
machše
->
	`Wr™eRegi¡”
(2, 
»suÉ
);

141 
SC_Clo£
:

142 
	`DEBUG
('v',"Sy¡em C®l: %d invoked Clo£\n", 
pcb
->
	`g‘PID
());

143 
	`şo£Im¶
();

146 
	`DEBUG
('v',"System Call: %d invoked‡n unknown syscall!\n",

147 
pcb
->
	`g‘PID
());

148 
	`ASSERT
(
FALSE
);

151 
d–‘e
 [] 
f’ame
;

152 
	`Inüem’tPC
();

154 } ià(
which
 =ğ
PageFauÉExû±iÚ
) {

155 
	`·geFauÉHªdËr
();

157 
	`årštf
(
¡d”r
,"UÃx³ùed u£¸modexû±iÚ %d %d\n", 
which
, 
ty³
);

158 
	`ASSERT
(
FALSE
);

160 
	}
}

166 
	$fÜkIm¶
()

169 
Th»ad
* 
chdTh»ad
 = 
Ãw
 
	`Th»ad
("user-level child…rocess");

171 
ÃwProûssPC
 = 
machše
->
	`R—dRegi¡”
(4);

174 
cu¼PID
 = 
cu¼’tTh»ad
->
¥aû
->
	`g‘PCB
()->
	`g‘PID
();

175 
ÃwPID
 = 
´oûssMªag”
->
	`g‘PID
();

176 ià(
ÃwPID
 == -1) {

177 
	`årštf
(
¡d”r
,"Proûs %d i uÇbËØfÜk‡‚ew…roûss\n", 
cu¼PID
);

180 
PCB
* 
ÃwPCB
 = 
Ãw
 
	`PCB
(
ÃwPID
, 
cu¼PID
);

181 
ÃwPCB
->
¡©us
 = 
P_RUNNING
;

182 
ÃwPCB
->
´oûss
 = 
chdTh»ad
;

183 
´oûssMªag”
->
	`addProûss
(
ÃwPCB
, 
ÃwPID
);

186 
chdTh»ad
->
¥aû
 = 
Ãw
 
	`AddrS·û
(
cu¼’tTh»ad
->¥aû, 
ÃwPCB
);

187 
chdNumPages
 = 
chdTh»ad
->
¥aû
->
	`g‘NumPages
();

189 ià(
chdTh»ad
->
¥aû
->
·geTabË
 =ğ
NULL
) {

190 
	`årštf
(
¡d”r
,"Process %d Fork: start‡t‡ddress 0x%x with %d…ages"

191 " memÜy faed\n", 
cu¼PID
, 
ÃwProûssPC
, 
chdNumPages
);

195 
chdTh»ad
->
¥aû
->
	`SaveS‹
();

196 
chdTh»ad
->
	`SaveU£rS‹
();

199 
	`DEBUG
('v',"Process %d Fork: start‡t‡ddress 0x%x with %d…ages memory\n",

200 
cu¼PID
, 
ÃwProûssPC
, 
chdNumPages
);

203 
chdTh»ad
->
	`FÜk
(
cİyS‹Back
, 
ÃwProûssPC
);

204 
cu¼’tTh»ad
->
	`Y›ld
();

205  
ÃwPID
;

206 
	}
}

216 
	$cİyS‹Back
(
fÜkPC
)

219 
cu¼’tTh»ad
->
	`Re¡ÜeU£rS‹
();

222 
machšeLock
->
	`Acquœe
();

223 
machše
->
	`Wr™eRegi¡”
(
PCReg
, 
fÜkPC
);

224 
machše
->
	`Wr™eRegi¡”
(
P»vPCReg
, 
fÜkPC
 - 4);

225 
machše
->
	`Wr™eRegi¡”
(
NextPCReg
, 
fÜkPC
 + 4);

226 
machšeLock
->
	`R–—£
();

228 
cu¼’tTh»ad
->
¥aû
->
	`Re¡ÜeS‹
();

229 
machše
->
	`Run
();

230 
	`ASSERT
(
FALSE
);

231 
	}
}

237 
	$y›ldIm¶
()

239 
IÁStus
 
ŞdLev–
 = 
š‹¼u±
->
	`S‘Lev–
(
IÁOff
);

240 
cu¼’tTh»ad
->
	`SaveU£rS‹
();

241 
cu¼’tTh»ad
->
	`Y›ld
();

242 
cu¼’tTh»ad
->
	`Re¡ÜeU£rS‹
();

243 
cu¼’tTh»ad
->
¥aû
->
	`Re¡ÜeS‹
();

244 (è
š‹¼u±
->
	`S‘Lev–
(
ŞdLev–
);

245 
	}
}

251 
	$ex™Im¶
()

253 
IÁStus
 
ŞdLev–
 = 
š‹¼u±
->
	`S‘Lev–
(
IÁOff
);

254 
¡©us
 = 
machše
->
	`R—dRegi¡”
(4);

255 
cu¼PID
 = 
cu¼’tTh»ad
->
¥aû
->
	`g‘PCB
()->
	`g‘PID
();

257 
	`DEBUG
('v',"Proûs %dƒx™ w™h %d\n", 
cu¼PID
, 
¡©us
);

258 
cu¼’tTh»ad
->
¥aû
->
	`g‘PCB
()->
¡©us
 = status;

259 
´oûssMªag”
->
	`brßdÿ¡
(
cu¼PID
);

261 
d–‘e
 
cu¼’tTh»ad
->
¥aû
;

262 
cu¼’tTh»ad
->
¥aû
 = 
NULL
;

264 
´oûssMªag”
->
	`ş—rPID
(
cu¼PID
);

265 (è
š‹¼u±
->
	`S‘Lev–
(
ŞdLev–
);

266 
cu¼’tTh»ad
->
	`Fšish
();

267 
	}
}

273 
	$jošIm¶
()

275 
Ùh”PID
 = 
machše
->
	`R—dRegi¡”
(4);

276 
cu¼’tTh»ad
->
¥aû
->
	`g‘PCB
()->
¡©us
 = 
P_BLOCKED
;

277 
Ùh”ProûssStus
 = 
´oûssMªag”
->
	`g‘Stus
(
Ùh”PID
);

279 ià(
Ùh”ProûssStus
 < 0) {

280  
´oûssMªag”
->
	`g‘Stus
(
Ùh”PID
);

282 
´oûssMªag”
->
	`još
(
Ùh”PID
);

283 
cu¼’tTh»ad
->
¥aû
->
	`g‘PCB
()->
¡©us
 = 
P_RUNNING
;

284  
´oûssMªag”
->
	`g‘Stus
(
Ùh”PID
);

285 
	}
}

291 
	$execH–³r
(
u£ËssArg
)

293 
AddrS·û
* 
cu¼AddrS·û
 = 
cu¼’tTh»ad
->
¥aû
;

294 
cu¼AddrS·û
->
	`In™Regi¡”s
();

295 
cu¼AddrS·û
->
	`SaveS‹
();

296 
cu¼AddrS·û
->
	`Re¡ÜeS‹
();

297 
machše
->
	`Run
();

298 
	}
}

304 
S·ûId
 
	$execIm¶
(* 
f’ame
)

306 
cu¼PID
 = 
cu¼’tTh»ad
->
¥aû
->
	`g‘PCB
()->
	`g‘PID
();

309 
O³nFe
* 
feToExecu‹
 = 
feSy¡em
->
	`O³n
(
f’ame
);

310 ià(
feToExecu‹
 =ğ
NULL
) {

311 
	`årštf
(
¡d”r
,"UÇbËØİ’ f% fÜƒxecutiÚ. T”mš©šg.\n", 
f’ame
);

316 
Th»ad
* 
ÃwTh»ad
 = 
Ãw
 
	`Th»ad
("Executing…rocess");

317 
ÃwPID
 = 
´oûssMªag”
->
	`g‘PID
();

318 
PCB
* 
pcb
 = 
Ãw
 
	`PCB
(
ÃwPID
, 
cu¼PID
);

319 
pcb
->
¡©us
 = 
P_RUNNING
;

320 
pcb
->
´oûss
 = 
ÃwTh»ad
;

323 
AddrS·û
* 
ÃwS·û
 = 
Ãw
 
	`AddrS·û
(
feToExecu‹
, 
pcb
);

324 ià(!
ÃwS·û
->
	`isV®id
()) {

325 
	`DEBUG
('v',"ExeøProg¿m: %d†ßdšg % çed\n", 
cu¼PID
, 
f’ame
);

326 
d–‘e
 
feToExecu‹
;

327 
d–‘e
 
ÃwS·û
;

330 
ÃwTh»ad
->
¥aû
 = 
ÃwS·û
;

331 
´oûssMªag”
->
	`addProûss
(
pcb
, 
ÃwPID
);

334 
d–‘e
 
feToExecu‹
;

335 
	`DEBUG
('v',"ExeøProg¿m: %d†ßdšg %s\n", 
cu¼PID
, 
f’ame
);

336 
ÃwTh»ad
->
	`FÜk
(
execH–³r
, 0);

337 
cu¼’tTh»ad
->
	`Y›ld
();

338  
ÃwPID
;

339 
	}
}

345 
	$moveBy‹sFromMemToK”Ãl
(
vœtAddr
, * 
bufãr
, 
size
)

347 
physAddr
 = 0;

348 
»maššgFromPage
 = 0;

349 
by‹sCİ›d
 = 0;

350 
by‹sToCİy
 = 0;

351 
Exû±iÚTy³
 
exû±iÚ
;

353 
size
 > 0) {

359 
exû±iÚ
 = 
machše
->
	`T¿n¦©e
(
vœtAddr
, &
physAddr
, 
size
, 
FALSE
);

360 ià(
exû±iÚ
 !ğ
NoExû±iÚ
)

362 
machše
->
	`Rai£Exû±iÚ
(
exû±iÚ
, 
vœtAddr
);

364 } 
exû±iÚ
 !ğ
NoExû±iÚ
);

366 
»maššgFromPage
 = 
PageSize
 - 
physAddr
 % PageSize;

367 
by‹sToCİy
 = 
»maššgFromPage
 < 
size
 ?„emainingFromPage : size;

368 
	`bcİy
(
machše
->
mašMemÜy
 + 
physAddr
, 
bufãr
 + 
by‹sCİ›d
, 
by‹sToCİy
);

369 
size
 -ğ
by‹sToCİy
;

370 
by‹sCİ›d
 +ğ
by‹sToCİy
;

371 
vœtAddr
 +ğ
by‹sToCİy
;

374  
by‹sCİ›d
;

375 
	}
}

382 
	$»adF’ameFromU£¹oK”Ãl
(* 
f’ame
)

384 
cu¼Pos™iÚ
 = 0;

385 
f’ameArg
 = 
machše
->
	`R—dRegi¡”
(4);

388 
	`moveBy‹sFromMemToK”Ãl
(
f’ameArg
, 
f’ame
 + 
cu¼Pos™iÚ
, 1);

389 
f’ameArg
++;

390 } 
f’ame
[
cu¼Pos™iÚ
++] != 0);

392 
f’ame
[
cu¼Pos™iÚ
] = 0;

393 
	}
}

399 
	$ü—‹Im¶
(* 
f’ame
)

401 
boŞ
 
sucûssfulC»©e
 = 
feSy¡em
->
	`C»©e
(
f’ame
, 0);

402 
	`ASSERT
(
sucûssfulC»©e
);

403 
	}
}

410 * 
	$cİySŒšg
(* 
ŞdSŒ
)

412 * 
ÃwSŒ
 = 
Ãw
 [
MAX_FILENAME_LEN
];

413 
i
 = 0; i < 
MAX_FILENAME_LEN
; i++) {

414 
ÃwSŒ
[
i
] = 
ŞdSŒ
[i];

415 ià(
ŞdSŒ
[
i
] =ğ
NULL
) {

419  
ÃwSŒ
;

420 
	}
}

426 
	$İ’Im¶
(* 
f’ame
)

428 
šdex
 = 0;

429 
SysO³nFe
* 
cu¼SysFe
 = 
feMªag”
->
	`g‘Fe
(
f’ame
, 
šdex
);

431 ià(
cu¼SysFe
 =ğ
NULL
) {

432 
O³nFe
* 
İ’Fe
 = 
feSy¡em
->
	`O³n
(
f’ame
);

433 ià(
İ’Fe
 =ğ
NULL
) {

434 
	`årštf
(
¡d”r
,"UÇbËØİ’hf%s\n", 
f’ame
);

437 
SysO³nFe
 
cu¼SysFe
;

438 
cu¼SysFe
.
fe
 = 
İ’Fe
;

439 
cu¼SysFe
.
numProûs£sAcûssšg
 = 1;

440 
cu¼SysFe
.
f’ame
 = 
	`cİySŒšg
(filename);

441 
šdex
 = 
feMªag”
->
	`addFe
(
cu¼SysFe
);

444 
cu¼SysFe
->
numProûs£sAcûssšg
++;

448 
U£rO³nFe
 
cu¼U£rFe
;

449 
cu¼U£rFe
.
šdexInSysO³nFeLi¡
 = 
šdex
;

450 
cu¼U£rFe
.
cu¼Off£tInFe
 = 0;

451 
cu¼FeID
 = 
cu¼’tTh»ad
->
¥aû
->
	`g‘PCB
()->
	`addFe
(
cu¼U£rFe
);

452  
cu¼FeID
;

453 
	}
}

460 
	$u£rR—dWr™e
(
vœtAddr
, * 
bufãr
, 
size
, 
ty³
)

462 
physAddr
 = 0;

463 
numBy‹sFromPSLeá
 = 0;

464 
numBy‹sCİ›d
 = 0;

465 
numBy‹sToCİy
 = 0;

466 
Exû±iÚTy³
 
exû±iÚ
;

468 ià(
ty³
 =ğ
USER_READ
)

470 
size
 > 0)

476 
exû±iÚ
 = 
machše
->
	`T¿n¦©e
(
vœtAddr
, &
physAddr
, 
size
, 
FALSE
);

477 ià(
exû±iÚ
 !ğ
NoExû±iÚ
)

479 
machše
->
	`Rai£Exû±iÚ
(
exû±iÚ
, 
vœtAddr
);

481 } 
exû±iÚ
 !ğ
NoExû±iÚ
);

482 
numBy‹sFromPSLeá
 = 
PageSize
 - 
physAddr
 % PageSize;

483 
numBy‹sToCİy
 = (
numBy‹sFromPSLeá
 < 
size
) ?‚umBytesFromPSLeft : size;

484 
	`bcİy
(
bufãr
 + 
numBy‹sCİ›d
, 
machše
->
mašMemÜy
 + 
physAddr
, 
numBy‹sToCİy
);

485 
numBy‹sCİ›d
 +ğ
numBy‹sToCİy
;

486 
size
 -ğ
numBy‹sToCİy
;

487 
vœtAddr
 +ğ
numBy‹sToCİy
;

490 ià(
ty³
 =ğ
USER_WRITE
)

492 
size
 > 0)

498 
exû±iÚ
 = 
machše
->
	`T¿n¦©e
(
vœtAddr
, &
physAddr
, 
size
, 
FALSE
);

499 ià(
exû±iÚ
 !ğ
NoExû±iÚ
)

501 
machše
->
	`Rai£Exû±iÚ
(
exû±iÚ
, 
vœtAddr
);

503 } 
exû±iÚ
 !ğ
NoExû±iÚ
);

505 
numBy‹sFromPSLeá
 = 
PageSize
 - 
physAddr
 % PageSize;

506 
numBy‹sToCİy
 = (
numBy‹sFromPSLeá
 < 
size
) ?‚umBytesFromPSLeft : size;

507 
	`bcİy
(
machše
->
mašMemÜy
 + 
physAddr
, 
bufãr
 + 
numBy‹sCİ›d
, 
numBy‹sToCİy
);

508 
numBy‹sCİ›d
 +ğ
numBy‹sToCİy
;

509 
size
 -ğ
numBy‹sToCİy
;

510 
vœtAddr
 +ğ
numBy‹sToCİy
;

514 
	`årštf
(
¡d”r
,"Invalidype…assed in.\n");

515 
	`ASSERT
(
FALSE
);

517  
numBy‹sCİ›d
;

518 
	}
}

523 
	$wr™eIm¶
()

525 
wr™eAddr
 = 
machše
->
	`R—dRegi¡”
(4);

526 
size
 = 
machše
->
	`R—dRegi¡”
(5);

527 
feID
 = 
machše
->
	`R—dRegi¡”
(6);

529 * 
bufãr
 = 
Ãw
 [
size
 + 1];

530 ià(
feID
 =ğ
CÚsŞeOuut
) {

531 
	`u£rR—dWr™e
(
wr™eAddr
, 
bufãr
, 
size
, 
USER_WRITE
);

532 
bufãr
[
size
] = 0;

533 
	`´štf
("%s", 
bufãr
);

536 
bufãr
 = 
Ãw
 [
size
];

537 
	`u£rR—dWr™e
(
wr™eAddr
, 
bufãr
, 
size
, 
USER_WRITE
);

538 
U£rO³nFe
* 
u£rFe
 = 
cu¼’tTh»ad
->
¥aû
->
	`g‘PCB
()->
	`g‘Fe
(
feID
);

539 ià(
u£rFe
 =ğ
NULL
) {

542 
SysO³nFe
* 
sysFe
 =

543 
feMªag”
->
	`g‘Fe
(
u£rFe
->
šdexInSysO³nFeLi¡
);

544 
numBy‹sWr™‹n
 =

545 
sysFe
->
fe
->
	`Wr™eAt
(
bufãr
, 
size
, 
u£rFe
->
cu¼Off£tInFe
);

546 
u£rFe
->
cu¼Off£tInFe
 +ğ
numBy‹sWr™‹n
;

549 
d–‘e
 [] 
bufãr
;

550 
	}
}

556 
	$»adIm¶
()

558 
»adAddr
 = 
machše
->
	`R—dRegi¡”
(4);

559 
size
 = 
machše
->
	`R—dRegi¡”
(5);

560 
feID
 = 
machše
->
	`R—dRegi¡”
(6);

561 * 
bufãr
 = 
Ãw
 [
size
 + 1];

562 
numAùu®By‹sR—d
 = 
size
;

564 ià(
feID
 =ğ
CÚsŞeIÅut
) {

565 
by‹sR—d
 = 0;

566 
by‹sR—d
 < 
size
) {

567 
bufãr
[
by‹sR—d
] = 
	`g‘ch¬
();

568 
by‹sR—d
++;

572 
U£rO³nFe
* 
u£rFe
 = 
cu¼’tTh»ad
->
¥aû
->
	`g‘PCB
()->
	`g‘Fe
(
feID
);

573 ià(
u£rFe
 =ğ
NULL
) {

576 
SysO³nFe
* 
sysFe
 =

577 
feMªag”
->
	`g‘Fe
(
u£rFe
->
šdexInSysO³nFeLi¡
);

578 
numAùu®By‹sR—d
 =

579 
sysFe
->
fe
->
	`R—dAt
(
bufãr
, 
size
, 
u£rFe
->
cu¼Off£tInFe
);

580 
u£rFe
->
cu¼Off£tInFe
 +ğ
numAùu®By‹sR—d
;

582 
	`u£rR—dWr™e
(
»adAddr
, 
bufãr
, 
numAùu®By‹sR—d
, 
USER_READ
);

583 
d–‘e
 [] 
bufãr
;

584  
numAùu®By‹sR—d
;

585 
	}
}

591 
	$şo£Im¶
()

593 
feID
 = 
machše
->
	`R—dRegi¡”
(4);

594 
U£rO³nFe
* 
u£rFe
 = 
cu¼’tTh»ad
->
¥aû
->
	`g‘PCB
()->
	`g‘Fe
(
feID
);

595 ià(
u£rFe
 =ğ
NULL
) {

598 
SysO³nFe
* 
sysFe
 =

599 
feMªag”
->
	`g‘Fe
(
u£rFe
->
šdexInSysO³nFeLi¡
);

600 
sysFe
->
	`şo£dBySšgËProûss
();

601 
cu¼’tTh»ad
->
¥aû
->
	`g‘PCB
()->
	`»moveFe
(
feID
);

603 
	}
}

610 
	$·geFauÉHªdËr
()

612 
çuÉšgVœtAddr
 = 
machše
->
	`R—dRegi¡”
(
BadVAddrReg
);

613 
vœtu®MemÜyMªag”
->
	`sw­PageIn
(
çuÉšgVœtAddr
);

615 
pid
 = 
cu¼’tTh»ad
->
¥aû
->
	`g‘PCB
()->
	`g‘PID
();

616 
vœtPage
 = 
çuÉšgVœtAddr
 / 
PageSize
;

617 
physPage
 = 
cu¼’tTh»ad
->
¥aû
->
	`g‘PageTabËEÁry
(
vœtPage
)->
physiÿlPage
;

620 
	`DEBUG
('v',"L %d: %d -> %d\n", 
pid
, 
vœtPage
, 
physPage
);

621 
	}
}

629 
	$Inüem’tPC
()

631 
cu¼’tReg
 = 
machše
->
	`R—dRegi¡”
(
PCReg
);

632 
ÃxtReg
 = 
machše
->
	`R—dRegi¡”
(
NextPCReg
);

633 
´evReg
 = 
machše
->
	`R—dRegi¡”
(
P»vPCReg
);

635 
cu¼’tReg
 = currentReg + 4;

636 
ÃxtReg
 =‚extReg + 4;

637 
´evReg
 =…revReg + 4;

639 
machšeLock
->
	`Acquœe
();

640 
machše
->
	`Wr™eRegi¡”
(
PCReg
, 
cu¼’tReg
);

641 
machše
->
	`Wr™eRegi¡”
(
NextPCReg
, 
ÃxtReg
);

642 
machše
->
	`Wr™eRegi¡”
(
P»vPCReg
, 
´evReg
);

643 
machšeLock
->
	`R–—£
();

644 
	}
}

	@userprog/memorymanager.cc

8 
	~"memÜymªag”.h
"

9 
	~"machše.h
"

12 
	gMemÜyMªag”
::
	$MemÜyMªag”
() {

13 
physPageAÎoÿtiÚ
 = 
Ãw
 
	`B™M­
(
NumPhysPages
);

14 
	}
}

17 
	gMemÜyMªag”
::~
	$MemÜyMªag”
() {

18 
d–‘e
 
physPageAÎoÿtiÚ
;

19 
	}
}

22 
	gMemÜyMªag”
::
	$g‘Page
() {

24 
·geIndex
 = 
physPageAÎoÿtiÚ
->
	`Fšd
();

25 ià(
·geIndex
 == -1) {

26 
	`DEBUG
('m', "Unableo find‡…age fromhe…ageable.");

27 
	`ASSERT
(
FALSE
);

29  
·geIndex
;

31 
	}
}

34 
	gMemÜyMªag”
::
	$ş—rPage
(
·geIndex
) {

35 
physPageAÎoÿtiÚ
->
	`CË¬
(
·geIndex
);

36 
	}
}

39 
	gMemÜyMªag”
::
	$g‘NumF»ePages
() {

40  
physPageAÎoÿtiÚ
->
	`NumCË¬
();

41 
	}
}

	@userprog/memorymanager.h

8 #iâdeà
MEMORY_MANAGER_H


9 
	#MEMORY_MANAGER_H


	)

11 
	~"b™m­.h
"

13 şas 
	cMemÜyMªag”
 {

15 
	mpublic
:

16 
MemÜyMªag”
();

17 ~
MemÜyMªag”
();

18 
g‘Page
();

19 
ş—rPage
();

20 
g‘NumF»ePages
();

22 
	m´iv©e
:

23 
B™M­
* 
physPageAÎoÿtiÚ
;

	@userprog/openfilemanager.cc

1 
	~"İ’femªag”.h
"

2 
	~<¡ršg.h
>

9 
	gSysO³nFeMªag”
::
	$SysO³nFeMªag”
(è: 
	$sysO³nFesM­
(
MAX_SYS_OPEN_FILES
è{
	}
}

17 
SysO³nFeMªag”
::~
	$SysO³nFeMªag”
(è{
	}
}

25 
SysO³nFeMªag”
::
	$addFe
(
SysO³nFe
 
fe
) {

27 
feIndex
 = 
sysO³nFesM­
.
	`Fšd
();

28 ià(
feIndex
 == -1) {

29 
	`årštf
(
¡d”r
,"No more„oom for‡ny more open system files.\n");

32 
sysO³nFeLi¡
[
feIndex
] = 
fe
;

33  
feIndex
;

35 
	}
}

43 
SysO³nFe
* 
	gSysO³nFeMªag”
::
	$g‘Fe
(* 
f’ame
, & 
šdex
) {

45 
i
 = 2; i < 
MAX_SYS_OPEN_FILES
; i++) {

47 ià(
sysO³nFesM­
.
	`Te¡
(
i
)) {

48 ià(!
	`¡rcmp
(
f’ame
, 
sysO³nFeLi¡
[
i
].filename)) {

49 
šdex
 = 
i
;

50  &
sysO³nFeLi¡
[
šdex
];

54  
NULL
;

55 
	}
}

63 
SysO³nFe
* 
	gSysO³nFeMªag”
::
	$g‘Fe
(
šdex
) {

65 ià(
sysO³nFesM­
.
	`Te¡
(
šdex
)) {

66  
sysO³nFeLi¡
 + 
šdex
;

68  
NULL
;

70 
	}
}

	@userprog/openfilemanager.h

8 #iâdeà
SYSOPENFILEMANAGER_H


9 
	#SYSOPENFILEMANAGER_H


	)

11 
	#MAX_SYS_OPEN_FILES
 32

	)

13 
	~"sysİ’fe.h
"

14 
	~"b™m­.h
"

16 şas 
	cSysO³nFeMªag”
 {

18 
	mpublic
:

19 
SysO³nFeMªag”
();

20 ~
SysO³nFeMªag”
();

21 
addFe
(
SysO³nFe
 
fe
);

22 
SysO³nFe
* 
g‘Fe
(* 
f’ame
, & 
šdex
);

23 
SysO³nFe
* 
g‘Fe
(
šdex
);

25 
	m´iv©e
:

26 
SysO³nFe
 
sysO³nFeLi¡
[
MAX_SYS_OPEN_FILES
];

27 
B™M­
 
	msysO³nFesM­
;

	@userprog/pcb.cc

7 
	~"pcb.h
"

8 
	~"ut™y.h
"

16 
	gPCB
::
	$PCB
(
pid
, 
·»ÁPID
è: 
	$İ’FesB™M­
(
MAX_NUM_FILES_OPEN
) {

18 
this
->
pid
 =…id;

19 
this
->
·»ÁPID
 =…arentPID;

20 
this
->
´oûss
 = 
NULL
;

21 
İ’FesB™M­
.
	`M¬k
(0);

22 
İ’FesB™M­
.
	`M¬k
(1);

23 
	}
}

31 
	gPCB
::~
	$PCB
(è{
	}
}

39 
PCB
::
	$g‘PID
() {

40  
this
->
pid
;

41 
	}
}

49 
	gPCB
::
	$addFe
(
U£rO³nFe
 
fe
) {

51 
feIndex
 = 
İ’FesB™M­
.
	`Fšd
();

52 ià(
feIndex
 == -1) {

53 
	`årštf
(
¡d”r
,"No more„oom for open files.\n");

56 
u£rO³nFeLi¡
[
feIndex
] = 
fe
;

57  
feIndex
;

59 
	}
}

67 
U£rO³nFe
* 
	gPCB
::
	$g‘Fe
(
feID
) {

69 ià(
İ’FesB™M­
.
	`Te¡
(
feID
)) {

70  
u£rO³nFeLi¡
 + 
feID
;

72  
NULL
;

74 
	}
}

82 
	gPCB
::
	$»moveFe
(
feID
) {

83 
İ’FesB™M­
.
	`CË¬
(
feID
);

84 
	}
}

	@userprog/pcb.h

7 #iâdeà
PCB_H


8 
	#PCB_H


	)

10 
	~"b™m­.h
"

11 
	~"u£rİ’fe.h
"

14 
	#P_GOOD
 0;

	)

15 
	#P_BAD
 1;

	)

16 
	#P_RUNNING
 2;

	)

17 
	#P_BLOCKED
 3;

	)

19 
	#MAX_NUM_FILES_OPEN
 32

	)

21 
şass
 
	gTh»ad
;

23 şas 
	cPCB
 {

25 
	mpublic
:

26 
PCB
(
pid
, 
·»ÁPID
);

27 ~
PCB
();

28 
g‘PID
();

29 
	m¡©us
;

30 
Th»ad
* 
	m´oûss
;

31 
addFe
(
U£rO³nFe
 
fe
);

32 
U£rO³nFe
* 
g‘Fe
(
feID
);

33 
»moveFe
(
feID
);

35 
	m´iv©e
:

36 
B™M­
 
İ’FesB™M­
;

37 
	mpid
;

38 
	m·»ÁPID
;

39 
U£rO³nFe
 
	mu£rO³nFeLi¡
[
MAX_NUM_FILES_OPEN
];

	@userprog/processmanager.cc

8 
	~"´oûssmªag”.h
"

9 
	~"ut™y.h
"

10 
	~"sy¡em.h
"

17 
	gProûssMªag”
::
	$ProûssMªag”
(è: 
	$´oûs£sB™M­
(
MAX_PROCESSES
) {

19 
pcbLi¡
 = 
Ãw
 
PCB
*[
MAX_PROCESSES
];

20 
cÚd™iÚLi¡
 = 
Ãw
 
CÚd™iÚ
*[
MAX_PROCESSES
];

21 
lockLi¡
 = 
Ãw
 
Lock
*[
MAX_PROCESSES
];

22 
addrS·ûLi¡
 = 
Ãw
 
AddrS·û
*[
MAX_PROCESSES
];

24 
numAvaPIDs
 = 
MAX_PROCESSES
;

25 
i
 = 0; i < 
MAX_PROCESSES
; i++) {

26 
lockLi¡
[
i
] = 
NULL
;

27 
cÚd™iÚLi¡
[
i
] = 
NULL
;

28 
pcbLi¡
[
i
] = 
NULL
;

29 
addrS·ûLi¡
[
i
] = 
NULL
;

31 
	}
}

38 
	gProûssMªag”
::~
	$ProûssMªag”
() {

39 
d–‘e
 [] 
pcbLi¡
;

40 
d–‘e
 [] 
cÚd™iÚLi¡
;

41 
d–‘e
 [] 
lockLi¡
;

42 
d–‘e
 [] 
addrS·ûLi¡
;

43 
	}
}

50 
	gProûssMªag”
::
	$g‘PID
() {

52 
ÃwPID
 = 
´oûs£sB™M­
.
	`Fšd
();

53 
´oûs£sWa™šgOnPID
[
ÃwPID
] = 0;

54 
´oûs£sWa™šgOnPID
[
ÃwPID
]++;

55  
ÃwPID
;

56 
	}
}

64 
	gProûssMªag”
::
	$ş—rPID
(
pid
) {

66 
´oûs£sWa™šgOnPID
[
pid
]--;

67 ià(
´oûs£sWa™šgOnPID
[
pid
] == 0) {

68 
´oûs£sB™M­
.
	`CË¬
(
pid
);

70 
	}
}

77 
	gProûssMªag”
::
	$addProûss
(
PCB
* 
pcb
, 
pid
) {

78 
pcbLi¡
[
pid
] = 
pcb
;

79 
	}
}

87 
	gProûssMªag”
::
	$još
(
pid
) {

89 
Lock
* 
lockFÜOth”Proûss
 = 
lockLi¡
[
pid
];

90 ià(
lockFÜOth”Proûss
 =ğ
NULL
) {

91 
lockFÜOth”Proûss
 = 
Ãw
 
	`Lock
("");

92 
lockLi¡
[
pid
] = 
lockFÜOth”Proûss
;

95 
CÚd™iÚ
* 
cÚd™iÚFÜOth”Proûss
 = 
cÚd™iÚLi¡
[
pid
];

96 ià(
cÚd™iÚFÜOth”Proûss
 =ğ
NULL
) {

97 
cÚd™iÚFÜOth”Proûss
 = 
Ãw
 
	`CÚd™iÚ
("");

98 
cÚd™iÚLi¡
[
pid
] = 
cÚd™iÚFÜOth”Proûss
;

101 
lockFÜOth”Proûss
->
	`Acquœe
();

103 
´oûs£sWa™šgOnPID
[
pid
]++;

104 
cÚd™iÚFÜOth”Proûss
->
	`Wa™
(
lockFÜOth”Proûss
);

105 
´oûs£sWa™šgOnPID
[
pid
]--;

107 ià(
´oûs£sWa™šgOnPID
[
pid
] == 0) {

108 
´oûs£sB™M­
.
	`CË¬
(
pid
);

110 
lockFÜOth”Proûss
->
	`R–—£
();

111 
	}
}

119 
	gProûssMªag”
::
	$brßdÿ¡
(
pid
) {

121 
Lock
* 
lock
 = 
lockLi¡
[
pid
];

122 
CÚd™iÚ
* 
cÚd™iÚ
 = 
cÚd™iÚLi¡
[
pid
];

123 
pcbStu£s
[
pid
] = 
pcbLi¡
[pid]->
¡©us
;

125 ià(
cÚd™iÚ
 !ğ
NULL
) {

126 
lock
->
	`Acquœe
();

127 
cÚd™iÚ
->
	`Brßdÿ¡
(
lock
);

128 
lock
->
	`R–—£
();

130 
	}
}

137 
	gProûssMªag”
::
	$g‘Stus
(
pid
) {

138 ià(
´oûs£sB™M­
.
	`Te¡
(
pid
) == 0) {

141  
pcbStu£s
[
pid
];

142 
	}
}

149 
	gProûssMªag”
::
	$isAÎFšished
() {

150 
i
 = 1; i < 
MAX_PROCESSES
; i++) {

151 ià(
´oûs£sB™M­
.
	`Te¡
(
i
) != 0) {

156 
	}
}

	@userprog/processmanager.h

8 #iâdeà
PROCESS_MANAGER_H


9 
	#PROCESS_MANAGER_H


	)

11 
	#MAX_PROCESSES
 32

	)

13 
	~"pcb.h
"

14 
	~"synch.h
"

16 
şass
 
	gAddrS·û
;

18 şas 
	cProûssMªag”
 {

20 
	mpublic
:

21 
ProûssMªag”
();

22 ~
ProûssMªag”
();

23 
g‘PID
();

24 
g‘Stus
(
pid
);

25 
ş—rPID
();

26 
addProûss
(
PCB
* 
pcb
, 
pid
);

27 
brßdÿ¡
(
pid
);

28 
još
(
pid
);

29 
isAÎFšished
();

32 
	m´iv©e
:

33 
B™M­
 
´oûs£sB™M­
;

34 
PCB
** 
	mpcbLi¡
;

35 
CÚd™iÚ
** 
	mcÚd™iÚLi¡
;

36 
Lock
** 
	mlockLi¡
;

37 
AddrS·û
** 
	maddrS·ûLi¡
;

38 
	mpcbStu£s
[
MAX_PROCESSES
];

39 
	m´oûs£sWa™šgOnPID
[
MAX_PROCESSES
];

40 
	mnumAvaPIDs
;

	@userprog/progtest.cc

11 
	~"cİyright.h
"

12 
	~"sy¡em.h
"

13 
	~"cÚsŞe.h
"

14 
	~"addr¥aû.h
"

15 
	~"synch.h
"

24 
	$S¹Proûss
(*
f’ame
)

26 
O³nFe
 *
execubË
 = 
feSy¡em
->
	`O³n
(
f’ame
);

27 ià(
execubË
 =ğ
NULL
) {

28 
	`årštf
(
¡d”r
,"UÇbËØİ’ f%s\n", 
f’ame
);

32 
ÃwPID
 = 
´oûssMªag”
->
	`g‘PID
();

33 
PCB
* 
ÃwPCB
 = 
Ãw
 
	`PCB
(
ÃwPID
, -1);

34 
ÃwPCB
->
¡©us
 = 
P_RUNNING
;

35 
´oûssMªag”
->
	`addProûss
(
ÃwPCB
, 
ÃwPID
);

36 
AddrS·û
* 
¥aû
 = 
Ãw
 
	`AddrS·û
(
execubË
, 
ÃwPCB
);

37 
cu¼’tTh»ad
->
¥aû
 = space;

39 
d–‘e
 
execubË
;

41 ià((
¥aû
->
	`g‘PCB
())->
	`g‘PID
() == -1) {

42 
	`årštf
(
¡d”r
,"Unableo‡cquire valid PCB for…rocess. Terminating.\n");

43 
d–‘e
 
¥aû
;

47 
¥aû
->
	`In™Regi¡”s
();

48 
¥aû
->
	`Re¡ÜeS‹
();

50 
machše
->
	`Run
();

51 
	`ASSERT
(
FALSE
);

54 
	}
}

59 
CÚsŞe
 *
	gcÚsŞe
;

60 
Sem­hÜe
 *
	g»adAva
;

61 
Sem­hÜe
 *
	gwr™eDÚe
;

68 
	$R—dAva
(
¬g
è{ 
»adAva
->
	`V
(); 
	}
}

69 
	$Wr™eDÚe
(
¬g
è{ 
wr™eDÚe
->
	`V
(); 
	}
}

78 
	$CÚsŞeTe¡
 (*
š
, *
out
)

80 
ch
;

82 
cÚsŞe
 = 
Ãw
 
	`CÚsŞe
(
š
, 
out
, 
R—dAva
, 
Wr™eDÚe
, 0);

83 
»adAva
 = 
Ãw
 
	`Sem­hÜe
("read‡vail", 0);

84 
wr™eDÚe
 = 
Ãw
 
	`Sem­hÜe
("write done", 0);

87 
»adAva
->
	`P
();

88 
ch
 = 
cÚsŞe
->
	`G‘Ch¬
();

89 
cÚsŞe
->
	`PutCh¬
(
ch
);

90 
wr™eDÚe
->
	`P
() ;

91 ià(
ch
 == 'q') ;

93 
	}
}

	@userprog/syscall.h

13 #iâdeà
SYSCALLS_H


14 
	#SYSCALLS_H


	)

16 
	~"cİyright.h
"

21 
	#SC_H®t
 0

	)

22 
	#SC_Ex™
 1

	)

23 
	#SC_Exec
 2

	)

24 
	#SC_Još
 3

	)

25 
	#SC_C»©e
 4

	)

26 
	#SC_O³n
 5

	)

27 
	#SC_R—d
 6

	)

28 
	#SC_Wr™e
 7

	)

29 
	#SC_Clo£
 8

	)

30 
	#SC_FÜk
 9

	)

31 
	#SC_Y›ld
 10

	)

33 #iâdeà
IN_ASM


46 
H®t
();

52 
Ex™
(
¡©us
);

55 
	tS·ûId
;

60 
S·ûId
 
Exec
(*
Çme
);

65 
Još
(
S·ûId
 
id
);

78 
	tO³nFeId
;

86 
	#CÚsŞeIÅut
 0

	)

87 
	#CÚsŞeOuut
 1

	)

90 
C»©e
(*
Çme
);

95 
O³nFeId
 
O³n
(*
Çme
);

98 
Wr™e
(*
bufãr
, 
size
, 
O³nFeId
 
id
);

106 
R—d
(*
bufãr
, 
size
, 
O³nFeId
 
id
);

109 
Clo£
(
O³nFeId
 
id
);

120 
FÜk
((*
func
)());

125 
Y›ld
();

	@userprog/sysopenfile.cc

1 
	~"sysİ’fe.h
"

10 
	gSysO³nFe
::
	$şo£dBySšgËProûss
() {

12 ià(
numProûs£sAcûssšg
 <= 0) {

15 
numProûs£sAcûssšg
--;

16 ià(
numProûs£sAcûssšg
 == 0) {

17 
d–‘e
 
f’ame
;

18 
d–‘e
 
fe
;

20 
	}
}

	@userprog/sysopenfile.h

1 #iâdeà
SYSOPENFILE_H


2 
	#SYSOPENFILE_H


	)

4 
	~"fesys.h
"

6 şas 
	cSysO³nFe
 {

8 
	mpublic
:

9 
O³nFe
* 
fe
;

10 
	mfeID
;

11 * 
	mf’ame
;

12 
	mnumProûs£sAcûssšg
;

14 
şo£dBySšgËProûss
();

	@userprog/useropenfile.cc

1 
	~"u£rİ’fe.h
"

	@userprog/useropenfile.h

1 #iâdeà
USEROPENFILE_H


2 
	#USEROPENFILE_H


	)

4 şas 
	cU£rO³nFe
 {

6 
	mpublic
:

7 * 
feName
;

8 
	mšdexInSysO³nFeLi¡
;

9 
	mcu¼Off£tInFe
;

	@vm/virtualmemorymanager.cc

8 
	~<¡dlib.h
>

9 
	~<machše.h
>

10 
	~"vœtu®memÜymªag”.h
"

11 
	~"sy¡em.h
"

13 
	gVœtu®MemÜyMªag”
::
	$Vœtu®MemÜyMªag”
()

15 
feSy¡em
->
	`C»©e
(
SWAP_FILENAME
, 
SWAP_SECTOR_SIZE
 * 
SWAP_SECTORS
);

16 
sw­Fe
 = 
feSy¡em
->
	`O³n
(
SWAP_FILENAME
);

18 
sw­SeùÜM­
 = 
Ãw
 
	`B™M­
(
SWAP_SECTORS
);

19 
physiÿlMemÜyInfo
 = 
Ãw
 
F¿meInfo
[
NumPhysPages
];

21 
ÃxtViùim
 = 0;

22 
	}
}

24 
	gVœtu®MemÜyMªag”
::~
	$Vœtu®MemÜyMªag”
()

26 
feSy¡em
->
	`Remove
(
SWAP_FILENAME
);

27 
d–‘e
 
sw­Fe
;

28 
d–‘e
 [] 
physiÿlMemÜyInfo
;

30 
	}
}

32 
	gVœtu®MemÜyMªag”
::
	$®locSw­SeùÜ
()

34 
loÿtiÚ
 = 
sw­SeùÜM­
->
	`Fšd
(è* 
PageSize
;

35  
loÿtiÚ
;

36 
	}
}

44 
	gVœtu®MemÜyMªag”
::
	$wr™eToSw­
(*
·ge
, 
·geSize
,

45 
backStÜeLoc
)

47 
sw­Fe
->
	`Wr™eAt
(
·ge
, 
·geSize
, 
backStÜeLoc
);

48 
	}
}

53 
	gVœtu®MemÜyMªag”
::
	$sw­PageIn
(
vœtAddr
)

56 
T¿n¦©iÚEÁry
* 
cu¼PageEÁry
;

57 if(
ÃxtViùim
>ğ
NumPhysPages
) {

58 
	`årštf
(
¡d”r
, "Fatalƒrror: No more space‡vailable\n");

59 
	`ex™
(1);

63 
F¿meInfo
 * 
physPageInfo
 = 
physiÿlMemÜyInfo
 + 
ÃxtViùim
;

65 
physPageInfo
->
¥aû
 = 
cu¼’tTh»ad
->space;

66 
physPageInfo
->
·geTabËIndex
 = 
vœtAddr
 / 
PageSize
;

67 
cu¼PageEÁry
 = 
	`g‘PageTabËEÁry
(
physPageInfo
);

68 
cu¼PageEÁry
->
physiÿlPage
 = 
memÜyMªag”
->
	`g‘Page
();

69 
	`lßdPageToCu¼Viùim
(
vœtAddr
);

70 
ÃxtViùim
 =‚extVictim + 1;

71 
	}
}

78 
	gVœtu®MemÜyMªag”
::
	$»Ëa£Pages
(
AddrS·û
* 
¥aû
)

80 
i
 = 0; i < 
¥aû
->
	`g‘NumPages
(); i++)

82 
T¿n¦©iÚEÁry
* 
cu¼Page
 = 
¥aû
->
	`g‘PageTabËEÁry
(
i
);

88 ià(
cu¼Page
->
v®id
 =ğ
TRUE
)

91 
cu¼PID
 = 
¥aû
->
	`g‘PCB
()->
	`g‘PID
();

92 
	`DEBUG
('v', "E %d: %d\n", 
cu¼PID
, 
cu¼Page
->
vœtu®Page
);

93 
memÜyMªag”
->
	`ş—rPage
(
cu¼Page
->
physiÿlPage
);

94 
physiÿlMemÜyInfo
[
cu¼Page
->
physiÿlPage
].
¥aû
 = 
NULL
;

96 
sw­SeùÜM­
->
	`CË¬
((
cu¼Page
->
loÿtiÚOnDisk
è/ 
PageSize
);

98 
	}
}

104 
	gVœtu®MemÜyMªag”
::
	$lßdPageToCu¼Viùim
(
vœtAddr
)

106 
·geTabËIndex
 = 
vœtAddr
 / 
PageSize
;

107 
T¿n¦©iÚEÁry
* 
·ge
 = 
cu¼’tTh»ad
->
¥aû
->
	`g‘PageTabËEÁry
(
·geTabËIndex
);

108 * 
physMemLoc
 = 
machše
->
mašMemÜy
 + 
·ge
->
physiÿlPage
 * 
PageSize
;

109 
sw­S·ûLoc
 = 
·ge
->
loÿtiÚOnDisk
;

110 
sw­Fe
->
	`R—dAt
(
physMemLoc
, 
PageSize
, 
sw­S·ûLoc
);

114 
·ge
->
v®id
 = 
TRUE
;

117 
	}
}

125 
T¿n¦©iÚEÁry
* 
	gVœtu®MemÜyMªag”
::
	$g‘PageTabËEÁry
(
F¿meInfo
 * 
physPageInfo
)

127 
T¿n¦©iÚEÁry
* 
·ge
 = 
physPageInfo
->
¥aû
->
	`g‘PageTabËEÁry
ÕhysPageInfo->
·geTabËIndex
);

128  
·ge
;

129 
	}
}

131 
	gVœtu®MemÜyMªag”
::
	$cİySw­SeùÜ
(
to
, 
äom
)

133 
£ùÜBuf
[
SeùÜSize
];

134 
sw­Fe
->
	`R—dAt
(
£ùÜBuf
, 
SWAP_SECTOR_SIZE
, 
äom
);

135 
sw­Fe
->
	`Wr™eAt
(
£ùÜBuf
, 
SWAP_SECTOR_SIZE
, 
to
);

136 
	}
}

	@vm/virtualmemorymanager.h

8 #iâdeà
VIRTUAL_MEMORY_MANAGER_H


9 
	#VIRTUAL_MEMORY_MANAGER_H


	)

11 
	~"b™m­.h
"

13 
şass
 
	gAddrS·û
;

14 
şass
 
	gT¿n¦©iÚEÁry
;

16 
	#SWAP_SECTORS
 512

	)

17 
	#SWAP_SECTOR_SIZE
 
PageSize


	)

18 
	#SWAP_FILENAME
 "SWAP"

	)

20 
	sF¿meInfo


22 
AddrS·û
* 
	m¥aû
;

23 
	m·geTabËIndex
;

25 şas 
	cVœtu®MemÜyMªag”


27 
	mpublic
:

28 
Vœtu®MemÜyMªag”
();

29 ~
Vœtu®MemÜyMªag”
();

31 
®locSw­SeùÜ
();

32 
wr™eToSw­
(*
·ge
, 
·geSize
, 
backStÜeLoc
);

33 
sw­PageIn
(
vœtAddr
);

34 
»Ëa£Pages
(
AddrS·û
* 
¥aû
);

35 
cİySw­SeùÜ
(
to
, 
äom
);

37 
lßdPageToCu¼Viùim
(
vœtAddr
);

38 
T¿n¦©iÚEÁry
* 
g‘PageTabËEÁry
(
F¿meInfo
 * 
·geInfo
);

40 
	m´iv©e
:

41 
B™M­
 *
sw­SeùÜM­
;

42 
O³nFe
 *
	msw­Fe
;

43 
F¿meInfo
 *
	mphysiÿlMemÜyInfo
;

44 
	mÃxtViùim
;

	@/usr/include/errno.h

22 #iâdef 
_ERRNO_H


26 #iâdef 
__Ãed_Em©h


27 
	#_ERRNO_H
 1

	)

28 
	~<ã©u»s.h
>

31 
	g__BEGIN_DECLS


35 
	~<b™s/”ºo.h
>

36 #undeà
__Ãed_Em©h


38 #ifdef 
_ERRNO_H


45 #iâdef 
”ºo


46 
”ºo
;

49 #ifdeà
__USE_GNU


54 *
´og¿m_švoÿtiÚ_Çme
, *
´og¿m_švoÿtiÚ_shÜt_Çme
;

58 
	g__END_DECLS


66 #ià
defšed
 
__USE_GNU
 || defšed 
__Ãed_”rÜ_t


67 #iâdeà
__”rÜ_t_defšed


68 
	t”rÜ_t
;

69 
	#__”rÜ_t_defšed
 1

	)

71 #undeà
__Ãed_”rÜ_t


	@/usr/include/fcntl.h

22 #iâdef 
_FCNTL_H


23 
	#_FCNTL_H
 1

	)

25 
	~<ã©u»s.h
>

28 
	g__BEGIN_DECLS


31 
	~<b™s/ty³s.h
>

35 
	~<b™s/fú.h
>

40 #iâdeà
__mode_t_defšed


41 
__mode_t
 
	tmode_t
;

42 
	#__mode_t_defšed


	)

45 #iâdeà
__off_t_defšed


46 #iâdeà
__USE_FILE_OFFSET64


47 
__off_t
 
	toff_t
;

49 
__off64_t
 
	toff_t
;

51 
	#__off_t_defšed


	)

54 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


55 
__off64_t
 
	toff64_t
;

56 
	#__off64_t_defšed


	)

59 #iâdeà
__pid_t_defšed


60 
__pid_t
 
	tpid_t
;

61 
	#__pid_t_defšed


	)

65 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


66 
	#__Ãed_time¥ec


	)

67 
	~<time.h
>

68 
	~<b™s/¡©.h
>

70 
	#S_IFMT
 
__S_IFMT


	)

71 
	#S_IFDIR
 
__S_IFDIR


	)

72 
	#S_IFCHR
 
__S_IFCHR


	)

73 
	#S_IFBLK
 
__S_IFBLK


	)

74 
	#S_IFREG
 
__S_IFREG


	)

75 #ifdeà
__S_IFIFO


76 
	#S_IFIFO
 
__S_IFIFO


	)

78 #ifdeà
__S_IFLNK


79 
	#S_IFLNK
 
__S_IFLNK


	)

81 #ià(
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8
è&& defšed 
__S_IFSOCK


82 
	#S_IFSOCK
 
__S_IFSOCK


	)

87 
	#S_ISUID
 
__S_ISUID


	)

88 
	#S_ISGID
 
__S_ISGID


	)

90 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


92 
	#S_ISVTX
 
__S_ISVTX


	)

95 
	#S_IRUSR
 
__S_IREAD


	)

96 
	#S_IWUSR
 
__S_IWRITE


	)

97 
	#S_IXUSR
 
__S_IEXEC


	)

99 
	#S_IRWXU
 (
__S_IREAD
|
__S_IWRITE
|
__S_IEXEC
)

	)

101 
	#S_IRGRP
 (
S_IRUSR
 >> 3è

	)

102 
	#S_IWGRP
 (
S_IWUSR
 >> 3è

	)

103 
	#S_IXGRP
 (
S_IXUSR
 >> 3è

	)

105 
	#S_IRWXG
 (
S_IRWXU
 >> 3)

	)

107 
	#S_IROTH
 (
S_IRGRP
 >> 3è

	)

108 
	#S_IWOTH
 (
S_IWGRP
 >> 3è

	)

109 
	#S_IXOTH
 (
S_IXGRP
 >> 3è

	)

111 
	#S_IRWXO
 (
S_IRWXG
 >> 3)

	)

114 #ifdef 
__USE_MISC


115 #iâdeà
R_OK


118 
	#R_OK
 4

	)

119 
	#W_OK
 2

	)

120 
	#X_OK
 1

	)

121 
	#F_OK
 0

	)

126 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


127 
	#SEEK_SET
 0

	)

128 
	#SEEK_CUR
 1

	)

129 
	#SEEK_END
 2

	)

137 
fú
 (
__fd
, 
__cmd
, ...);

145 #iâdeà
__USE_FILE_OFFSET64


146 
	$İ’
 (cÚ¡ *
__fe
, 
__oæag
, ...è
	`__nÚnuÎ
 ((1));

148 #ifdeà
__REDIRECT


149 
	`__REDIRECT
 (
İ’
, (cÚ¡ *
__fe
, 
__oæag
, ...), 
İ’64
)

150 
	`__nÚnuÎ
 ((1));

152 
	#İ’
 
İ’64


	)

155 #ifdeà
__USE_LARGEFILE64


156 
	$İ’64
 (cÚ¡ *
__fe
, 
__oæag
, ...è
	`__nÚnuÎ
 ((1));

159 #ifdeà
__USE_ATFILE


169 #iâdeà
__USE_FILE_OFFSET64


170 
	$İ’©
 (
__fd
, cÚ¡ *
__fe
, 
__oæag
, ...)

171 
	`__nÚnuÎ
 ((2));

173 #ifdeà
__REDIRECT


174 
	`__REDIRECT
 (
İ’©
, (
__fd
, cÚ¡ *
__fe
, 
__oæag
,

175 ...), 
İ’©64
è
	`__nÚnuÎ
 ((2));

177 
	#İ’©
 
İ’©64


	)

180 #ifdeà
__USE_LARGEFILE64


181 
	$İ’©64
 (
__fd
, cÚ¡ *
__fe
, 
__oæag
, ...)

182 
	`__nÚnuÎ
 ((2));

191 #iâdeà
__USE_FILE_OFFSET64


192 
	$ü—t
 (cÚ¡ *
__fe
, 
mode_t
 
__mode
è
	`__nÚnuÎ
 ((1));

194 #ifdeà
__REDIRECT


195 
	`__REDIRECT
 (
ü—t
, (cÚ¡ *
__fe
, 
mode_t
 
__mode
),

196 
ü—t64
è
	`__nÚnuÎ
 ((1));

198 
	#ü—t
 
ü—t64


	)

201 #ifdeà
__USE_LARGEFILE64


202 
	$ü—t64
 (cÚ¡ *
__fe
, 
mode_t
 
__mode
è
	`__nÚnuÎ
 ((1));

205 #ià!
defšed
 
F_LOCK
 && (defšed 
__USE_MISC
 || (defšed 
__USE_XOPEN_EXTENDED
 \

206 && !
defšed
 
__USE_POSIX
))

215 
	#F_ULOCK
 0

	)

216 
	#F_LOCK
 1

	)

217 
	#F_TLOCK
 2

	)

218 
	#F_TEST
 3

	)

220 #iâdeà
__USE_FILE_OFFSET64


221 
	`lockf
 (
__fd
, 
__cmd
, 
off_t
 
__Ën
);

223 #ifdeà
__REDIRECT


224 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
), 
lockf64
);

226 
	#lockf
 
lockf64


	)

229 #ifdeà
__USE_LARGEFILE64


230 
	`lockf64
 (
__fd
, 
__cmd
, 
off64_t
 
__Ën
);

234 #ifdeà
__USE_XOPEN2K


237 #iâdeà
__USE_FILE_OFFSET64


238 
	$posix_çdvi£
 (
__fd
, 
off_t
 
__off£t
, off_ˆ
__Ën
,

239 
__advi£
è
__THROW
;

241 #ifdeà
__REDIRECT_NTH


242 
	`__REDIRECT_NTH
 (
posix_çdvi£
, (
__fd
, 
__off64_t
 
__off£t
,

243 
__off64_t
 
__Ën
, 
__advi£
),

244 
posix_çdvi£64
);

246 
	#posix_çdvi£
 
posix_çdvi£64


	)

249 #ifdeà
__USE_LARGEFILE64


250 
	$posix_çdvi£64
 (
__fd
, 
off64_t
 
__off£t
, off64_ˆ
__Ën
,

251 
__advi£
è
__THROW
;

259 #iâdeà
__USE_FILE_OFFSET64


260 
	`posix_çÎoÿ‹
 (
__fd
, 
off_t
 
__off£t
, off_ˆ
__Ën
);

262 #ifdeà
__REDIRECT


263 
	`__REDIRECT
 (
posix_çÎoÿ‹
, (
__fd
, 
__off64_t
 
__off£t
,

264 
__off64_t
 
__Ën
),

265 
posix_çÎoÿ‹64
);

267 
	#posix_çÎoÿ‹
 
posix_çÎoÿ‹64


	)

270 #ifdeà
__USE_LARGEFILE64


271 
	`posix_çÎoÿ‹64
 (
__fd
, 
off64_t
 
__off£t
, off64_ˆ
__Ën
);

277 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ
 \

278 && 
defšed
 
__va_¬g_·ck_Ën


279 
	~<b™s/fú2.h
>

282 
__END_DECLS


	@/usr/include/limits.h

22 #iâdeà
_LIBC_LIMITS_H_


23 
	#_LIBC_LIMITS_H_
 1

	)

25 
	~<ã©u»s.h
>

31 
	#MB_LEN_MAX
 16

	)

36 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2

41 #iâdeà
_LIMITS_H


42 
	#_LIMITS_H
 1

	)

44 
	~<b™s/wÜdsize.h
>

53 
	#CHAR_BIT
 8

	)

56 
	#SCHAR_MIN
 (-128)

	)

57 
	#SCHAR_MAX
 127

	)

60 
	#UCHAR_MAX
 255

	)

63 #ifdeà
__CHAR_UNSIGNED__


64 
	#CHAR_MIN
 0

	)

65 
	#CHAR_MAX
 
UCHAR_MAX


	)

67 
	#CHAR_MIN
 
SCHAR_MIN


	)

68 
	#CHAR_MAX
 
SCHAR_MAX


	)

72 
	#SHRT_MIN
 (-32768)

	)

73 
	#SHRT_MAX
 32767

	)

76 
	#USHRT_MAX
 65535

	)

79 
	#INT_MIN
 (-
INT_MAX
 - 1)

	)

80 
	#INT_MAX
 2147483647

	)

83 
	#UINT_MAX
 4294967295U

	)

86 #ià
__WORDSIZE
 == 64

87 
	#LONG_MAX
 9223372036854775807L

	)

89 
	#LONG_MAX
 2147483647L

	)

91 
	#LONG_MIN
 (-
LONG_MAX
 - 1L)

	)

94 #ià
__WORDSIZE
 == 64

95 
	#ULONG_MAX
 18446744073709551615UL

	)

97 
	#ULONG_MAX
 4294967295UL

	)

100 #ifdeà
__USE_ISOC99


103 
	#LLONG_MAX
 9223372036854775807LL

	)

104 
	#LLONG_MIN
 (-
LLONG_MAX
 - 1LL)

	)

107 
	#ULLONG_MAX
 18446744073709551615ULL

	)

121 #ià
defšed
 
__GNUC__
 && !defšed 
_GCC_LIMITS_H_


123 #šşude_Ãxˆ<
lim™s
.
h
>

129 #ià
defšed
 
__USE_ISOC99
 && defšed 
__GNUC__


130 #iâdeà
LLONG_MIN


131 
	#LLONG_MIN
 (-
LLONG_MAX
-1)

	)

133 #iâdeà
LLONG_MAX


134 
	#LLONG_MAX
 
__LONG_LONG_MAX__


	)

136 #iâdeà
ULLONG_MAX


137 
	#ULLONG_MAX
 (
LLONG_MAX
 * 2ULL + 1)

	)

141 #ifdef 
__USE_POSIX


143 
	~<b™s/posix1_lim.h
>

146 #ifdef 
__USE_POSIX2


147 
	~<b™s/posix2_lim.h
>

150 #ifdef 
__USE_XOPEN


151 
	~<b™s/xİ’_lim.h
>

	@/usr/include/signal.h

22 #iâdef 
_SIGNAL_H


24 #ià!
defšed
 
__Ãed_sig_©omic_t
 && !defšed 
__Ãed_sig£t_t


25 
	#_SIGNAL_H


	)

28 
	~<ã©u»s.h
>

30 
	g__BEGIN_DECLS


32 
	~<b™s/sig£t.h
>

36 #ià
defšed
 
__Ãed_sig_©omic_t
 || defšed 
_SIGNAL_H


37 #iâdeà
__sig_©omic_t_defšed


38 
	#__sig_©omic_t_defšed


	)

39 
__BEGIN_NAMESPACE_STD


40 
__sig_©omic_t
 
	tsig_©omic_t
;

41 
	g__END_NAMESPACE_STD


43 #undeà
__Ãed_sig_©omic_t


46 #ià
defšed
 
__Ãed_sig£t_t
 || (defšed 
_SIGNAL_H
 && defšed 
__USE_POSIX
)

47 #iâdeà
__sig£t_t_defšed


48 
	#__sig£t_t_defšed


	)

49 
__sig£t_t
 
	tsig£t_t
;

51 #undeà
__Ãed_sig£t_t


54 #ifdeà
_SIGNAL_H


56 
	~<b™s/ty³s.h
>

57 
	~<b™s/signum.h
>

59 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


60 #iâdeà
__pid_t_defšed


61 
__pid_t
 
	tpid_t
;

62 
	#__pid_t_defšed


	)

64 #ifdeà
__USE_XOPEN


66 #iâdeà
__uid_t_defšed


67 
__uid_t
 
	tuid_t
;

68 
	#__uid_t_defšed


	)

72 #ifdeà
__USE_POSIX199309


74 
	#__Ãed_time¥ec


	)

75 
	~<time.h
>

78 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_XOPEN_EXTENDED


80 
	~<b™s/sigšfo.h
>

85 (*
	t__sighªdËr_t
) ();

90 
__sighªdËr_t
 
	$__sysv_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

91 
__THROW
;

92 #ifdeà
__USE_GNU


93 
__sighªdËr_t
 
	$sysv_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

94 
__THROW
;

100 
__BEGIN_NAMESPACE_STD


101 #ifdeà
__USE_BSD


102 
__sighªdËr_t
 
	$sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

103 
__THROW
;

106 #ifdeà
__REDIRECT_NTH


107 
__sighªdËr_t
 
	`__REDIRECT_NTH
 (
sigÇl
,

108 (
__sig
, 
__sighªdËr_t
 
__hªdËr
),

109 
__sysv_sigÇl
);

111 
	#sigÇl
 
__sysv_sigÇl


	)

114 
__END_NAMESPACE_STD


116 #ifdeà
__USE_XOPEN


119 
__sighªdËr_t
 
	$bsd_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

120 
__THROW
;

126 #ifdeà
__USE_POSIX


127 
	$kl
 (
__pid_t
 
__pid
, 
__sig
è
__THROW
;

130 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


134 
	$kÍg
 (
__pid_t
 
__pg½
, 
__sig
è
__THROW
;

137 
__BEGIN_NAMESPACE_STD


139 
	$¿i£
 (
__sig
è
__THROW
;

140 
__END_NAMESPACE_STD


142 #ifdeà
__USE_SVID


144 
__sighªdËr_t
 
	$ssigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

145 
__THROW
;

146 
	$gsigÇl
 (
__sig
è
__THROW
;

149 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN2K


151 
	`psigÇl
 (
__sig
, cÚ¡ *
__s
);

154 #ifdeà
__USE_XOPEN2K


156 
	`psigšfo
 (cÚ¡ 
sigšfo_t
 *
__pšfo
, cÚ¡ *
__s
);

167 
	`__sig·u£
 (
__sig_Ü_mask
, 
__is_sig
);

169 #ifdeà
__USE_XOPEN


170 #ifdeà
__GNUC__


171 
	$sig·u£
 (
__sig
è
	`__asm__
 ("__xpg_sigpause");

174 
	#sig·u£
(
sig
è
	`__sig·u£
 ((sig), 1)

	)

179 #ifdeà
__USE_BSD


186 
	#sigmask
(
sig
è
	`__sigmask
(sig)

	)

189 
	$sigblock
 (
__mask
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

192 
	$sig£tmask
 (
__mask
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

195 
	$sigg‘mask
 (è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

199 #ifdeà
__USE_MISC


200 
	#NSIG
 
_NSIG


	)

203 #ifdeà
__USE_GNU


204 
__sighªdËr_t
 
	tsighªdËr_t
;

208 #ifdeà
__USE_BSD


209 
__sighªdËr_t
 
	tsig_t
;

212 #ifdeà
__USE_POSIX


215 
	$sigem±y£t
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

218 
	$sigfl£t
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

221 
	$sigadd£t
 (
sig£t_t
 *
__£t
, 
__signo
è
__THROW
 
	`__nÚnuÎ
 ((1));

224 
	$sigd–£t
 (
sig£t_t
 *
__£t
, 
__signo
è
__THROW
 
	`__nÚnuÎ
 ((1));

227 
	$sigismemb”
 (cÚ¡ 
sig£t_t
 *
__£t
, 
__signo
)

228 
__THROW
 
	`__nÚnuÎ
 ((1));

230 #ifdeà
__USE_GNU


232 
	$sigi£m±y£t
 (cÚ¡ 
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

235 
	$sigªd£t
 (
sig£t_t
 *
__£t
, cÚ¡ sig£t_ˆ*
__Ëá
,

236 cÚ¡ 
sig£t_t
 *
__right
è
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

239 
	$sigÜ£t
 (
sig£t_t
 *
__£t
, cÚ¡ sig£t_ˆ*
__Ëá
,

240 cÚ¡ 
sig£t_t
 *
__right
è
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

245 
	~<b™s/sigaùiÚ.h
>

248 
	$sig´ocmask
 (
__how
, cÚ¡ 
sig£t_t
 *
__»¡riù
 
__£t
,

249 
sig£t_t
 *
__»¡riù
 
__o£t
è
__THROW
;

256 
	$sigsu¥’d
 (cÚ¡ 
sig£t_t
 *
__£t
è
	`__nÚnuÎ
 ((1));

259 
	$sigaùiÚ
 (
__sig
, cÚ¡ 
sigaùiÚ
 *
__»¡riù
 
__aù
,

260 
sigaùiÚ
 *
__»¡riù
 
__ßù
è
__THROW
;

263 
	$sig³ndšg
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

270 
	$sigwa™
 (cÚ¡ 
sig£t_t
 *
__»¡riù
 
__£t
, *__»¡riù 
__sig
)

271 
	`__nÚnuÎ
 ((1, 2));

273 #ifdeà
__USE_POSIX199309


278 
	$sigwa™šfo
 (cÚ¡ 
sig£t_t
 *
__»¡riù
 
__£t
,

279 
sigšfo_t
 *
__»¡riù
 
__šfo
è
	`__nÚnuÎ
 ((1));

286 
	$sigtimedwa™
 (cÚ¡ 
sig£t_t
 *
__»¡riù
 
__£t
,

287 
sigšfo_t
 *
__»¡riù
 
__šfo
,

288 cÚ¡ 
time¥ec
 *
__»¡riù
 
__timeout
)

289 
	`__nÚnuÎ
 ((1));

293 
	$sigqueue
 (
__pid_t
 
__pid
, 
__sig
, cÚ¡ 
sigv®
 
__v®
)

294 
__THROW
;

299 #ifdeà
__USE_BSD


303 cÚ¡ *cÚ¡ 
_sys_sigli¡
[
_NSIG
];

304 cÚ¡ *cÚ¡ 
sys_sigli¡
[
_NSIG
];

307 
	ssigvec


309 
__sighªdËr_t
 
sv_hªdËr
;

310 
sv_mask
;

312 
sv_æags
;

313 
	#sv_Ú¡ack
 
sv_æags


	)

317 
	#SV_ONSTACK
 (1 << 0)

	)

318 
	#SV_INTERRUPT
 (1 << 1)

	)

319 
	#SV_RESETHAND
 (1 << 2)

	)

327 
	$sigvec
 (
__sig
, cÚ¡ 
sigvec
 *
__vec
,

328 
sigvec
 *
__ovec
è
__THROW
;

332 
	~<b™s/sigcÚ‹xt.h
>

335 
	$sig»tuº
 (
sigcÚ‹xt
 *
__sı
è
__THROW
;

340 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


341 
	#__Ãed_size_t


	)

342 
	~<¡ddef.h
>

347 
	$sigš‹¼u±
 (
__sig
, 
__š‹¼u±
è
__THROW
;

349 
	~<b™s/sig¡ack.h
>

350 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


352 
	~<sys/ucÚ‹xt.h
>

358 
	$sig¡ack
 (
sig¡ack
 *
__ss
, sig¡ack *
__oss
)

359 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

363 
	$sig®t¡ack
 (cÚ¡ 
sig®t¡ack
 *
__»¡riù
 
__ss
,

364 
sig®t¡ack
 *
__»¡riù
 
__oss
è
__THROW
;

368 #ifdeà
__USE_XOPEN_EXTENDED


372 
	$sighŞd
 (
__sig
è
__THROW
;

375 
	$sig»l£
 (
__sig
è
__THROW
;

378 
	$sigignÜe
 (
__sig
è
__THROW
;

381 
__sighªdËr_t
 
	$sig£t
 (
__sig
, 
__sighªdËr_t
 
__di¥
è
__THROW
;

384 #ià
defšed
 
__USE_POSIX199506
 || defšed 
__USE_UNIX98


387 
	~<b™s/±h»adty³s.h
>

388 
	~<b™s/sigth»ad.h
>

395 
	$__libc_cu¼’t_sig¹mš
 (è
__THROW
;

397 
	$__libc_cu¼’t_sig¹max
 (è
__THROW
;

401 
__END_DECLS


	@/usr/include/stdio.h

23 #iâdeà
_STDIO_H


25 #ià!
defšed
 
__Ãed_FILE
 && !defšed 
__Ãed___FILE


26 
	#_STDIO_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


31 
	#__Ãed_size_t


	)

32 
	#__Ãed_NULL


	)

33 
	~<¡ddef.h
>

35 
	~<b™s/ty³s.h
>

36 
	#__Ãed_FILE


	)

37 
	#__Ãed___FILE


	)

41 #ià!
defšed
 
__FILE_defšed
 && defšed 
__Ãed_FILE


44 
	g_IO_FILE
;

46 
__BEGIN_NAMESPACE_STD


48 
_IO_FILE
 
	tFILE
;

49 
	g__END_NAMESPACE_STD


50 #ià
defšed
 
__USE_LARGEFILE64
 || defšed 
__USE_SVID
 || defšed 
__USE_POSIX
 \

51 || 
defšed
 
	g__USE_BSD
 || defšed 
	g__USE_ISOC99
 || defšed 
	g__USE_XOPEN
 \

52 || 
defšed
 
__USE_POSIX2


53 
	$__USING_NAMESPACE_STD
(
FILE
)

56 
	#__FILE_defšed
 1

	)

58 #undeà
__Ãed_FILE


61 #ià!
defšed
 
____FILE_defšed
 && defšed 
__Ãed___FILE


64 
_IO_FILE
 
	t__FILE
;

66 
	#____FILE_defšed
 1

	)

68 #undeà
__Ãed___FILE


71 #ifdef 
_STDIO_H


72 
	#_STDIO_USES_IOSTREAM


	)

74 
	~<libio.h
>

76 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


77 #ifdeà
__GNUC__


78 #iâdeà
_VA_LIST_DEFINED


79 
_G_va_li¡
 
	tva_li¡
;

80 
	#_VA_LIST_DEFINED


	)

83 
	~<¡d¬g.h
>

87 #ifdeà
__USE_XOPEN2K8


88 #iâdeà
__off_t_defšed


89 #iâdeà
__USE_FILE_OFFSET64


90 
__off_t
 
	toff_t
;

92 
__off64_t
 
	toff_t
;

94 
	#__off_t_defšed


	)

96 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


97 
__off64_t
 
	toff64_t
;

98 
	#__off64_t_defšed


	)

101 #iâdeà
__ssize_t_defšed


102 
__ssize_t
 
	tssize_t
;

103 
	#__ssize_t_defšed


	)

108 
__BEGIN_NAMESPACE_STD


109 #iâdeà
__USE_FILE_OFFSET64


110 
_G_åos_t
 
	tåos_t
;

112 
_G_åos64_t
 
	tåos_t
;

114 
__END_NAMESPACE_STD


115 #ifdeà
__USE_LARGEFILE64


116 
_G_åos64_t
 
	tåos64_t
;

120 
	#_IOFBF
 0

	)

121 
	#_IOLBF
 1

	)

122 
	#_IONBF
 2

	)

126 #iâdeà
BUFSIZ


127 
	#BUFSIZ
 
_IO_BUFSIZ


	)

133 #iâdeà
EOF


134 
	#EOF
 (-1)

	)

140 
	#SEEK_SET
 0

	)

141 
	#SEEK_CUR
 1

	)

142 
	#SEEK_END
 2

	)

143 #ifdeà
__USE_GNU


144 
	#SEEK_DATA
 3

	)

145 
	#SEEK_HOLE
 4

	)

149 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


151 
	#P_tmpdœ
 "/tmp"

	)

164 
	~<b™s/¡dio_lim.h
>

168 
_IO_FILE
 *
¡dš
;

169 
_IO_FILE
 *
¡dout
;

170 
_IO_FILE
 *
¡d”r
;

172 
	#¡dš
 
¡dš


	)

173 
	#¡dout
 
¡dout


	)

174 
	#¡d”r
 
¡d”r


	)

176 
__BEGIN_NAMESPACE_STD


178 
	$»move
 (cÚ¡ *
__f’ame
è
__THROW
;

180 
	$»Çme
 (cÚ¡ *
__Şd
, cÚ¡ *
__Ãw
è
__THROW
;

181 
__END_NAMESPACE_STD


183 #ifdeà
__USE_ATFILE


185 
	$»Çm—t
 (
__Şdfd
, cÚ¡ *
__Şd
, 
__Ãwfd
,

186 cÚ¡ *
__Ãw
è
__THROW
;

189 
__BEGIN_NAMESPACE_STD


194 #iâdeà
__USE_FILE_OFFSET64


195 
FILE
 *
	$tmpfe
 (è
__wur
;

197 #ifdeà
__REDIRECT


198 
FILE
 *
	`__REDIRECT
 (
tmpfe
, (), 
tmpfe64
è
__wur
;

200 
	#tmpfe
 
tmpfe64


	)

204 #ifdeà
__USE_LARGEFILE64


205 
FILE
 *
	$tmpfe64
 (è
__wur
;

209 *
	$tm²am
 (*
__s
è
__THROW
 
__wur
;

210 
__END_NAMESPACE_STD


212 #ifdeà
__USE_MISC


215 *
	$tm²am_r
 (*
__s
è
__THROW
 
__wur
;

219 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


227 *
	$‹m²am
 (cÚ¡ *
__dœ
, cÚ¡ *
__pfx
)

228 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

232 
__BEGIN_NAMESPACE_STD


237 
	`fşo£
 (
FILE
 *
__¡»am
);

242 
	`fæush
 (
FILE
 *
__¡»am
);

243 
__END_NAMESPACE_STD


245 #ifdeà
__USE_MISC


252 
	`fæush_uÆocked
 (
FILE
 *
__¡»am
);

255 #ifdeà
__USE_GNU


262 
	`fşo£®l
 ();

266 
__BEGIN_NAMESPACE_STD


267 #iâdeà
__USE_FILE_OFFSET64


272 
FILE
 *
	$fİ’
 (cÚ¡ *
__»¡riù
 
__f’ame
,

273 cÚ¡ *
__»¡riù
 
__modes
è
__wur
;

278 
FILE
 *
	$äeİ’
 (cÚ¡ *
__»¡riù
 
__f’ame
,

279 cÚ¡ *
__»¡riù
 
__modes
,

280 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

282 #ifdeà
__REDIRECT


283 
FILE
 *
	`__REDIRECT
 (
fİ’
, (cÚ¡ *
__»¡riù
 
__f’ame
,

284 cÚ¡ *
__»¡riù
 
__modes
), 
fİ’64
)

285 
__wur
;

286 
FILE
 *
	`__REDIRECT
 (
äeİ’
, (cÚ¡ *
__»¡riù
 
__f’ame
,

287 cÚ¡ *
__»¡riù
 
__modes
,

288 
FILE
 *
__»¡riù
 
__¡»am
), 
äeİ’64
)

289 
__wur
;

291 
	#fİ’
 
fİ’64


	)

292 
	#äeİ’
 
äeİ’64


	)

295 
__END_NAMESPACE_STD


296 #ifdeà
__USE_LARGEFILE64


297 
FILE
 *
	$fİ’64
 (cÚ¡ *
__»¡riù
 
__f’ame
,

298 cÚ¡ *
__»¡riù
 
__modes
è
__wur
;

299 
FILE
 *
	$äeİ’64
 (cÚ¡ *
__»¡riù
 
__f’ame
,

300 cÚ¡ *
__»¡riù
 
__modes
,

301 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

304 #ifdef 
__USE_POSIX


306 
FILE
 *
	$fdİ’
 (
__fd
, cÚ¡ *
__modes
è
__THROW
 
__wur
;

309 #ifdef 
__USE_GNU


312 
FILE
 *
	$fİ’cook›
 (*
__»¡riù
 
__magic_cook›
,

313 cÚ¡ *
__»¡riù
 
__modes
,

314 
_IO_cook›_io_funùiÚs_t
 
__io_funcs
è
__THROW
 
__wur
;

317 #ifdeà
__USE_XOPEN2K8


319 
FILE
 *
	$fmemİ’
 (*
__s
, 
size_t
 
__Ën
, cÚ¡ *
__modes
)

320 
__THROW
 
__wur
;

325 
FILE
 *
	$İ’_mem¡»am
 (**
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
 
__wur
;

329 
__BEGIN_NAMESPACE_STD


332 
	$£tbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
è
__THROW
;

336 
	$£tvbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

337 
__modes
, 
size_t
 
__n
è
__THROW
;

338 
__END_NAMESPACE_STD


340 #ifdef 
__USE_BSD


343 
	$£tbufãr
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

344 
size_t
 
__size
è
__THROW
;

347 
	$£šebuf
 (
FILE
 *
__¡»am
è
__THROW
;

351 
__BEGIN_NAMESPACE_STD


356 
	`årštf
 (
FILE
 *
__»¡riù
 
__¡»am
,

357 cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

362 
	`´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

364 
	$¥rštf
 (*
__»¡riù
 
__s
,

365 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROWNL
;

371 
	`vårštf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

372 
_G_va_li¡
 
__¬g
);

377 
	`v´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
);

379 
	$v¥rštf
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

380 
_G_va_li¡
 
__¬g
è
__THROWNL
;

381 
__END_NAMESPACE_STD


383 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


384 
__BEGIN_NAMESPACE_C99


386 
	$¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

387 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

388 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

390 
	$v¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

391 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

392 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

393 
__END_NAMESPACE_C99


396 #ifdeà
__USE_GNU


399 
	$va¥rštf
 (**
__»¡riù
 
__±r
, cÚ¡ *__»¡riù 
__f
,

400 
_G_va_li¡
 
__¬g
)

401 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 0))è
__wur
;

402 
	$__a¥rštf
 (**
__»¡riù
 
__±r
,

403 cÚ¡ *
__»¡riù
 
__fmt
, ...)

404 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

405 
	$a¥rštf
 (**
__»¡riù
 
__±r
,

406 cÚ¡ *
__»¡riù
 
__fmt
, ...)

407 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

410 #ifdeà
__USE_XOPEN2K8


412 
	$vd´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
,

413 
_G_va_li¡
 
__¬g
)

414 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

415 
	$d´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
, ...)

416 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

420 
__BEGIN_NAMESPACE_STD


425 
	$fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

426 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

431 
	$sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

433 
	$ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

434 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

436 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

437 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

438 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

439 #ifdeà
__REDIRECT


443 
	`__REDIRECT
 (
fsÿnf
, (
FILE
 *
__»¡riù
 
__¡»am
,

444 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

445 
__isoc99_fsÿnf
è
__wur
;

446 
	`__REDIRECT
 (
sÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

447 
__isoc99_sÿnf
è
__wur
;

448 
	`__REDIRECT_NTH
 (
ssÿnf
, (cÚ¡ *
__»¡riù
 
__s
,

449 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

450 
__isoc99_ssÿnf
);

452 
	$__isoc99_fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

453 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

454 
	$__isoc99_sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

455 
	$__isoc99_ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

456 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

457 
	#fsÿnf
 
__isoc99_fsÿnf


	)

458 
	#sÿnf
 
__isoc99_sÿnf


	)

459 
	#ssÿnf
 
__isoc99_ssÿnf


	)

463 
__END_NAMESPACE_STD


465 #ifdef 
__USE_ISOC99


466 
__BEGIN_NAMESPACE_C99


471 
	$vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

472 
_G_va_li¡
 
__¬g
)

473 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

479 
	$vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

480 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

483 
	$vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

484 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

485 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

487 #ià!
defšed
 
__USE_GNU
 \

488 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

489 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

490 #ifdeà
__REDIRECT


494 
	`__REDIRECT
 (
vfsÿnf
,

495 (
FILE
 *
__»¡riù
 
__s
,

496 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
),

497 
__isoc99_vfsÿnf
)

498 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

499 
	`__REDIRECT
 (
vsÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
,

500 
_G_va_li¡
 
__¬g
), 
__isoc99_vsÿnf
)

501 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

502 
	`__REDIRECT_NTH
 (
vssÿnf
,

503 (cÚ¡ *
__»¡riù
 
__s
,

504 cÚ¡ *
__»¡riù
 
__fÜm©
,

505 
_G_va_li¡
 
__¬g
), 
__isoc99_vssÿnf
)

506 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

508 
	$__isoc99_vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
,

509 cÚ¡ *
__»¡riù
 
__fÜm©
,

510 
_G_va_li¡
 
__¬g
è
__wur
;

511 
	$__isoc99_vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
,

512 
_G_va_li¡
 
__¬g
è
__wur
;

513 
	$__isoc99_vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

514 cÚ¡ *
__»¡riù
 
__fÜm©
,

515 
_G_va_li¡
 
__¬g
è
__THROW
;

516 
	#vfsÿnf
 
__isoc99_vfsÿnf


	)

517 
	#vsÿnf
 
__isoc99_vsÿnf


	)

518 
	#vssÿnf
 
__isoc99_vssÿnf


	)

522 
__END_NAMESPACE_C99


526 
__BEGIN_NAMESPACE_STD


531 
	`fg‘c
 (
FILE
 *
__¡»am
);

532 
	`g‘c
 (
FILE
 *
__¡»am
);

538 
	`g‘ch¬
 ();

539 
__END_NAMESPACE_STD


543 
	#g‘c
(
_å
è
	`_IO_g‘c
 (_å)

	)

545 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


550 
	`g‘c_uÆocked
 (
FILE
 *
__¡»am
);

551 
	`g‘ch¬_uÆocked
 ();

554 #ifdeà
__USE_MISC


561 
	`fg‘c_uÆocked
 (
FILE
 *
__¡»am
);

565 
__BEGIN_NAMESPACE_STD


573 
	`åutc
 (
__c
, 
FILE
 *
__¡»am
);

574 
	`putc
 (
__c
, 
FILE
 *
__¡»am
);

580 
	`putch¬
 (
__c
);

581 
__END_NAMESPACE_STD


585 
	#putc
(
_ch
, 
_å
è
	`_IO_putc
 (_ch, _å)

	)

587 #ifdeà
__USE_MISC


594 
	`åutc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

597 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


602 
	`putc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

603 
	`putch¬_uÆocked
 (
__c
);

607 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 \

608 || (
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

610 
	`g‘w
 (
FILE
 *
__¡»am
);

613 
	`putw
 (
__w
, 
FILE
 *
__¡»am
);

617 
__BEGIN_NAMESPACE_STD


622 *
	$fg‘s
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

623 
__wur
;

625 #ià!
defšed
 
__USE_ISOC11
 \

626 || (
defšed
 
__ılu¥lus
 && __cplusplus <= 201103L)

638 *
	$g‘s
 (*
__s
è
__wur
 
__©Œibu‹_d•»ÿ‹d__
;

640 
__END_NAMESPACE_STD


642 #ifdeà
__USE_GNU


649 *
	$fg‘s_uÆocked
 (*
__»¡riù
 
__s
, 
__n
,

650 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

654 #ifdef 
__USE_XOPEN2K8


665 
_IO_ssize_t
 
	$__g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

666 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

667 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

668 
_IO_ssize_t
 
	$g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

669 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

670 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

678 
_IO_ssize_t
 
	$g‘lše
 (**
__»¡riù
 
__lš•Œ
,

679 
size_t
 *
__»¡riù
 
__n
,

680 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

684 
__BEGIN_NAMESPACE_STD


689 
	`åuts
 (cÚ¡ *
__»¡riù
 
__s
, 
FILE
 *__»¡riù 
__¡»am
);

695 
	`puts
 (cÚ¡ *
__s
);

702 
	`ung‘c
 (
__c
, 
FILE
 *
__¡»am
);

709 
size_t
 
	$ä—d
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

710 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

715 
size_t
 
	`fwr™e
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

716 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__s
);

717 
__END_NAMESPACE_STD


719 #ifdeà
__USE_GNU


726 
	`åuts_uÆocked
 (cÚ¡ *
__»¡riù
 
__s
,

727 
FILE
 *
__»¡riù
 
__¡»am
);

730 #ifdeà
__USE_MISC


737 
size_t
 
	$ä—d_uÆocked
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

738 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

739 
size_t
 
	`fwr™e_uÆocked
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

740 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
);

744 
__BEGIN_NAMESPACE_STD


749 
	`f£ek
 (
FILE
 *
__¡»am
, 
__off
, 
__wh’û
);

754 
	$á–l
 (
FILE
 *
__¡»am
è
__wur
;

759 
	`»wšd
 (
FILE
 *
__¡»am
);

760 
__END_NAMESPACE_STD


767 #ià
defšed
 
__USE_LARGEFILE
 || defšed 
__USE_XOPEN2K


768 #iâdeà
__USE_FILE_OFFSET64


773 
	`f£eko
 (
FILE
 *
__¡»am
, 
__off_t
 
__off
, 
__wh’û
);

778 
__off_t
 
	$á–lo
 (
FILE
 *
__¡»am
è
__wur
;

780 #ifdeà
__REDIRECT


781 
	`__REDIRECT
 (
f£eko
,

782 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
),

783 
f£eko64
);

784 
__off64_t
 
	`__REDIRECT
 (
á–lo
, (
FILE
 *
__¡»am
), 
á–lo64
);

786 
	#f£eko
 
f£eko64


	)

787 
	#á–lo
 
á–lo64


	)

792 
__BEGIN_NAMESPACE_STD


793 #iâdeà
__USE_FILE_OFFSET64


798 
	`fg‘pos
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos_t
 *__»¡riù 
__pos
);

803 
	`f£os
 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
);

805 #ifdeà
__REDIRECT


806 
	`__REDIRECT
 (
fg‘pos
, (
FILE
 *
__»¡riù
 
__¡»am
,

807 
åos_t
 *
__»¡riù
 
__pos
), 
fg‘pos64
);

808 
	`__REDIRECT
 (
f£os
,

809 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
), 
f£os64
);

811 
	#fg‘pos
 
fg‘pos64


	)

812 
	#f£os
 
f£os64


	)

815 
__END_NAMESPACE_STD


817 #ifdeà
__USE_LARGEFILE64


818 
	`f£eko64
 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
);

819 
__off64_t
 
	$á–lo64
 (
FILE
 *
__¡»am
è
__wur
;

820 
	`fg‘pos64
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos64_t
 *__»¡riù 
__pos
);

821 
	`f£os64
 (
FILE
 *
__¡»am
, cÚ¡ 
åos64_t
 *
__pos
);

824 
__BEGIN_NAMESPACE_STD


826 
	$ş—»¼
 (
FILE
 *
__¡»am
è
__THROW
;

828 
	$ãof
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

830 
	$ã¼Ü
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

831 
__END_NAMESPACE_STD


833 #ifdeà
__USE_MISC


835 
	$ş—»¼_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
;

836 
	$ãof_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

837 
	$ã¼Ü_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

841 
__BEGIN_NAMESPACE_STD


846 
	`³¼Ü
 (cÚ¡ *
__s
);

847 
__END_NAMESPACE_STD


853 
	~<b™s/sys_”¾i¡.h
>

856 #ifdef 
__USE_POSIX


858 
	$f’o
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

861 #ifdeà
__USE_MISC


863 
	$f’o_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

867 #ià(
defšed
 
__USE_POSIX2
 || defšed 
__USE_SVID
 || defšed 
__USE_BSD
 || \

868 
defšed
 
__USE_MISC
)

873 
FILE
 *
	$pİ’
 (cÚ¡ *
__commªd
, cÚ¡ *
__modes
è
__wur
;

879 
	`pşo£
 (
FILE
 *
__¡»am
);

883 #ifdef 
__USE_POSIX


885 *
	$ù”mid
 (*
__s
è
__THROW
;

889 #ifdeà
__USE_XOPEN


891 *
	`cu£rid
 (*
__s
);

895 #ifdef 
__USE_GNU


896 
ob¡ack
;

899 
	$ob¡ack_´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

900 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

901 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

902 
	$ob¡ack_v´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

903 cÚ¡ *
__»¡riù
 
__fÜm©
,

904 
_G_va_li¡
 
__¬gs
)

905 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

909 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


913 
	$æockfe
 (
FILE
 *
__¡»am
è
__THROW
;

917 
	$árylockfe
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

920 
	$fuÆockfe
 (
FILE
 *
__¡»am
è
__THROW
;

923 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


927 
	#__Ãed_g‘İt


	)

928 
	~<g‘İt.h
>

933 #ifdeà
__USE_EXTERN_INLINES


934 
	~<b™s/¡dio.h
>

936 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


937 
	~<b™s/¡dio2.h
>

939 #ifdeà
__LDBL_COMPAT


940 
	~<b™s/¡dio-ldbl.h
>

943 
__END_DECLS


	@/usr/include/stdlib.h

22 #iâdef 
_STDLIB_H


24 
	~<ã©u»s.h
>

27 
	#__Ãed_size_t


	)

28 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


29 
	#__Ãed_wch¬_t


	)

30 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

34 
	g__BEGIN_DECLS


36 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


37 
	#_STDLIB_H
 1

	)

39 #ià(
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8
è&& !defšed 
_SYS_WAIT_H


41 
	~<b™s/wa™æags.h
>

42 
	~<b™s/wa™¡©us.h
>

44 #ifdeà
__USE_BSD


49 #ià
defšed
 
__GNUC__
 && !defšed 
__ılu¥lus


50 
	#__WAIT_INT
(
¡©us
) \

51 (
	`__ex‹nsiÚ__
 (((uniÚ { 
	`__ty³of
(
¡©us
è
__š
; 
__i
; }) \

52 { .
__š
 = (
¡©us
è}).
__i
))

	)

54 
	#__WAIT_INT
(
¡©us
è(*(*è&(¡©us))

	)

62 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2 || defšed 
__ılu¥lus


63 
	#__WAIT_STATUS
 *

	)

64 
	#__WAIT_STATUS_DEFN
 *

	)

69 
wa™
 *
	m__u±r
;

70 *
	m__Œ
;

71 } 
	t__WAIT_STATUS
 
	t__©Œibu‹__
 ((
	t__Œª¥¬’t_uniÚ__
));

72 
	#__WAIT_STATUS_DEFN
 *

	)

77 
	#__WAIT_INT
(
¡©us
è(¡©us)

	)

78 
	#__WAIT_STATUS
 *

	)

79 
	#__WAIT_STATUS_DEFN
 *

	)

84 
	#WEXITSTATUS
(
¡©us
è
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (¡©us))

	)

85 
	#WTERMSIG
(
¡©us
è
	`__WTERMSIG
 (
	`__WAIT_INT
 (¡©us))

	)

86 
	#WSTOPSIG
(
¡©us
è
	`__WSTOPSIG
 (
	`__WAIT_INT
 (¡©us))

	)

87 
	#WIFEXITED
(
¡©us
è
	`__WIFEXITED
 (
	`__WAIT_INT
 (¡©us))

	)

88 
	#WIFSIGNALED
(
¡©us
è
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (¡©us))

	)

89 
	#WIFSTOPPED
(
¡©us
è
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (¡©us))

	)

90 #ifdeà
__WIFCONTINUED


91 
	#WIFCONTINUED
(
¡©us
è
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (¡©us))

	)

95 
__BEGIN_NAMESPACE_STD


99 
	mquÙ
;

100 
	m»m
;

101 } 
	tdiv_t
;

104 #iâdeà
__ldiv_t_defšed


107 
	mquÙ
;

108 
	m»m
;

109 } 
	tldiv_t
;

110 
	#__ldiv_t_defšed
 1

	)

112 
	g__END_NAMESPACE_STD


114 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__Îdiv_t_defšed


115 
__BEGIN_NAMESPACE_C99


117 
__ex‹nsiÚ__
 struct

119 
	mquÙ
;

120 
	m»m
;

121 } 
	tÎdiv_t
;

122 
	#__Îdiv_t_defšed
 1

	)

123 
	g__END_NAMESPACE_C99


128 
	#RAND_MAX
 2147483647

	)

133 
	#EXIT_FAILURE
 1

	)

134 
	#EXIT_SUCCESS
 0

	)

138 
	#MB_CUR_MAX
 (
	`__ùy³_g‘_mb_cur_max
 ())

	)

139 
size_t
 
	$__ùy³_g‘_mb_cur_max
 (è
__THROW
 
__wur
;

142 
__BEGIN_NAMESPACE_STD


144 
	$©of
 (cÚ¡ *
__ÅŒ
)

145 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

147 
	$©oi
 (cÚ¡ *
__ÅŒ
)

148 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

150 
	$©Ş
 (cÚ¡ *
__ÅŒ
)

151 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

152 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_ISOC99
 || defšed 
__USE_MISC


155 
__BEGIN_NAMESPACE_C99


157 
__ex‹nsiÚ__
 
	$©Şl
 (cÚ¡ *
__ÅŒ
)

158 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

159 
__END_NAMESPACE_C99


162 
__BEGIN_NAMESPACE_STD


164 
	$¡¹od
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

165 **
__»¡riù
 
__’d±r
)

166 
__THROW
 
	`__nÚnuÎ
 ((1));

167 
__END_NAMESPACE_STD


169 #ifdef 
__USE_ISOC99


170 
__BEGIN_NAMESPACE_C99


172 
	$¡¹of
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

173 **
__»¡riù
 
__’d±r
è
__THROW
 
	`__nÚnuÎ
 ((1));

175 
	$¡¹Şd
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

176 **
__»¡riù
 
__’d±r
)

177 
__THROW
 
	`__nÚnuÎ
 ((1));

178 
__END_NAMESPACE_C99


181 
__BEGIN_NAMESPACE_STD


183 
	$¡¹Ş
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

184 **
__»¡riù
 
__’d±r
, 
__ba£
)

185 
__THROW
 
	`__nÚnuÎ
 ((1));

187 
	$¡¹oul
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

188 **
__»¡riù
 
__’d±r
, 
__ba£
)

189 
__THROW
 
	`__nÚnuÎ
 ((1));

190 
__END_NAMESPACE_STD


192 #ifdeà
__USE_BSD


194 
__ex‹nsiÚ__


195 
	$¡¹oq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

196 **
__»¡riù
 
__’d±r
, 
__ba£
)

197 
__THROW
 
	`__nÚnuÎ
 ((1));

199 
__ex‹nsiÚ__


200 
	$¡¹ouq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

201 **
__»¡riù
 
__’d±r
, 
__ba£
)

202 
__THROW
 
	`__nÚnuÎ
 ((1));

205 #ià
defšed
 
__USE_ISOC99
 || defšed 
__USE_MISC


206 
__BEGIN_NAMESPACE_C99


208 
__ex‹nsiÚ__


209 
	$¡¹Şl
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

210 **
__»¡riù
 
__’d±r
, 
__ba£
)

211 
__THROW
 
	`__nÚnuÎ
 ((1));

213 
__ex‹nsiÚ__


214 
	$¡¹ouÎ
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

215 **
__»¡riù
 
__’d±r
, 
__ba£
)

216 
__THROW
 
	`__nÚnuÎ
 ((1));

217 
__END_NAMESPACE_C99


221 #ifdeà
__USE_GNU


235 
	~<xloÿË.h
>

239 
	$¡¹Ş_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

240 **
__»¡riù
 
__’d±r
, 
__ba£
,

241 
__loÿË_t
 
__loc
è
__THROW
 
	`__nÚnuÎ
 ((1, 4));

243 
	$¡¹oul_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

244 **
__»¡riù
 
__’d±r
,

245 
__ba£
, 
__loÿË_t
 
__loc
)

246 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

248 
__ex‹nsiÚ__


249 
	$¡¹Şl_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

250 **
__»¡riù
 
__’d±r
, 
__ba£
,

251 
__loÿË_t
 
__loc
)

252 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

254 
__ex‹nsiÚ__


255 
	$¡¹ouÎ_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

256 **
__»¡riù
 
__’d±r
,

257 
__ba£
, 
__loÿË_t
 
__loc
)

258 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

260 
	$¡¹od_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

261 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

262 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

264 
	$¡¹of_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

265 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

266 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

268 
	$¡¹Şd_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

269 **
__»¡riù
 
__’d±r
,

270 
__loÿË_t
 
__loc
)

271 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

275 #ifdeà
__USE_EXTERN_INLINES


276 
__BEGIN_NAMESPACE_STD


277 
__ex‹º_šlše
 

278 
	`__NTH
 (
	$©oi
 (cÚ¡ *
__ÅŒ
))

280  (è
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

281 
	}
}

282 
__ex‹º_šlše
 

283 
__NTH
 (
	$©Ş
 (cÚ¡ *
__ÅŒ
))

285  
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

286 
	}
}

287 
	g__END_NAMESPACE_STD


289 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


290 
__BEGIN_NAMESPACE_C99


291 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

292 
__NTH
 (
	$©Şl
 (cÚ¡ *
__ÅŒ
))

294  
	`¡¹Şl
 (
__ÅŒ
, (**è
NULL
, 10);

295 
	}
}

296 
	g__END_NAMESPACE_C99


301 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED


305 *
	$l64a
 (
__n
è
__THROW
 
__wur
;

308 
	$a64l
 (cÚ¡ *
__s
)

309 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

313 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_BSD


314 
	~<sys/ty³s.h
>

321 
	$¿ndom
 (è
__THROW
;

324 
	$¤ªdom
 (
__£ed
è
__THROW
;

330 *
	$š™¡©e
 (
__£ed
, *
__¡©ebuf
,

331 
size_t
 
__¡©–’
è
__THROW
 
	`__nÚnuÎ
 ((2));

335 *
	$£t¡©e
 (*
__¡©ebuf
è
__THROW
 
	`__nÚnuÎ
 ((1));

338 #ifdeà
__USE_MISC


343 
	s¿ndom_d©a


345 
št32_t
 *
åŒ
;

346 
št32_t
 *
½Œ
;

347 
št32_t
 *
¡©e
;

348 
¿nd_ty³
;

349 
¿nd_deg
;

350 
¿nd_£p
;

351 
št32_t
 *
’d_±r
;

354 
	$¿ndom_r
 (
¿ndom_d©a
 *
__»¡riù
 
__buf
,

355 
št32_t
 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

357 
	$¤ªdom_r
 (
__£ed
, 
¿ndom_d©a
 *
__buf
)

358 
__THROW
 
	`__nÚnuÎ
 ((2));

360 
	$š™¡©e_r
 (
__£ed
, *
__»¡riù
 
__¡©ebuf
,

361 
size_t
 
__¡©–’
,

362 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

363 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

365 
	$£t¡©e_r
 (*
__»¡riù
 
__¡©ebuf
,

366 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

367 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

372 
__BEGIN_NAMESPACE_STD


374 
	$¿nd
 (è
__THROW
;

376 
	$¤ªd
 (
__£ed
è
__THROW
;

377 
__END_NAMESPACE_STD


379 #ifdeà
__USE_POSIX


381 
	$¿nd_r
 (*
__£ed
è
__THROW
;

385 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


389 
	$d¿nd48
 (è
__THROW
;

390 
	$”ªd48
 (
__xsubi
[3]è
__THROW
 
	`__nÚnuÎ
 ((1));

393 
	$Ìªd48
 (è
__THROW
;

394 
	$Äªd48
 (
__xsubi
[3])

395 
__THROW
 
	`__nÚnuÎ
 ((1));

398 
	$m¿nd48
 (è
__THROW
;

399 
	$j¿nd48
 (
__xsubi
[3])

400 
__THROW
 
	`__nÚnuÎ
 ((1));

403 
	$¤ªd48
 (
__£edv®
è
__THROW
;

404 *
	$£ed48
 (
__£ed16v
[3])

405 
__THROW
 
	`__nÚnuÎ
 ((1));

406 
	$lcÚg48
 (
__·¿m
[7]è
__THROW
 
	`__nÚnuÎ
 ((1));

408 #ifdeà
__USE_MISC


412 
	sd¿nd48_d©a


414 
__x
[3];

415 
__Şd_x
[3];

416 
__c
;

417 
__š™
;

418 
__ex‹nsiÚ__
 
__a
;

423 
	$d¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

424 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

425 
	$”ªd48_r
 (
__xsubi
[3],

426 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

427 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

430 
	$Ìªd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

431 *
__»¡riù
 
__»suÉ
)

432 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

433 
	$Äªd48_r
 (
__xsubi
[3],

434 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

435 *
__»¡riù
 
__»suÉ
)

436 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

439 
	$m¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

440 *
__»¡riù
 
__»suÉ
)

441 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

442 
	$j¿nd48_r
 (
__xsubi
[3],

443 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

444 *
__»¡riù
 
__»suÉ
)

445 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

448 
	$¤ªd48_r
 (
__£edv®
, 
d¿nd48_d©a
 *
__bufãr
)

449 
__THROW
 
	`__nÚnuÎ
 ((2));

451 
	$£ed48_r
 (
__£ed16v
[3],

452 
d¿nd48_d©a
 *
__bufãr
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

454 
	$lcÚg48_r
 (
__·¿m
[7],

455 
d¿nd48_d©a
 *
__bufãr
)

456 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

462 #iâdeà
__m®loc_ªd_ÿÎoc_defšed


463 
	#__m®loc_ªd_ÿÎoc_defšed


	)

464 
__BEGIN_NAMESPACE_STD


466 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

468 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

469 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

470 
__END_NAMESPACE_STD


473 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


474 
__BEGIN_NAMESPACE_STD


480 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

481 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
;

483 
	$ä“
 (*
__±r
è
__THROW
;

484 
__END_NAMESPACE_STD


486 #ifdef 
__USE_MISC


488 
	$cä“
 (*
__±r
è
__THROW
;

491 #ià
defšed
 
__USE_GNU
 || defšed 
__USE_BSD
 || defšed 
__USE_MISC


492 
	~<®loÿ.h
>

495 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

496 || 
defšed
 
__USE_BSD


498 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

501 #ifdeà
__USE_XOPEN2K


503 
	$posix_mem®ign
 (**
__mem±r
, 
size_t
 
__®ignm’t
, size_ˆ
__size
)

504 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

507 #ifdeà
__USE_ISOC11


509 *
	$®igÃd_®loc
 (
size_t
 
__®ignm’t
, size_ˆ
__size
)

510 
__THROW
 
__©Œibu‹_m®loc__
 
	`__©Œibu‹_®loc_size__
 ((2)è
__wur
;

513 
__BEGIN_NAMESPACE_STD


515 
	$abÜt
 (è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

519 
	`©ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

521 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


523 #ifdeà
__ılu¥lus


524 "C++" 
	`©_quick_ex™
 ((*
__func
) ())

525 
__THROW
 
	`__asm
 ("©_quick_ex™"è
	`__nÚnuÎ
 ((1));

527 
	`©_quick_ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

530 
__END_NAMESPACE_STD


532 #ifdef 
__USE_MISC


535 
	`Ú_ex™
 ((*
__func
è(
__¡©us
, *
__¬g
), *__arg)

536 
__THROW
 
	`__nÚnuÎ
 ((1));

539 
__BEGIN_NAMESPACE_STD


543 
	$ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

545 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


549 
	$quick_ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

551 
__END_NAMESPACE_STD


553 #ifdeà
__USE_ISOC99


554 
__BEGIN_NAMESPACE_C99


557 
	$_Ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

558 
__END_NAMESPACE_C99


562 
__BEGIN_NAMESPACE_STD


564 *
	$g‘’v
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

565 
__END_NAMESPACE_STD


567 #ifdeà
__USE_GNU


570 *
	$£cu»_g‘’v
 (cÚ¡ *
__Çme
)

571 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

574 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


578 
	$pu‹nv
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

581 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


584 
	$£‹nv
 (cÚ¡ *
__Çme
, cÚ¡ *
__v®ue
, 
__»¶aû
)

585 
__THROW
 
	`__nÚnuÎ
 ((2));

588 
	$un£‹nv
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

591 #ifdef 
__USE_MISC


595 
	$ş—»nv
 (è
__THROW
;

599 #ià
defšed
 
__USE_MISC
 \

600 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
)

606 *
	$mk‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1));

609 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 \

610 || 
defšed
 
__USE_XOPEN2K8


619 #iâdeà
__USE_FILE_OFFSET64


620 
	$mk¡emp
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

622 #ifdeà
__REDIRECT


623 
	`__REDIRECT
 (
mk¡emp
, (*
__‹m¶©e
), 
mk¡emp64
)

624 
	`__nÚnuÎ
 ((1)è
__wur
;

626 
	#mk¡emp
 
mk¡emp64


	)

629 #ifdeà
__USE_LARGEFILE64


630 
	$mk¡emp64
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

634 #ifdeà
__USE_MISC


641 #iâdeà
__USE_FILE_OFFSET64


642 
	$mk¡emps
 (*
__‹m¶©e
, 
__suffixËn
è
	`__nÚnuÎ
 ((1)è
__wur
;

644 #ifdeà
__REDIRECT


645 
	`__REDIRECT
 (
mk¡emps
, (*
__‹m¶©e
, 
__suffixËn
),

646 
mk¡emps64
è
	`__nÚnuÎ
 ((1)è
__wur
;

648 
	#mk¡emps
 
mk¡emps64


	)

651 #ifdeà
__USE_LARGEFILE64


652 
	$mk¡emps64
 (*
__‹m¶©e
, 
__suffixËn
)

653 
	`__nÚnuÎ
 ((1)è
__wur
;

657 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K8


663 *
	$mkd‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

666 #ifdeà
__USE_GNU


673 #iâdeà
__USE_FILE_OFFSET64


674 
	$mko¡emp
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

676 #ifdeà
__REDIRECT


677 
	`__REDIRECT
 (
mko¡emp
, (*
__‹m¶©e
, 
__æags
), 
mko¡emp64
)

678 
	`__nÚnuÎ
 ((1)è
__wur
;

680 
	#mko¡emp
 
mko¡emp64


	)

683 #ifdeà
__USE_LARGEFILE64


684 
	$mko¡emp64
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

693 #iâdeà
__USE_FILE_OFFSET64


694 
	$mko¡emps
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

695 
	`__nÚnuÎ
 ((1)è
__wur
;

697 #ifdeà
__REDIRECT


698 
	`__REDIRECT
 (
mko¡emps
, (*
__‹m¶©e
, 
__suffixËn
,

699 
__æags
), 
mko¡emps64
)

700 
	`__nÚnuÎ
 ((1)è
__wur
;

702 
	#mko¡emps
 
mko¡emps64


	)

705 #ifdeà
__USE_LARGEFILE64


706 
	$mko¡emps64
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

707 
	`__nÚnuÎ
 ((1)è
__wur
;

712 
__BEGIN_NAMESPACE_STD


717 
	$sy¡em
 (cÚ¡ *
__commªd
è
__wur
;

718 
__END_NAMESPACE_STD


721 #ifdef 
__USE_GNU


724 *
	$ÿnÚiÿlize_fe_Çme
 (cÚ¡ *
__Çme
)

725 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

728 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


734 *
	$»®·th
 (cÚ¡ *
__»¡riù
 
__Çme
,

735 *
__»¡riù
 
__»sŞved
è
__THROW
 
__wur
;

740 #iâdeà
__COMPAR_FN_T


741 
	#__COMPAR_FN_T


	)

742 (*
	t__com·r_â_t
) (const *, const *);

744 #ifdef 
__USE_GNU


745 
__com·r_â_t
 
	tcom·risÚ_â_t
;

748 #ifdeà
__USE_GNU


749 (*
	t__com·r_d_â_t
) (const *, const *, *);

752 
__BEGIN_NAMESPACE_STD


755 *
	$b£¬ch
 (cÚ¡ *
__key
, cÚ¡ *
__ba£
,

756 
size_t
 
__nmemb
, size_ˆ
__size
, 
__com·r_â_t
 
__com·r
)

757 
	`__nÚnuÎ
 ((1, 2, 5)è
__wur
;

759 #ifdeà
__USE_EXTERN_INLINES


760 
	~<b™s/¡dlib-b£¬ch.h
>

765 
	$qsÜt
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

766 
__com·r_â_t
 
__com·r
è
	`__nÚnuÎ
 ((1, 4));

767 #ifdeà
__USE_GNU


768 
	$qsÜt_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

769 
__com·r_d_â_t
 
__com·r
, *
__¬g
)

770 
	`__nÚnuÎ
 ((1, 4));

775 
	$abs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

776 
	$Ïbs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

777 
__END_NAMESPACE_STD


779 #ifdeà
__USE_ISOC99


780 
__ex‹nsiÚ__
 
	$Îabs
 (
__x
)

781 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

785 
__BEGIN_NAMESPACE_STD


789 
div_t
 
	$div
 (
__num”
, 
__d’om
)

790 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

791 
ldiv_t
 
	$ldiv
 (
__num”
, 
__d’om
)

792 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

793 
__END_NAMESPACE_STD


795 #ifdeà
__USE_ISOC99


796 
__BEGIN_NAMESPACE_C99


797 
__ex‹nsiÚ__
 
Îdiv_t
 
	$Îdiv
 (
__num”
,

798 
__d’om
)

799 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

800 
__END_NAMESPACE_C99


804 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

805 || 
defšed
 
__USE_SVID


812 *
	$ecvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

813 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

818 *
	$fcvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

819 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

824 *
	$gcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

825 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

828 #ifdeà
__USE_MISC


830 *
	$qecvt
 (
__v®ue
, 
__ndig™
,

831 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

832 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

833 *
	$qfcvt
 (
__v®ue
, 
__ndig™
,

834 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

835 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

836 *
	$qgcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

837 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

842 
	$ecvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

843 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

844 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

845 
	$fcvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

846 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

847 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

849 
	$qecvt_r
 (
__v®ue
, 
__ndig™
,

850 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

851 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

852 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

853 
	$qfcvt_r
 (
__v®ue
, 
__ndig™
,

854 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

855 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

856 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

860 
__BEGIN_NAMESPACE_STD


863 
	$mbËn
 (cÚ¡ *
__s
, 
size_t
 
__n
è
__THROW
;

866 
	$mbtowc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

867 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

870 
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
è
__THROW
;

874 
size_t
 
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__pwcs
,

875 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

877 
size_t
 
	$wc¡ombs
 (*
__»¡riù
 
__s
,

878 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__pwcs
, 
size_t
 
__n
)

879 
__THROW
;

880 
__END_NAMESPACE_STD


883 #ifdeà
__USE_SVID


888 
	$½m©ch
 (cÚ¡ *
__»¥Ú£
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

892 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


899 
	$g‘subİt
 (**
__»¡riù
 
__İtiÚp
,

900 *cÚ¡ *
__»¡riù
 
__tok’s
,

901 **
__»¡riù
 
__v®u•
)

902 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3)è
__wur
;

906 #ifdeà
__USE_XOPEN


908 
	$£tkey
 (cÚ¡ *
__key
è
__THROW
 
	`__nÚnuÎ
 ((1));

914 #ifdeà
__USE_XOPEN2KXSI


916 
	$posix_İ’±
 (
__oæag
è
__wur
;

919 #ifdeà
__USE_XOPEN


924 
	$g¿Á±
 (
__fd
è
__THROW
;

928 
	$uÆock±
 (
__fd
è
__THROW
;

933 *
	$±¢ame
 (
__fd
è
__THROW
 
__wur
;

936 #ifdeà
__USE_GNU


940 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

941 
__THROW
 
	`__nÚnuÎ
 ((2));

944 
	`g‘±
 ();

947 #ifdeà
__USE_BSD


951 
	$g‘lßdavg
 (
__lßdavg
[], 
__ÃËm
)

952 
__THROW
 
	`__nÚnuÎ
 ((1));

955 
	~<b™s/¡dlib-æßt.h
>

958 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


959 
	~<b™s/¡dlib.h
>

961 #ifdeà
__LDBL_COMPAT


962 
	~<b™s/¡dlib-ldbl.h
>

966 #undeà
__Ãed_m®loc_ªd_ÿÎoc


968 
__END_DECLS


	@/usr/include/string.h

22 #iâdef 
_STRING_H


23 
	#_STRING_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


30 
	#__Ãed_size_t


	)

31 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

39 #ià
defšed
 
__ılu¥lus
 && (__ılu¥lu >ğ199711L || 
__GNUC_PREREQ
 (4, 4))

40 
	#__CORRECT_ISO_CPP_STRING_H_PROTO


	)

44 
__BEGIN_NAMESPACE_STD


46 *
	$memıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

47 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

50 *
	$memmove
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

51 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

52 
__END_NAMESPACE_STD


57 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN


58 *
	$memcıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

59 
__c
, 
size_t
 
__n
)

60 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

64 
__BEGIN_NAMESPACE_STD


66 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

69 
	$memcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

70 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

73 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


76 *
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

77 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

78 cÚ¡ *
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

79 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

81 #ifdeà
__OPTIMIZE__


82 
__ex‹º_®ways_šlše
 *

83 
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW


85  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

88 
__ex‹º_®ways_šlše
 const *

89 
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
è
__THROW


91  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

94 
	}
}

96 *
	$memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

97 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

99 
__END_NAMESPACE_STD


101 #ifdeà
__USE_GNU


104 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


105 "C++" *
	$¿wmemchr
 (*
__s
, 
__c
)

106 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

107 "C++" cÚ¡ *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

108 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

110 *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

111 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

115 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


116 "C++" *
	$memrchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

117 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

118 "C++" cÚ¡ *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

119 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

121 *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

122 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

127 
__BEGIN_NAMESPACE_STD


129 *
	$¡rıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

130 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

132 *
	$¡ºıy
 (*
__»¡riù
 
__de¡
,

133 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

134 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

137 *
	$¡rÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

138 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

140 *
	$¡ºÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

141 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

144 
	$¡rcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

145 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

147 
	$¡ºcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

148 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

151 
	$¡rcŞl
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

152 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

154 
size_t
 
	$¡rxäm
 (*
__»¡riù
 
__de¡
,

155 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

156 
__THROW
 
	`__nÚnuÎ
 ((2));

157 
__END_NAMESPACE_STD


159 #ifdeà
__USE_XOPEN2K8


163 
	~<xloÿË.h
>

166 
	$¡rcŞl_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
__loÿË_t
 
__l
)

167 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

169 
size_t
 
	$¡rxäm_l
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
,

170 
__loÿË_t
 
__l
è
__THROW
 
	`__nÚnuÎ
 ((2, 4));

173 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 \

174 || 
defšed
 
__USE_XOPEN2K8


176 *
	$¡rdup
 (cÚ¡ *
__s
)

177 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

183 #ià
defšed
 
__USE_XOPEN2K8


184 *
	$¡ºdup
 (cÚ¡ *
__¡ršg
, 
size_t
 
__n
)

185 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

188 #ià
defšed
 
__USE_GNU
 && defšed 
__GNUC__


190 
	#¡rdu·
(
s
) \

191 (
__ex‹nsiÚ__
 \

193 cÚ¡ *
__Şd
 = (
s
); \

194 
size_t
 
__Ën
 = 
	`¡¾’
 (
__Şd
) + 1; \

195 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
); \

196 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

197 
	}
}))

	)

200 
	#¡ºdu·
(
s
, 
n
) \

201 (
__ex‹nsiÚ__
 \

203 cÚ¡ *
__Şd
 = (
s
); \

204 
size_t
 
__Ën
 = 
	`¡ºËn
 (
__Şd
, (
n
)); \

205 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
 + 1); \

206 
__Ãw
[
__Ën
] = '\0'; \

207 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

208 }))

	)

211 
	g__BEGIN_NAMESPACE_STD


213 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


216 *
¡rchr
 (*
__s
, 
__c
)

217 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

218 cÚ¡ *
¡rchr
 (cÚ¡ *
__s
, 
__c
)

219 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

221 #ifdeà
__OPTIMIZE__


222 
__ex‹º_®ways_šlše
 *

223 
¡rchr
 (*
__s
, 
__c
è
	g__THROW


225  
__butš_¡rchr
 (
__s
, 
__c
);

228 
__ex‹º_®ways_šlše
 const *

229 
¡rchr
 (cÚ¡ *
__s
, 
__c
è
	g__THROW


231  
__butš_¡rchr
 (
__s
, 
__c
);

236 *
	$¡rchr
 (cÚ¡ *
__s
, 
__c
)

237 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

240 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


243 *
	`¡¼chr
 (*
__s
, 
__c
)

244 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

245 cÚ¡ *
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
)

246 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

248 #ifdeà
__OPTIMIZE__


249 
__ex‹º_®ways_šlše
 *

250 
	`¡¼chr
 (*
__s
, 
__c
è
__THROW


252  
	`__butš_¡¼chr
 (
__s
, 
__c
);

255 
__ex‹º_®ways_šlše
 const *

256 
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
è
__THROW


258  
	`__butš_¡¼chr
 (
__s
, 
__c
);

261 
	}
}

263 *
	$¡¼chr
 (cÚ¡ *
__s
, 
__c
)

264 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

266 
__END_NAMESPACE_STD


268 #ifdeà
__USE_GNU


271 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


272 "C++" *
	$¡rchºul
 (*
__s
, 
__c
)

273 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

274 "C++" cÚ¡ *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

275 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

277 *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

278 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

282 
__BEGIN_NAMESPACE_STD


285 
size_t
 
	$¡rc¥n
 (cÚ¡ *
__s
, cÚ¡ *
__»jeù
)

286 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

289 
size_t
 
	$¡r¥n
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

290 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

292 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


295 *
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
)

296 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

297 cÚ¡ *
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

298 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

300 #ifdeà
__OPTIMIZE__


301 
__ex‹º_®ways_šlše
 *

302 
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
è
__THROW


304  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

307 
__ex‹º_®ways_šlše
 const *

308 
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
è
__THROW


310  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

313 
	}
}

315 *
	$¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

316 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

319 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


322 *
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

323 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

324 cÚ¡ *
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

325 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

327 #ifdeà
__OPTIMIZE__


328 
__ex‹º_®ways_šlše
 *

329 
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


331  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

334 
__ex‹º_®ways_šlše
 const *

335 
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


337  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

340 
	}
}

342 *
	$¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

343 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

348 *
	$¡¹ok
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
)

349 
__THROW
 
	`__nÚnuÎ
 ((2));

350 
__END_NAMESPACE_STD


354 *
	$__¡¹ok_r
 (*
__»¡riù
 
__s
,

355 cÚ¡ *
__»¡riù
 
__d–im
,

356 **
__»¡riù
 
__§ve_±r
)

357 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

358 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


359 *
	$¡¹ok_r
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
,

360 **
__»¡riù
 
__§ve_±r
)

361 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

364 #ifdeà
__USE_GNU


366 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


367 "C++" *
	$¡rÿ£¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

368 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

369 "C++" cÚ¡ *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
,

370 cÚ¡ *
__ÃedË
)

371 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

373 *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

374 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

378 #ifdeà
__USE_GNU


382 *
	$memmem
 (cÚ¡ *
__hay¡ack
, 
size_t
 
__hay¡ackËn
,

383 cÚ¡ *
__ÃedË
, 
size_t
 
__ÃedËËn
)

384 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 3));

388 *
	$__mempıy
 (*
__»¡riù
 
__de¡
,

389 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

390 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

391 *
	$mempıy
 (*
__»¡riù
 
__de¡
,

392 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

393 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

397 
__BEGIN_NAMESPACE_STD


399 
size_t
 
	$¡¾’
 (cÚ¡ *
__s
)

400 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

401 
__END_NAMESPACE_STD


403 #ifdef 
__USE_XOPEN2K8


406 
size_t
 
	$¡ºËn
 (cÚ¡ *
__¡ršg
, 
size_t
 
__maxËn
)

407 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

411 
__BEGIN_NAMESPACE_STD


413 *
	$¡»¼Ü
 (
__”ºum
è
__THROW
;

414 
__END_NAMESPACE_STD


415 #ià
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_MISC


423 #ià
defšed
 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


426 #ifdeà
__REDIRECT_NTH


427 
	`__REDIRECT_NTH
 (
¡»¼Ü_r
,

428 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
),

429 
__xpg_¡»¼Ü_r
è
	`__nÚnuÎ
 ((2));

431 
	$__xpg_¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

432 
__THROW
 
	`__nÚnuÎ
 ((2));

433 
	#¡»¼Ü_r
 
__xpg_¡»¼Ü_r


	)

438 *
	$¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

439 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

443 #ifdeà
__USE_XOPEN2K8


445 *
	$¡»¼Ü_l
 (
__”ºum
, 
__loÿË_t
 
__l
è
__THROW
;

451 
	$__bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

453 #ifdeà
__USE_BSD


455 
	$bcİy
 (cÚ¡ *
__¤c
, *
__de¡
, 
size_t
 
__n
)

456 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

459 
	$bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

462 
	$bcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

463 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

466 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


469 *
	`šdex
 (*
__s
, 
__c
)

470 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

471 cÚ¡ *
	`šdex
 (cÚ¡ *
__s
, 
__c
)

472 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

474 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


475 
__ex‹º_®ways_šlše
 *

476 
	`šdex
 (*
__s
, 
__c
è
__THROW


478  
	`__butš_šdex
 (
__s
, 
__c
);

481 
__ex‹º_®ways_šlše
 const *

482 
	`šdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


484  
	`__butš_šdex
 (
__s
, 
__c
);

487 
	}
}

489 *
	$šdex
 (cÚ¡ *
__s
, 
__c
)

490 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

494 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


497 *
	`ršdex
 (*
__s
, 
__c
)

498 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

499 cÚ¡ *
	`ršdex
 (cÚ¡ *
__s
, 
__c
)

500 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

502 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


503 
__ex‹º_®ways_šlše
 *

504 
	`ršdex
 (*
__s
, 
__c
è
__THROW


506  
	`__butš_ršdex
 (
__s
, 
__c
);

509 
__ex‹º_®ways_šlše
 const *

510 
	`ršdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


512  
	`__butš_ršdex
 (
__s
, 
__c
);

515 
	}
}

517 *
	$ršdex
 (cÚ¡ *
__s
, 
__c
)

518 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

523 
	$ffs
 (
__i
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

527 #ifdef 
__USE_GNU


528 
	$ff¦
 (
__l
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

529 
__ex‹nsiÚ__
 
	$ff¦l
 (
__Î
)

530 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

534 
	$¡rÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

535 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

538 
	$¡ºÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

539 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

542 #ifdef 
__USE_GNU


545 
	$¡rÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

546 
__loÿË_t
 
__loc
)

547 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

549 
	$¡ºÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

550 
size_t
 
__n
, 
__loÿË_t
 
__loc
)

551 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 4));

554 #ifdef 
__USE_BSD


557 *
	$¡r£p
 (**
__»¡riù
 
__¡ršgp
,

558 cÚ¡ *
__»¡riù
 
__d–im
)

559 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

562 #ifdef 
__USE_XOPEN2K8


564 *
	$¡rsigÇl
 (
__sig
è
__THROW
;

567 *
	$__¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

568 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

569 *
	$¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

570 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

574 *
	$__¡²ıy
 (*
__»¡riù
 
__de¡
,

575 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

576 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

577 *
	$¡²ıy
 (*
__»¡riù
 
__de¡
,

578 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

579 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

582 #ifdef 
__USE_GNU


584 
	$¡rv”scmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

585 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

588 *
	$¡räy
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

591 *
	$memäob
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

593 #iâdeà
ba£Çme


598 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


599 "C++" *
	$ba£Çme
 (*
__f’ame
)

600 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

601 "C++" cÚ¡ *
	$ba£Çme
 (cÚ¡ *
__f’ame
)

602 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

604 *
	$ba£Çme
 (cÚ¡ *
__f’ame
è
__THROW
 
	`__nÚnuÎ
 ((1));

610 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

611 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__OPTIMIZE_SIZE__
 \

612 && !
defšed
 
__NO_INLINE__
 && !defšed 
__ılu¥lus


632 
	~<b™s/¡ršg.h
>

635 
	~<b™s/¡ršg2.h
>

638 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


640 
	~<b™s/¡ršg3.h
>

644 
__END_DECLS


	@/usr/include/strings.h

18 #iâdef 
_STRINGS_H


19 
	#_STRINGS_H
 1

	)

24 #ià!
defšed
 
_STRING_H
 || !defšed 
__USE_BSD


26 
	~<ã©u»s.h
>

27 
	#__Ãed_size_t


	)

28 
	~<¡ddef.h
>

35 #ià
defšed
 
__ılu¥lus
 && (__ılu¥lu >ğ199711L || 
__GNUC_PREREQ
 (4, 4))

36 
	#__CORRECT_ISO_CPP_STRINGS_H_PROTO


	)

39 
	g__BEGIN_DECLS


41 #ià
defšed
 
__USE_MISC
 || !defšed 
__USE_XOPEN2K8


43 
	$bcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

44 
__THROW
 
__©Œibu‹_pu»__
;

47 
	$bcİy
 (cÚ¡ *
__¤c
, *
__de¡
, 
size_t
 
__n
è
__THROW
;

50 
	$bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
;

53 #ifdeà
__CORRECT_ISO_CPP_STRINGS_H_PROTO


56 *
	`šdex
 (*
__s
, 
__c
)

57 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

58 cÚ¡ *
	`šdex
 (cÚ¡ *
__s
, 
__c
)

59 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

61 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRING_H_PROTO


62 
__ex‹º_®ways_šlše
 *

63 
	`šdex
 (*
__s
, 
__c
è
__THROW


65  
	`__butš_šdex
 (
__s
, 
__c
);

68 
__ex‹º_®ways_šlše
 const *

69 
	`šdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


71  
	`__butš_šdex
 (
__s
, 
__c
);

74 
	}
}

76 *
	$šdex
 (cÚ¡ *
__s
, 
__c
)

77 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

81 #ifdeà
__CORRECT_ISO_CPP_STRINGS_H_PROTO


84 *
	`ršdex
 (*
__s
, 
__c
)

85 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

86 cÚ¡ *
	`ršdex
 (cÚ¡ *
__s
, 
__c
)

87 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

89 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRING_H_PROTO


90 
__ex‹º_®ways_šlše
 *

91 
	`ršdex
 (*
__s
, 
__c
è
__THROW


93  
	`__butš_ršdex
 (
__s
, 
__c
);

96 
__ex‹º_®ways_šlše
 const *

97 
	`ršdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


99  
	`__butš_ršdex
 (
__s
, 
__c
);

102 
	}
}

104 *
	$ršdex
 (cÚ¡ *
__s
, 
__c
)

105 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

109 #ià
defšed
 
__USE_MISC
 || !defšed 
__USE_XOPEN2K8
 || defšed 
__USE_XOPEN2K8XSI


112 
	$ffs
 (
__i
è
__THROW
 
	`__©Œibu‹__
 ((const));

116 
	$¡rÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

117 
__THROW
 
__©Œibu‹_pu»__
;

120 
	$¡ºÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

121 
__THROW
 
__©Œibu‹_pu»__
;

123 #ifdef 
__USE_XOPEN2K8


127 
	~<xloÿË.h
>

131 
	$¡rÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
__loÿË_t
 
__loc
)

132 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

134 
	$¡ºÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

135 
size_t
 
__n
, 
__loÿË_t
 
__loc
)

136 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 4));

139 
__END_DECLS


	@/usr/include/syscall.h

1 
	~<sys/sysÿÎ.h
>

	@/usr/include/time.h

22 #iâdef 
_TIME_H


24 #ià(! 
defšed
 
__Ãed_time_t
 && !defšed 
__Ãed_şock_t
 && \

25 ! 
defšed
 
	g__Ãed_time¥ec
)

26 
	#_TIME_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


33 #ifdef 
_TIME_H


35 
	#__Ãed_size_t


	)

36 
	#__Ãed_NULL


	)

37 
	~<¡ddef.h
>

41 
	~<b™s/time.h
>

44 #ià!
defšed
 
__STRICT_ANSI__
 && !defšed 
__USE_XOPEN2K


45 #iâdeà
CLK_TCK


46 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

52 #ià!
defšed
 
__şock_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_şock_t
)

53 
	#__şock_t_defšed
 1

	)

55 
	~<b™s/ty³s.h
>

57 
__BEGIN_NAMESPACE_STD


59 
__şock_t
 
	tşock_t
;

60 
	g__END_NAMESPACE_STD


61 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


62 
	$__USING_NAMESPACE_STD
(
şock_t
)

66 #undeà
__Ãed_şock_t


68 #ià!
defšed
 
__time_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_time_t
)

69 
	#__time_t_defšed
 1

	)

71 
	~<b™s/ty³s.h
>

73 
__BEGIN_NAMESPACE_STD


75 
__time_t
 
	ttime_t
;

76 
__END_NAMESPACE_STD


77 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC
 || defšed 
__USE_SVID


78 
	$__USING_NAMESPACE_STD
(
time_t
)

82 #undeà
__Ãed_time_t


84 #ià!
defšed
 
__şockid_t_defšed
 && \

85 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_şockid_t
)

86 
	#__şockid_t_defšed
 1

	)

88 
	~<b™s/ty³s.h
>

91 
__şockid_t
 
	tşockid_t
;

94 #undeà
__şockid_time_t


96 #ià!
defšed
 
__tim”_t_defšed
 && \

97 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_tim”_t
)

98 
	#__tim”_t_defšed
 1

	)

100 
	~<b™s/ty³s.h
>

103 
__tim”_t
 
	ttim”_t
;

106 #undeà
__Ãed_tim”_t


109 #ià(!
defšed
 
__time¥ec_defšed
 \

110 && ((
defšed
 
_TIME_H
 \

111 && (
defšed
 
__USE_POSIX199309
 || defšed 
__USE_MISC
 \

112 || 
defšed
 
__USE_ISOC11
)) \

113 || 
defšed
 
__Ãed_time¥ec
))

114 
	#__time¥ec_defšed
 1

	)

116 
	~<b™s/ty³s.h
>

120 
	stime¥ec


122 
__time_t
 
tv_£c
;

123 
__sysÿÎ_¦Úg_t
 
tv_n£c
;

127 #undeà
__Ãed_time¥ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mš
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_mÚ
;

140 
tm_y—r
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd¡
;

145 #ifdef 
__USE_BSD


146 
tm_gmtoff
;

147 cÚ¡ *
tm_zÚe
;

149 
__tm_gmtoff
;

150 cÚ¡ *
__tm_zÚe
;

153 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifdeà
__USE_POSIX199309


161 
	s™im”¥ec


163 
time¥ec
 
™_š‹rv®
;

164 
time¥ec
 
™_v®ue
;

168 
sigev’t
;

172 #ifdeà
__USE_XOPEN2K


173 #iâdeà
__pid_t_defšed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_defšed


	)

180 #ifdeà
__USE_ISOC11


182 
	#TIME_UTC
 1

	)

186 
__BEGIN_NAMESPACE_STD


189 
şock_t
 
	$şock
 (è
__THROW
;

192 
time_t
 
	$time
 (
time_t
 *
__tim”
è
__THROW
;

195 
	$difáime
 (
time_t
 
__time1
,ime_ˆ
__time0
)

196 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

199 
time_t
 
	$mktime
 (
tm
 *
__
è
__THROW
;

205 
size_t
 
	$¡ráime
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

206 cÚ¡ *
__»¡riù
 
__fÜm©
,

207 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

208 
__END_NAMESPACE_STD


210 #ifdeà
__USE_XOPEN


213 *
	$¡½time
 (cÚ¡ *
__»¡riù
 
__s
,

214 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
)

215 
__THROW
;

218 #ifdeà
__USE_XOPEN2K8


221 
	~<xloÿË.h
>

223 
size_t
 
	$¡ráime_l
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

224 cÚ¡ *
__»¡riù
 
__fÜm©
,

225 cÚ¡ 
tm
 *
__»¡riù
 
__
,

226 
__loÿË_t
 
__loc
è
__THROW
;

229 #ifdeà
__USE_GNU


230 *
	$¡½time_l
 (cÚ¡ *
__»¡riù
 
__s
,

231 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
,

232 
__loÿË_t
 
__loc
è
__THROW
;

236 
__BEGIN_NAMESPACE_STD


239 
tm
 *
	$gmtime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

243 
tm
 *
	$loÿÉime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

244 
__END_NAMESPACE_STD


246 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


249 
tm
 *
	$gmtime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

250 
tm
 *
__»¡riù
 
__
è
__THROW
;

254 
tm
 *
	$loÿÉime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

255 
tm
 *
__»¡riù
 
__
è
__THROW
;

258 
__BEGIN_NAMESPACE_STD


261 *
	$asùime
 (cÚ¡ 
tm
 *
__
è
__THROW
;

264 *
	$ùime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

265 
__END_NAMESPACE_STD


267 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


272 *
	$asùime_r
 (cÚ¡ 
tm
 *
__»¡riù
 
__
,

273 *
__»¡riù
 
__buf
è
__THROW
;

276 *
	$ùime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

277 *
__»¡riù
 
__buf
è
__THROW
;

282 *
__tzÇme
[2];

283 
__daylight
;

284 
__timezÚe
;

287 #ifdef 
__USE_POSIX


289 *
tzÇme
[2];

293 
	$tz£t
 (è
__THROW
;

296 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


297 
daylight
;

298 
timezÚe
;

301 #ifdeà
__USE_SVID


304 
	$¡ime
 (cÚ¡ 
time_t
 *
__wh’
è
__THROW
;

310 
	#__i¦—p
(
y—r
) \

311 ((
y—r
è% 4 =ğ0 && ((y—rè% 100 !ğ0 || (y—rè% 400 =ğ0))

	)

314 #ifdeà
__USE_MISC


319 
time_t
 
	$timegm
 (
tm
 *
__
è
__THROW
;

322 
time_t
 
	$tim–oÿl
 (
tm
 *
__
è
__THROW
;

325 
	$dysize
 (
__y—r
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

329 #ifdeà
__USE_POSIX199309


334 
	`Çno¦“p
 (cÚ¡ 
time¥ec
 *
__»que¡ed_time
,

335 
time¥ec
 *
__»maššg
);

339 
	$şock_g‘»s
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__»s
è
__THROW
;

342 
	$şock_g‘time
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__
è
__THROW
;

345 
	$şock_£‰ime
 (
şockid_t
 
__şock_id
, cÚ¡ 
time¥ec
 *
__
)

346 
__THROW
;

348 #ifdeà
__USE_XOPEN2K


353 
	`şock_Çno¦“p
 (
şockid_t
 
__şock_id
, 
__æags
,

354 cÚ¡ 
time¥ec
 *
__»q
,

355 
time¥ec
 *
__»m
);

358 
	$şock_g‘ıuşockid
 (
pid_t
 
__pid
, 
şockid_t
 *
__şock_id
è
__THROW
;

363 
	$tim”_ü—‹
 (
şockid_t
 
__şock_id
,

364 
sigev’t
 *
__»¡riù
 
__evp
,

365 
tim”_t
 *
__»¡riù
 
__tim”id
è
__THROW
;

368 
	$tim”_d–‘e
 (
tim”_t
 
__tim”id
è
__THROW
;

371 
	$tim”_£‰ime
 (
tim”_t
 
__tim”id
, 
__æags
,

372 cÚ¡ 
™im”¥ec
 *
__»¡riù
 
__v®ue
,

373 
™im”¥ec
 *
__»¡riù
 
__ov®ue
è
__THROW
;

376 
	$tim”_g‘time
 (
tim”_t
 
__tim”id
, 
™im”¥ec
 *
__v®ue
)

377 
__THROW
;

380 
	$tim”_g‘ov”run
 (
tim”_t
 
__tim”id
è
__THROW
;

384 #ifdeà
__USE_ISOC11


386 
	$time¥ec_g‘
 (
time¥ec
 *
__ts
, 
__ba£
)

387 
__THROW
 
	`__nÚnuÎ
 ((1));

391 #ifdeà
__USE_XOPEN_EXTENDED


403 
g‘d©e_”r
;

412 
tm
 *
	`g‘d©e
 (cÚ¡ *
__¡ršg
);

415 #ifdeà
__USE_GNU


426 
	`g‘d©e_r
 (cÚ¡ *
__»¡riù
 
__¡ršg
,

427 
tm
 *
__»¡riù
 
__»sbuå
);

430 
__END_DECLS


	@/usr/include/unistd.h

22 #iâdef 
_UNISTD_H


23 
	#_UNISTD_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


32 #ifdeà
__USE_XOPEN2K8


34 
	#_POSIX_VERSION
 200809L

	)

35 #–ià
defšed
 
__USE_XOPEN2K


37 
	#_POSIX_VERSION
 200112L

	)

38 #–ià
defšed
 
__USE_POSIX199506


40 
	#_POSIX_VERSION
 199506L

	)

41 #–ià
defšed
 
__USE_POSIX199309


43 
	#_POSIX_VERSION
 199309L

	)

46 
	#_POSIX_VERSION
 199009L

	)

52 #ifdeà
__USE_XOPEN2K8


53 
	#__POSIX2_THIS_VERSION
 200809L

	)

55 #–ià
defšed
 
__USE_XOPEN2K


57 
	#__POSIX2_THIS_VERSION
 200112L

	)

58 #–ià
defšed
 
__USE_POSIX199506


60 
	#__POSIX2_THIS_VERSION
 199506L

	)

63 
	#__POSIX2_THIS_VERSION
 199209L

	)

67 
	#_POSIX2_VERSION
 
__POSIX2_THIS_VERSION


	)

71 
	#_POSIX2_C_BIND
 
__POSIX2_THIS_VERSION


	)

75 
	#_POSIX2_C_DEV
 
__POSIX2_THIS_VERSION


	)

79 
	#_POSIX2_SW_DEV
 
__POSIX2_THIS_VERSION


	)

83 
	#_POSIX2_LOCALEDEF
 
__POSIX2_THIS_VERSION


	)

86 #ifdeà
__USE_XOPEN2K8


87 
	#_XOPEN_VERSION
 700

	)

88 #–ià
defšed
 
__USE_XOPEN2K


89 
	#_XOPEN_VERSION
 600

	)

90 #–ià
defšed
 
__USE_UNIX98


91 
	#_XOPEN_VERSION
 500

	)

93 
	#_XOPEN_VERSION
 4

	)

97 
	#_XOPEN_XCU_VERSION
 4

	)

100 
	#_XOPEN_XPG2
 1

	)

101 
	#_XOPEN_XPG3
 1

	)

102 
	#_XOPEN_XPG4
 1

	)

105 
	#_XOPEN_UNIX
 1

	)

108 
	#_XOPEN_CRYPT
 1

	)

112 
	#_XOPEN_ENH_I18N
 1

	)

115 
	#_XOPEN_LEGACY
 1

	)

202 
	~<b™s/posix_İt.h
>

205 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


206 
	~<b™s/’vœÚm’ts.h
>

210 
	#STDIN_FILENO
 0

	)

211 
	#STDOUT_FILENO
 1

	)

212 
	#STDERR_FILENO
 2

	)

217 
	~<b™s/ty³s.h
>

219 #iâdef 
__ssize_t_defšed


220 
__ssize_t
 
	tssize_t
;

221 
	#__ssize_t_defšed


	)

224 
	#__Ãed_size_t


	)

225 
	#__Ãed_NULL


	)

226 
	~<¡ddef.h
>

228 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


231 #iâdeà
__gid_t_defšed


232 
__gid_t
 
	tgid_t
;

233 
	#__gid_t_defšed


	)

236 #iâdeà
__uid_t_defšed


237 
__uid_t
 
	tuid_t
;

238 
	#__uid_t_defšed


	)

241 #iâdeà
__off_t_defšed


242 #iâdeà
__USE_FILE_OFFSET64


243 
__off_t
 
	toff_t
;

245 
__off64_t
 
	toff_t
;

247 
	#__off_t_defšed


	)

249 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


250 
__off64_t
 
	toff64_t
;

251 
	#__off64_t_defšed


	)

254 #iâdeà
__u£cÚds_t_defšed


255 
__u£cÚds_t
 
	tu£cÚds_t
;

256 
	#__u£cÚds_t_defšed


	)

259 #iâdeà
__pid_t_defšed


260 
__pid_t
 
	tpid_t
;

261 
	#__pid_t_defšed


	)

265 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


266 #iâdeà
__šŒ_t_defšed


267 
__šŒ_t
 
	tšŒ_t
;

268 
	#__šŒ_t_defšed


	)

272 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN


273 #iâdeà
__sockËn_t_defšed


274 
__sockËn_t
 
	tsockËn_t
;

275 
	#__sockËn_t_defšed


	)

281 
	#R_OK
 4

	)

282 
	#W_OK
 2

	)

283 
	#X_OK
 1

	)

284 
	#F_OK
 0

	)

287 
	$acûss
 (cÚ¡ *
__Çme
, 
__ty³
è
__THROW
 
	`__nÚnuÎ
 ((1));

289 #ifdeà
__USE_GNU


292 
	$euidacûss
 (cÚ¡ *
__Çme
, 
__ty³
)

293 
__THROW
 
	`__nÚnuÎ
 ((1));

296 
	$—cûss
 (cÚ¡ *
__Çme
, 
__ty³
)

297 
__THROW
 
	`__nÚnuÎ
 ((1));

300 #ifdeà
__USE_ATFILE


304 
	$çcûs§t
 (
__fd
, cÚ¡ *
__fe
, 
__ty³
, 
__æag
)

305 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

310 #iâdef 
_STDIO_H


311 
	#SEEK_SET
 0

	)

312 
	#SEEK_CUR
 1

	)

313 
	#SEEK_END
 2

	)

314 #ifdeà
__USE_GNU


315 
	#SEEK_DATA
 3

	)

316 
	#SEEK_HOLE
 4

	)

320 #ià
defšed
 
__USE_BSD
 && !defšed 
L_SET


322 
	#L_SET
 
SEEK_SET


	)

323 
	#L_INCR
 
SEEK_CUR


	)

324 
	#L_XTND
 
SEEK_END


	)

333 #iâdeà
__USE_FILE_OFFSET64


334 
__off_t
 
	$l£ek
 (
__fd
, 
__off_t
 
__off£t
, 
__wh’û
è
__THROW
;

336 #ifdeà
__REDIRECT_NTH


337 
__off64_t
 
	`__REDIRECT_NTH
 (
l£ek
,

338 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
),

339 
l£ek64
);

341 
	#l£ek
 
l£ek64


	)

344 #ifdeà
__USE_LARGEFILE64


345 
__off64_t
 
	$l£ek64
 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
)

346 
__THROW
;

353 
	`şo£
 (
__fd
);

360 
ssize_t
 
	$»ad
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
è
__wur
;

366 
ssize_t
 
	$wr™e
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
è
__wur
;

368 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


369 #iâdeà
__USE_FILE_OFFSET64


376 
ssize_t
 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

377 
__off_t
 
__off£t
è
__wur
;

384 
ssize_t
 
	$pwr™e
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
,

385 
__off_t
 
__off£t
è
__wur
;

387 #ifdeà
__REDIRECT


388 
ssize_t
 
	`__REDIRECT
 (
´—d
, (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

389 
__off64_t
 
__off£t
),

390 
´—d64
è
__wur
;

391 
ssize_t
 
	`__REDIRECT
 (
pwr™e
, (
__fd
, cÚ¡ *
__buf
,

392 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
),

393 
pwr™e64
è
__wur
;

395 
	#´—d
 
´—d64


	)

396 
	#pwr™e
 
pwr™e64


	)

400 #ifdeà
__USE_LARGEFILE64


404 
ssize_t
 
	$´—d64
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

405 
__off64_t
 
__off£t
è
__wur
;

408 
ssize_t
 
	$pwr™e64
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
,

409 
__off64_t
 
__off£t
è
__wur
;

417 
	$pe
 (
__pedes
[2]è
__THROW
 
__wur
;

419 #ifdeà
__USE_GNU


422 
	$pe2
 (
__pedes
[2], 
__æags
è
__THROW
 
__wur
;

432 
	$®¬m
 (
__£cÚds
è
__THROW
;

444 
	`¦“p
 (
__£cÚds
);

446 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

447 || 
defšed
 
__USE_BSD


452 
__u£cÚds_t
 
	$u®¬m
 (
__u£cÚds_t
 
__v®ue
, __u£cÚds_ˆ
__š‹rv®
)

453 
__THROW
;

460 
	`u¦“p
 (
__u£cÚds_t
 
__u£cÚds
);

469 
	`·u£
 ();

473 
	$chown
 (cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

474 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

476 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


478 
	$fchown
 (
__fd
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
è
__THROW
 
__wur
;

483 
	$lchown
 (cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

484 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

488 #ifdeà
__USE_ATFILE


491 
	$fchowÇt
 (
__fd
, cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
,

492 
__gid_t
 
__group
, 
__æag
)

493 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

497 
	$chdœ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

499 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


501 
	$fchdœ
 (
__fd
è
__THROW
 
__wur
;

511 *
	$g‘cwd
 (*
__buf
, 
size_t
 
__size
è
__THROW
 
__wur
;

513 #ifdef 
__USE_GNU


517 *
	$g‘_cu¼’t_dœ_Çme
 (è
__THROW
;

520 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

521 || 
defšed
 
__USE_BSD


525 *
	$g‘wd
 (*
__buf
)

526 
__THROW
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
 
__wur
;

531 
	$dup
 (
__fd
è
__THROW
 
__wur
;

534 
	$dup2
 (
__fd
, 
__fd2
è
__THROW
;

536 #ifdeà
__USE_GNU


539 
	$dup3
 (
__fd
, 
__fd2
, 
__æags
è
__THROW
;

543 **
__’vœÚ
;

544 #ifdeà
__USE_GNU


545 **
’vœÚ
;

551 
	$execve
 (cÚ¡ *
__·th
, *cÚ¡ 
__¬gv
[],

552 *cÚ¡ 
__’vp
[]è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

554 #ifdeà
__USE_XOPEN2K8


557 
	$ãxecve
 (
__fd
, *cÚ¡ 
__¬gv
[], *cÚ¡ 
__’vp
[])

558 
__THROW
 
	`__nÚnuÎ
 ((2));

563 
	$execv
 (cÚ¡ *
__·th
, *cÚ¡ 
__¬gv
[])

564 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

568 
	$exeşe
 (cÚ¡ *
__·th
, cÚ¡ *
__¬g
, ...)

569 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

573 
	$exeş
 (cÚ¡ *
__·th
, cÚ¡ *
__¬g
, ...)

574 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

578 
	$execvp
 (cÚ¡ *
__fe
, *cÚ¡ 
__¬gv
[])

579 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

584 
	$exeşp
 (cÚ¡ *
__fe
, cÚ¡ *
__¬g
, ...)

585 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

587 #ifdeà
__USE_GNU


590 
	$execv³
 (cÚ¡ *
__fe
, *cÚ¡ 
__¬gv
[],

591 *cÚ¡ 
__’vp
[])

592 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

596 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


598 
	$niû
 (
__šc
è
__THROW
 
__wur
;

603 
	$_ex™
 (
__¡©us
è
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

609 
	~<b™s/cÚâame.h
>

612 
	$·thcÚf
 (cÚ¡ *
__·th
, 
__Çme
)

613 
__THROW
 
	`__nÚnuÎ
 ((1));

616 
	$å©hcÚf
 (
__fd
, 
__Çme
è
__THROW
;

619 
	$syscÚf
 (
__Çme
è
__THROW
;

621 #ifdef 
__USE_POSIX2


623 
size_t
 
	$cÚf¡r
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
è
__THROW
;

628 
__pid_t
 
	$g‘pid
 (è
__THROW
;

631 
__pid_t
 
	$g‘µid
 (è
__THROW
;

634 
__pid_t
 
	$g‘pg½
 (è
__THROW
;

637 
__pid_t
 
	$__g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

638 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


639 
__pid_t
 
	$g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

646 
	$£gid
 (
__pid_t
 
__pid
, __pid_ˆ
__pgid
è
__THROW
;

648 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


660 
	$£g½
 (è
__THROW
;

667 
__pid_t
 
	$£tsid
 (è
__THROW
;

669 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


671 
__pid_t
 
	$g‘sid
 (
__pid_t
 
__pid
è
__THROW
;

675 
__uid_t
 
	$g‘uid
 (è
__THROW
;

678 
__uid_t
 
	$g‘euid
 (è
__THROW
;

681 
__gid_t
 
	$g‘gid
 (è
__THROW
;

684 
__gid_t
 
	$g‘egid
 (è
__THROW
;

689 
	$g‘groups
 (
__size
, 
__gid_t
 
__li¡
[]è
__THROW
 
__wur
;

691 #ifdef 
__USE_GNU


693 
	$group_memb”
 (
__gid_t
 
__gid
è
__THROW
;

700 
	$£tuid
 (
__uid_t
 
__uid
è
__THROW
 
__wur
;

702 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


705 
	$£Œeuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
è
__THROW
 
__wur
;

708 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


710 
	$£‹uid
 (
__uid_t
 
__uid
è
__THROW
 
__wur
;

717 
	$£tgid
 (
__gid_t
 
__gid
è
__THROW
 
__wur
;

719 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


722 
	$£Œegid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
è
__THROW
 
__wur
;

725 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


727 
	$£‹gid
 (
__gid_t
 
__gid
è
__THROW
 
__wur
;

730 #ifdeà
__USE_GNU


733 
	$g‘»suid
 (
__uid_t
 *
__ruid
, __uid_ˆ*
__euid
, __uid_ˆ*
__suid
)

734 
__THROW
;

738 
	$g‘»sgid
 (
__gid_t
 *
__rgid
, __gid_ˆ*
__egid
, __gid_ˆ*
__sgid
)

739 
__THROW
;

743 
	$£Œesuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
, __uid_ˆ
__suid
)

744 
__THROW
 
__wur
;

748 
	$£Œesgid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
, __gid_ˆ
__sgid
)

749 
__THROW
 
__wur
;

756 
__pid_t
 
	$fÜk
 (è
__THROWNL
;

758 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

759 || 
defšed
 
__USE_BSD


764 
__pid_t
 
	$vfÜk
 (è
__THROW
;

770 *
	$‰yÇme
 (
__fd
è
__THROW
;

774 
	$‰yÇme_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

775 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

779 
	$i§‰y
 (
__fd
è
__THROW
;

781 #ià
defšed
 
__USE_BSD
 \

782 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_UNIX98
)

785 
	$‰y¦Ù
 (è
__THROW
;

790 
	$lšk
 (cÚ¡ *
__äom
, cÚ¡ *
__to
)

791 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

793 #ifdeà
__USE_ATFILE


796 
	$lšk©
 (
__äomfd
, cÚ¡ *
__äom
, 
__tofd
,

797 cÚ¡ *
__to
, 
__æags
)

798 
__THROW
 
	`__nÚnuÎ
 ((2, 4)è
__wur
;

801 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


803 
	$symlšk
 (cÚ¡ *
__äom
, cÚ¡ *
__to
)

804 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

809 
ssize_t
 
	$»adlšk
 (cÚ¡ *
__»¡riù
 
__·th
,

810 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

811 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

814 #ifdeà
__USE_ATFILE


816 
	$symlšk©
 (cÚ¡ *
__äom
, 
__tofd
,

817 cÚ¡ *
__to
è
__THROW
 
	`__nÚnuÎ
 ((1, 3)è
__wur
;

820 
ssize_t
 
	$»adlšk©
 (
__fd
, cÚ¡ *
__»¡riù
 
__·th
,

821 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

822 
__THROW
 
	`__nÚnuÎ
 ((2, 3)è
__wur
;

826 
	$uÆšk
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

828 #ifdeà
__USE_ATFILE


830 
	$uÆšk©
 (
__fd
, cÚ¡ *
__Çme
, 
__æag
)

831 
__THROW
 
	`__nÚnuÎ
 ((2));

835 
	$rmdœ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1));

839 
__pid_t
 
	$tcg‘pg½
 (
__fd
è
__THROW
;

842 
	$tc£g½
 (
__fd
, 
__pid_t
 
__pg½_id
è
__THROW
;

849 *
	`g‘logš
 ();

850 #ià
defšed
 
__USE_REENTRANT
 || defšed 
__USE_POSIX199506


857 
	$g‘logš_r
 (*
__Çme
, 
size_t
 
__Çme_Ën
è
	`__nÚnuÎ
 ((1));

860 #ifdef 
__USE_BSD


862 
	$£ogš
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

866 #ifdef 
__USE_POSIX2


870 
	#__Ãed_g‘İt


	)

871 
	~<g‘İt.h
>

875 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


879 
	$g‘ho¡Çme
 (*
__Çme
, 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((1));

883 #ià
defšed
 
__USE_BSD
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_UNIX98
)

886 
	$£tho¡Çme
 (cÚ¡ *
__Çme
, 
size_t
 
__Ën
)

887 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

891 
	$£tho¡id
 (
__id
è
__THROW
 
__wur
;

897 
	$g‘domašÇme
 (*
__Çme
, 
size_t
 
__Ën
)

898 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

899 
	$£tdomašÇme
 (cÚ¡ *
__Çme
, 
size_t
 
__Ën
)

900 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

906 
	$vhªgup
 (è
__THROW
;

909 
	$»voke
 (cÚ¡ *
__fe
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

917 
	$´of
 (*
__§m¶e_bufãr
, 
size_t
 
__size
,

918 
size_t
 
__off£t
, 
__sÿË
)

919 
__THROW
 
	`__nÚnuÎ
 ((1));

925 
	$acù
 (cÚ¡ *
__Çme
è
__THROW
;

929 *
	$g‘u£rsh–l
 (è
__THROW
;

930 
	$’du£rsh–l
 (è
__THROW
;

931 
	$£tu£rsh–l
 (è
__THROW
;

937 
	$d«mÚ
 (
__nochdœ
, 
__noşo£
è
__THROW
 
__wur
;

941 #ià
defšed
 
__USE_BSD
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

944 
	$chroÙ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

948 *
	$g‘·ss
 (cÚ¡ *
__´om±
è
	`__nÚnuÎ
 ((1));

956 
	`fsync
 (
__fd
);

959 #ifdeà
__USE_GNU


962 
	$syncfs
 (
__fd
è
__THROW
;

966 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


969 
	`g‘ho¡id
 ();

972 
	$sync
 (è
__THROW
;

975 #ià
defšed
 
__USE_BSD
 || !defšed 
__USE_XOPEN2K


978 
	$g‘·gesize
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

983 
	$g‘dbËsize
 (è
__THROW
;

989 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


992 #iâdeà
__USE_FILE_OFFSET64


993 
	$Œunÿ‹
 (cÚ¡ *
__fe
, 
__off_t
 
__Ëngth
)

994 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

996 #ifdeà
__REDIRECT_NTH


997 
	`__REDIRECT_NTH
 (
Œunÿ‹
,

998 (cÚ¡ *
__fe
, 
__off64_t
 
__Ëngth
),

999 
Œunÿ‹64
è
	`__nÚnuÎ
 ((1)è
__wur
;

1001 
	#Œunÿ‹
 
Œunÿ‹64


	)

1004 #ifdeà
__USE_LARGEFILE64


1005 
	$Œunÿ‹64
 (cÚ¡ *
__fe
, 
__off64_t
 
__Ëngth
)

1006 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

1011 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_POSIX199309
 \

1012 || 
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


1015 #iâdeà
__USE_FILE_OFFSET64


1016 
	$árunÿ‹
 (
__fd
, 
__off_t
 
__Ëngth
è
__THROW
 
__wur
;

1018 #ifdeà
__REDIRECT_NTH


1019 
	`__REDIRECT_NTH
 (
árunÿ‹
, (
__fd
, 
__off64_t
 
__Ëngth
),

1020 
árunÿ‹64
è
__wur
;

1022 
	#árunÿ‹
 
árunÿ‹64


	)

1025 #ifdeà
__USE_LARGEFILE64


1026 
	$árunÿ‹64
 (
__fd
, 
__off64_t
 
__Ëngth
è
__THROW
 
__wur
;

1032 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

1033 || 
defšed
 
__USE_MISC


1037 
	$brk
 (*
__addr
è
__THROW
 
__wur
;

1043 *
	$sbrk
 (
šŒ_t
 
__d–
è
__THROW
;

1047 #ifdeà
__USE_MISC


1058 
	$sysÿÎ
 (
__sy¢o
, ...è
__THROW
;

1063 #ià(
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
è&& !defšed 
F_LOCK


1075 
	#F_ULOCK
 0

	)

1076 
	#F_LOCK
 1

	)

1077 
	#F_TLOCK
 2

	)

1078 
	#F_TEST
 3

	)

1080 #iâdeà
__USE_FILE_OFFSET64


1081 
	$lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Ën
è
__wur
;

1083 #ifdeà
__REDIRECT


1084 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
),

1085 
lockf64
è
__wur
;

1087 
	#lockf
 
lockf64


	)

1090 #ifdeà
__USE_LARGEFILE64


1091 
	$lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
è
__wur
;

1096 #ifdeà
__USE_GNU


1101 
	#TEMP_FAILURE_RETRY
(
ex´essiÚ
) \

1102 (
__ex‹nsiÚ__
 \

1103 ({ 
__»suÉ
; \

1104 dØ
__»suÉ
 = (è(
ex´essiÚ
); \

1105 
__»suÉ
 =ğ-1L && 
”ºo
 =ğ
EINTR
); \

1106 
__»suÉ
; 
	}
}))

	)

1109 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_UNIX98


1112 
fd©async
 (
__fdes
);

1118 #ifdef 
__USE_XOPEN


1120 *
	$üy±
 (cÚ¡ *
__key
, cÚ¡ *
__§É
)

1121 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1125 
	$’üy±
 (*
__glibc_block
, 
__edæag
)

1126 
__THROW
 
	`__nÚnuÎ
 ((1));

1133 
	$swab
 (cÚ¡ *
__»¡riù
 
__äom
, *__»¡riù 
__to
,

1134 
ssize_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1140 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K


1142 *
	$ù”mid
 (*
__s
è
__THROW
;

1147 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


1148 
	~<b™s/uni¡d.h
>

1151 
__END_DECLS


	@/usr/include/alloca.h

18 #iâdef 
_ALLOCA_H


19 
	#_ALLOCA_H
 1

	)

21 
	~<ã©u»s.h
>

23 
	#__Ãed_size_t


	)

24 
	~<¡ddef.h
>

26 
	g__BEGIN_DECLS


29 #undeà
®loÿ


32 *
	$®loÿ
 (
size_t
 
__size
è
__THROW
;

34 #ifdef 
__GNUC__


35 
	#®loÿ
(
size
è
	`__butš_®loÿ
 (size)

	)

38 
__END_DECLS


	@/usr/include/features.h

18 #iâdef 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

101 #undeà
__USE_ISOC11


102 #undeà
__USE_ISOC99


103 #undeà
__USE_ISOC95


104 #undeà
__USE_ISOCXX11


105 #undeà
__USE_POSIX


106 #undeà
__USE_POSIX2


107 #undeà
__USE_POSIX199309


108 #undeà
__USE_POSIX199506


109 #undeà
__USE_XOPEN


110 #undeà
__USE_XOPEN_EXTENDED


111 #undeà
__USE_UNIX98


112 #undeà
__USE_XOPEN2K


113 #undeà
__USE_XOPEN2KXSI


114 #undeà
__USE_XOPEN2K8


115 #undeà
__USE_XOPEN2K8XSI


116 #undeà
__USE_LARGEFILE


117 #undeà
__USE_LARGEFILE64


118 #undeà
__USE_FILE_OFFSET64


119 #undeà
__USE_BSD


120 #undeà
__USE_SVID


121 #undeà
__USE_MISC


122 #undeà
__USE_ATFILE


123 #undeà
__USE_GNU


124 #undeà
__USE_REENTRANT


125 #undeà
__USE_FORTIFY_LEVEL


126 #undeà
__KERNEL_STRICT_NAMES


130 #iâdeà
_LOOSE_KERNEL_NAMES


131 
	#__KERNEL_STRICT_NAMES


	)

141 #ià
defšed
 
__GNUC__
 && defšed 
__GNUC_MINOR__


142 
	#__GNUC_PREREQ
(
maj
, 
mš
) \

143 ((
__GNUC__
 << 16è+ 
__GNUC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

145 
	#__GNUC_PREREQ
(
maj
, 
mš
è0

	)

150 #ifdeà
_GNU_SOURCE


151 #undeà
_ISOC95_SOURCE


152 
	#_ISOC95_SOURCE
 1

	)

153 #undeà
_ISOC99_SOURCE


154 
	#_ISOC99_SOURCE
 1

	)

155 #undeà
_ISOC11_SOURCE


156 
	#_ISOC11_SOURCE
 1

	)

157 #undeà
_POSIX_SOURCE


158 
	#_POSIX_SOURCE
 1

	)

159 #undeà
_POSIX_C_SOURCE


160 
	#_POSIX_C_SOURCE
 200809L

	)

161 #undeà
_XOPEN_SOURCE


162 
	#_XOPEN_SOURCE
 700

	)

163 #undeà
_XOPEN_SOURCE_EXTENDED


164 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

165 #undeà
_LARGEFILE64_SOURCE


166 
	#_LARGEFILE64_SOURCE
 1

	)

167 #undeà
_DEFAULT_SOURCE


168 
	#_DEFAULT_SOURCE
 1

	)

169 #undeà
_BSD_SOURCE


170 
	#_BSD_SOURCE
 1

	)

171 #undeà
_SVID_SOURCE


172 
	#_SVID_SOURCE
 1

	)

173 #undeà
_ATFILE_SOURCE


174 
	#_ATFILE_SOURCE
 1

	)

179 #ià(
defšed
 
_DEFAULT_SOURCE
 \

180 || (!
defšed
 
	g__STRICT_ANSI__
 \

181 && !
defšed
 
	g_ISOC99_SOURCE
 \

182 && !
defšed
 
	g_POSIX_SOURCE
 && !defšed 
	g_POSIX_C_SOURCE
 \

183 && !
defšed
 
	g_XOPEN_SOURCE
 \

184 && !
defšed
 
	g_BSD_SOURCE
 && !defšed 
	g_SVID_SOURCE
))

185 #undeà
_DEFAULT_SOURCE


186 
	#_DEFAULT_SOURCE
 1

	)

187 #undeà
_BSD_SOURCE


188 
	#_BSD_SOURCE
 1

	)

189 #undeà
_SVID_SOURCE


190 
	#_SVID_SOURCE
 1

	)

194 #ià(
defšed
 
_ISOC11_SOURCE
 \

195 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

196 
	#__USE_ISOC11
 1

	)

200 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

201 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

202 
	#__USE_ISOC99
 1

	)

206 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

207 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

208 
	#__USE_ISOC95
 1

	)

215 #ià((
defšed
 
__ılu¥lus
 && __cplusplus >= 201103L) \

216 || 
defšed
 
__GXX_EXPERIMENTAL_CXX0X__
)

217 
	#__USE_ISOCXX11
 1

	)

223 #ifdeà
_DEFAULT_SOURCE


224 #ià!
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE


225 
	#__USE_POSIX_IMPLICITLY
 1

	)

227 #undeà
_POSIX_SOURCE


228 
	#_POSIX_SOURCE
 1

	)

229 #undeà
_POSIX_C_SOURCE


230 
	#_POSIX_C_SOURCE
 200809L

	)

232 #ià((!
defšed
 
__STRICT_ANSI__
 || (
_XOPEN_SOURCE
 - 0) >= 500) && \

233 !
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE
)

234 
	#_POSIX_SOURCE
 1

	)

235 #ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

236 
	#_POSIX_C_SOURCE
 2

	)

237 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

238 
	#_POSIX_C_SOURCE
 199506L

	)

239 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

240 
	#_POSIX_C_SOURCE
 200112L

	)

242 
	#_POSIX_C_SOURCE
 200809L

	)

244 
	#__USE_POSIX_IMPLICITLY
 1

	)

247 #ià
defšed
 
_POSIX_SOURCE
 || 
_POSIX_C_SOURCE
 >ğ1 || defšed 
_XOPEN_SOURCE


248 
	#__USE_POSIX
 1

	)

251 #ià
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >ğ2 || defšed 
_XOPEN_SOURCE


252 
	#__USE_POSIX2
 1

	)

255 #ià(
_POSIX_C_SOURCE
 - 0) >= 199309L

256 
	#__USE_POSIX199309
 1

	)

259 #ià(
_POSIX_C_SOURCE
 - 0) >= 199506L

260 
	#__USE_POSIX199506
 1

	)

263 #ià(
_POSIX_C_SOURCE
 - 0) >= 200112L

264 
	#__USE_XOPEN2K
 1

	)

265 #undeà
__USE_ISOC95


266 
	#__USE_ISOC95
 1

	)

267 #undeà
__USE_ISOC99


268 
	#__USE_ISOC99
 1

	)

271 #ià(
_POSIX_C_SOURCE
 - 0) >= 200809L

272 
	#__USE_XOPEN2K8
 1

	)

273 #undeà
_ATFILE_SOURCE


274 
	#_ATFILE_SOURCE
 1

	)

277 #ifdef 
_XOPEN_SOURCE


278 
	#__USE_XOPEN
 1

	)

279 #ià(
_XOPEN_SOURCE
 - 0) >= 500

280 
	#__USE_XOPEN_EXTENDED
 1

	)

281 
	#__USE_UNIX98
 1

	)

282 #undeà
_LARGEFILE_SOURCE


283 
	#_LARGEFILE_SOURCE
 1

	)

284 #ià(
_XOPEN_SOURCE
 - 0) >= 600

285 #ià(
_XOPEN_SOURCE
 - 0) >= 700

286 
	#__USE_XOPEN2K8
 1

	)

287 
	#__USE_XOPEN2K8XSI
 1

	)

289 
	#__USE_XOPEN2K
 1

	)

290 
	#__USE_XOPEN2KXSI
 1

	)

291 #undeà
__USE_ISOC95


292 
	#__USE_ISOC95
 1

	)

293 #undeà
__USE_ISOC99


294 
	#__USE_ISOC99
 1

	)

297 #ifdeà
_XOPEN_SOURCE_EXTENDED


298 
	#__USE_XOPEN_EXTENDED
 1

	)

303 #ifdeà
_LARGEFILE_SOURCE


304 
	#__USE_LARGEFILE
 1

	)

307 #ifdeà
_LARGEFILE64_SOURCE


308 
	#__USE_LARGEFILE64
 1

	)

311 #ià
defšed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

312 
	#__USE_FILE_OFFSET64
 1

	)

315 #ià
defšed
 
_BSD_SOURCE
 || defšed 
_SVID_SOURCE


316 
	#__USE_MISC
 1

	)

319 #ifdef 
_BSD_SOURCE


320 
	#__USE_BSD
 1

	)

323 #ifdef 
_SVID_SOURCE


324 
	#__USE_SVID
 1

	)

327 #ifdef 
_ATFILE_SOURCE


328 
	#__USE_ATFILE
 1

	)

331 #ifdef 
_GNU_SOURCE


332 
	#__USE_GNU
 1

	)

335 #ià
defšed
 
_REENTRANT
 || defšed 
_THREAD_SAFE


336 
	#__USE_REENTRANT
 1

	)

339 #ià
defšed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

340 && 
__GNUC_PREREQ
 (4, 1è&& 
defšed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

341 #ià
_FORTIFY_SOURCE
 > 1

342 
	#__USE_FORTIFY_LEVEL
 2

	)

344 
	#__USE_FORTIFY_LEVEL
 1

	)

347 
	#__USE_FORTIFY_LEVEL
 0

	)

352 
	~<¡dc-´edef.h
>

360 #undeà
__GNU_LIBRARY__


361 
	#__GNU_LIBRARY__
 6

	)

365 
	#__GLIBC__
 2

	)

366 
	#__GLIBC_MINOR__
 19

	)

368 
	#__GLIBC_PREREQ
(
maj
, 
mš
) \

369 ((
__GLIBC__
 << 16è+ 
__GLIBC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

372 #iâdeà
__ASSEMBLER__


373 #iâdeà
_SYS_CDEFS_H


374 
	~<sys/cdefs.h
>

379 #ià
defšed
 
__USE_FILE_OFFSET64
 && !defšed 
__REDIRECT


380 
	#__USE_LARGEFILE
 1

	)

381 
	#__USE_LARGEFILE64
 1

	)

387 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

388 && !
defšed
 
	g__OPTIMIZE_SIZE__
 && !defšed 
	g__NO_INLINE__
 \

389 && 
defšed
 
	g__ex‹º_šlše


390 
	#__USE_EXTERN_INLINES
 1

	)

398 
	~<gnu/¡ubs.h
>

	@/usr/include/getopt.h

19 #iâdeà
_GETOPT_H


21 #iâdeà
__Ãed_g‘İt


22 
	#_GETOPT_H
 1

	)

32 #ià!
defšed
 
__GNU_LIBRARY__


33 
	~<ùy³.h
>

36 #iâdeà
__THROW


37 #iâdeà
__GNUC_PREREQ


38 
	#__GNUC_PREREQ
(
maj
, 
mš
è(0)

	)

40 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

41 
	#__THROW
 
	`throw
 ()

	)

43 
	#__THROW


	)

47 #ifdef 
__ılu¥lus


57 *
İrg
;

71 
İtšd
;

76 
İ‹¼
;

80 
İtİt
;

82 #iâdeà
__Ãed_g‘İt


104 
	sİtiÚ


106 cÚ¡ *
	gÇme
;

109 
	ghas_¬g
;

110 *
	gæag
;

111 
	gv®
;

116 
	#no_¬gum’t
 0

	)

117 
	#»quœed_¬gum’t
 1

	)

118 
	#İtiÚ®_¬gum’t
 2

	)

146 #ifdeà
__GNU_LIBRARY__


150 
g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
, cÚ¡ *
__shÜtİts
)

151 
__THROW
;

153 #ià
defšed
 
__Ãed_g‘İt
 && defšed 
__USE_POSIX2
 \

154 && !
defšed
 
	g__USE_POSIX_IMPLICITLY
 && !defšed 
	g__USE_GNU


158 #ifdeà
__REDIRECT


159 
__REDIRECT_NTH
 (
g‘İt
, (
___¬gc
, *cÚ¡ *
___¬gv
,

160 cÚ¡ *
__shÜtİts
),

161 
__posix_g‘İt
);

163 
__posix_g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
,

164 cÚ¡ *
__shÜtİts
è
__THROW
;

165 
	#g‘İt
 
__posix_g‘İt


	)

169 
g‘İt
 ();

172 #iâdeà
__Ãed_g‘İt


173 
g‘İt_lÚg
 (
___¬gc
, *cÚ¡ *
___¬gv
,

174 cÚ¡ *
__shÜtİts
,

175 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

176 
__THROW
;

177 
g‘İt_lÚg_Úly
 (
___¬gc
, *cÚ¡ *
___¬gv
,

178 cÚ¡ *
__shÜtİts
,

179 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

180 
__THROW
;

184 #ifdef 
__ılu¥lus


189 #undeà
__Ãed_g‘İt


	@/usr/include/libio.h

28 #iâdeà
_IO_STDIO_H


29 
	#_IO_STDIO_H


	)

31 
	~<_G_cÚfig.h
>

33 
	#_IO_åos_t
 
_G_åos_t


	)

34 
	#_IO_åos64_t
 
_G_åos64_t


	)

35 
	#_IO_size_t
 
size_t


	)

36 
	#_IO_ssize_t
 
__ssize_t


	)

37 
	#_IO_off_t
 
__off_t


	)

38 
	#_IO_off64_t
 
__off64_t


	)

39 
	#_IO_pid_t
 
__pid_t


	)

40 
	#_IO_uid_t
 
__uid_t


	)

41 
	#_IO_icÚv_t
 
_G_icÚv_t


	)

42 
	#_IO_HAVE_ST_BLKSIZE
 
_G_HAVE_ST_BLKSIZE


	)

43 
	#_IO_BUFSIZ
 
_G_BUFSIZ


	)

44 
	#_IO_va_li¡
 
_G_va_li¡


	)

45 
	#_IO_wšt_t
 
wšt_t


	)

48 
	#__Ãed___va_li¡


	)

49 
	~<¡d¬g.h
>

50 #ifdeà
__GNUC_VA_LIST


51 #undeà
_IO_va_li¡


52 
	#_IO_va_li¡
 
__gnuc_va_li¡


	)

55 #iâdeà
__P


56 
	~<sys/cdefs.h
>

59 
	#_IO_UNIFIED_JUMPTABLES
 1

	)

61 #iâdeà
EOF


62 
	#EOF
 (-1)

	)

64 #iâdeà
NULL


65 #ià
defšed
 
__GNUG__
 && \

66 (
	g__GNUC__
 > 2 || (__GNUC__ =ğ2 && 
__GNUC_MINOR__
 >= 8))

67 
	#NULL
 (
__nuÎ
)

	)

69 #ià!
defšed
(
__ılu¥lus
)

70 
	#NULL
 ((*)0)

	)

72 
	#NULL
 (0)

	)

77 
	#_IOS_INPUT
 1

	)

78 
	#_IOS_OUTPUT
 2

	)

79 
	#_IOS_ATEND
 4

	)

80 
	#_IOS_APPEND
 8

	)

81 
	#_IOS_TRUNC
 16

	)

82 
	#_IOS_NOCREATE
 32

	)

83 
	#_IOS_NOREPLACE
 64

	)

84 
	#_IOS_BIN
 128

	)

92 
	#_IO_MAGIC
 0xFBAD0000

	)

93 
	#_OLD_STDIO_MAGIC
 0xFABC0000

	)

94 
	#_IO_MAGIC_MASK
 0xFFFF0000

	)

95 
	#_IO_USER_BUF
 1

	)

96 
	#_IO_UNBUFFERED
 2

	)

97 
	#_IO_NO_READS
 4

	)

98 
	#_IO_NO_WRITES
 8

	)

99 
	#_IO_EOF_SEEN
 0x10

	)

100 
	#_IO_ERR_SEEN
 0x20

	)

101 
	#_IO_DELETE_DONT_CLOSE
 0x40

	)

102 
	#_IO_LINKED
 0x80

	)

103 
	#_IO_IN_BACKUP
 0x100

	)

104 
	#_IO_LINE_BUF
 0x200

	)

105 
	#_IO_TIED_PUT_GET
 0x400

	)

106 
	#_IO_CURRENTLY_PUTTING
 0x800

	)

107 
	#_IO_IS_APPENDING
 0x1000

	)

108 
	#_IO_IS_FILEBUF
 0x2000

	)

109 
	#_IO_BAD_SEEN
 0x4000

	)

110 
	#_IO_USER_LOCK
 0x8000

	)

112 
	#_IO_FLAGS2_MMAP
 1

	)

113 
	#_IO_FLAGS2_NOTCANCEL
 2

	)

114 #ifdeà
_LIBC


115 
	#_IO_FLAGS2_FORTIFY
 4

	)

117 
	#_IO_FLAGS2_USER_WBUF
 8

	)

118 #ifdeà
_LIBC


119 
	#_IO_FLAGS2_SCANF_STD
 16

	)

120 
	#_IO_FLAGS2_NOCLOSE
 32

	)

121 
	#_IO_FLAGS2_CLOEXEC
 64

	)

125 
	#_IO_SKIPWS
 01

	)

126 
	#_IO_LEFT
 02

	)

127 
	#_IO_RIGHT
 04

	)

128 
	#_IO_INTERNAL
 010

	)

129 
	#_IO_DEC
 020

	)

130 
	#_IO_OCT
 040

	)

131 
	#_IO_HEX
 0100

	)

132 
	#_IO_SHOWBASE
 0200

	)

133 
	#_IO_SHOWPOINT
 0400

	)

134 
	#_IO_UPPERCASE
 01000

	)

135 
	#_IO_SHOWPOS
 02000

	)

136 
	#_IO_SCIENTIFIC
 04000

	)

137 
	#_IO_FIXED
 010000

	)

138 
	#_IO_UNITBUF
 020000

	)

139 
	#_IO_STDIO
 040000

	)

140 
	#_IO_DONT_CLOSE
 0100000

	)

141 
	#_IO_BOOLALPHA
 0200000

	)

144 
_IO_jump_t
; 
	g_IO_FILE
;

147 #ifdeà
_IO_MTSAFE_IO


148 #ià
defšed
 
__GLIBC__
 && __GLIBC__ >= 2

149 
	~<b™s/¡dio-lock.h
>

154 
	t_IO_lock_t
;

160 
	s_IO_m¬k”
 {

161 
_IO_m¬k”
 *
	m_Ãxt
;

162 
_IO_FILE
 *
	m_sbuf
;

166 
	m_pos
;

168 
£t_¡»ampos
(
¡»ampos
 
¥
è{ 
	m_¥os
 = sp; }

169 
£t_off£t
(
off£t
è{ 
	m_pos
 = off£t; 
	m_¥os
 = (
¡»ampos
)(-2); }

170 
	mpublic
:

171 
¡»amm¬k”
(
¡»ambuf
 *
sb
);

172 ~
¡»amm¬k”
();

173 
§všg
(è{  
	m_¥os
 == -2; }

174 
d–
(
¡»amm¬k”
&);

175 
d–
();

180 
	e__codecvt_»suÉ


182 
	m__codecvt_ok
,

183 
	m__codecvt_·¹Ÿl
,

184 
	m__codecvt_”rÜ
,

185 
	m__codecvt_nocÚv


188 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


191 
	s_IO_codecvt


193 (*
	m__codecvt_de¡r
è(
	m_IO_codecvt
 *);

194 
__codecvt_»suÉ
 (*
__codecvt_do_out
è(
	m_IO_codecvt
 *,

195 
	m__mb¡©e_t
 *,

196 cÚ¡ 
	mwch¬_t
 *,

197 cÚ¡ 
	mwch¬_t
 *,

198 cÚ¡ 
	mwch¬_t
 **, *,

200 
__codecvt_»suÉ
 (*
__codecvt_do_unshiá
è(
	m_IO_codecvt
 *,

201 
	m__mb¡©e_t
 *, *,

203 
__codecvt_»suÉ
 (*
__codecvt_do_š
è(
	m_IO_codecvt
 *,

204 
	m__mb¡©e_t
 *,

206 cÚ¡ **, 
	mwch¬_t
 *,

207 
	mwch¬_t
 *, wchar_t **);

208 (*
	m__codecvt_do_’codšg
è(
	m_IO_codecvt
 *);

209 (*
	m__codecvt_do_®ways_nocÚv
è(
	m_IO_codecvt
 *);

210 (*
	m__codecvt_do_Ëngth
è(
	m_IO_codecvt
 *, 
	m__mb¡©e_t
 *,

211 cÚ¡ *, cÚ¡ *, 
	m_IO_size_t
);

212 (*
	m__codecvt_do_max_Ëngth
è(
	m_IO_codecvt
 *);

214 
_IO_icÚv_t
 
	m__cd_š
;

215 
_IO_icÚv_t
 
	m__cd_out
;

219 
	s_IO_wide_d©a


221 
wch¬_t
 *
	m_IO_»ad_±r
;

222 
wch¬_t
 *
	m_IO_»ad_’d
;

223 
wch¬_t
 *
	m_IO_»ad_ba£
;

224 
wch¬_t
 *
	m_IO_wr™e_ba£
;

225 
wch¬_t
 *
	m_IO_wr™e_±r
;

226 
wch¬_t
 *
	m_IO_wr™e_’d
;

227 
wch¬_t
 *
	m_IO_buf_ba£
;

228 
wch¬_t
 *
	m_IO_buf_’d
;

230 
wch¬_t
 *
	m_IO_§ve_ba£
;

231 
wch¬_t
 *
	m_IO_backup_ba£
;

233 
wch¬_t
 *
	m_IO_§ve_’d
;

235 
__mb¡©e_t
 
	m_IO_¡©e
;

236 
__mb¡©e_t
 
	m_IO_Ï¡_¡©e
;

237 
_IO_codecvt
 
	m_codecvt
;

239 
wch¬_t
 
	m_shÜtbuf
[1];

241 cÚ¡ 
_IO_jump_t
 *
	m_wide_vbË
;

245 
	s_IO_FILE
 {

246 
	m_æags
;

247 
	#_IO_fe_æags
 
_æags


	)

251 * 
	m_IO_»ad_±r
;

252 * 
	m_IO_»ad_’d
;

253 * 
	m_IO_»ad_ba£
;

254 * 
	m_IO_wr™e_ba£
;

255 * 
	m_IO_wr™e_±r
;

256 * 
	m_IO_wr™e_’d
;

257 * 
	m_IO_buf_ba£
;

258 * 
	m_IO_buf_’d
;

260 *
	m_IO_§ve_ba£
;

261 *
	m_IO_backup_ba£
;

262 *
	m_IO_§ve_’d
;

264 
_IO_m¬k”
 *
	m_m¬k”s
;

266 
_IO_FILE
 *
	m_chaš
;

268 
	m_f’o
;

270 
	m_blksize
;

272 
	m_æags2
;

274 
_IO_off_t
 
	m_Şd_off£t
;

276 
	#__HAVE_COLUMN


	)

278 
	m_cur_cŞumn
;

279 sigÃd 
	m_vbË_off£t
;

280 
	m_shÜtbuf
[1];

284 
_IO_lock_t
 *
	m_lock
;

285 #ifdeà
_IO_USE_OLD_IO_FILE


288 
	s_IO_FILE_com¶‘e


290 
_IO_FILE
 
	m_fe
;

292 #ià
defšed
 
_G_IO_IO_FILE_VERSION
 && _G_IO_IO_FILE_VERSION == 0x20001

293 
_IO_off64_t
 
	m_off£t
;

294 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


296 
_IO_codecvt
 *
	m_codecvt
;

297 
_IO_wide_d©a
 *
	m_wide_d©a
;

298 
_IO_FILE
 *
	m_ä“»s_li¡
;

299 *
	m_ä“»s_buf
;

300 
size_t
 
	m_ä“»s_size
;

302 *
	m__·d1
;

303 *
	m__·d2
;

304 *
	m__·d3
;

305 *
	m__·d4
;

306 
size_t
 
	m__·d5
;

308 
	m_mode
;

310 
	m_unu£d2
[15 *  (è- 4 *  (*è-  (
size_t
)];

314 #iâdeà
__ılu¥lus


315 
_IO_FILE
 
	t_IO_FILE
;

318 
	g_IO_FILE_¶us
;

320 
_IO_FILE_¶us
 
_IO_2_1_¡dš_
;

321 
_IO_FILE_¶us
 
_IO_2_1_¡dout_
;

322 
_IO_FILE_¶us
 
_IO_2_1_¡d”r_
;

323 #iâdeà
_LIBC


324 
	#_IO_¡dš
 ((
_IO_FILE
*)(&
_IO_2_1_¡dš_
))

	)

325 
	#_IO_¡dout
 ((
_IO_FILE
*)(&
_IO_2_1_¡dout_
))

	)

326 
	#_IO_¡d”r
 ((
_IO_FILE
*)(&
_IO_2_1_¡d”r_
))

	)

328 
_IO_FILE
 *
_IO_¡dš
 
©Œibu‹_hidd’
;

329 
_IO_FILE
 *
_IO_¡dout
 
©Œibu‹_hidd’
;

330 
_IO_FILE
 *
_IO_¡d”r
 
©Œibu‹_hidd’
;

338 
__ssize_t
 
	t__io_»ad_â
 (*
	t__cook›
, *
	t__buf
, 
	tsize_t
 
	t__nby‹s
);

346 
__ssize_t
 
	t__io_wr™e_â
 (*
	t__cook›
, cÚ¡ *
	t__buf
,

347 
	tsize_t
 
	t__n
);

355 
	t__io_£ek_â
 (*
	t__cook›
, 
	t_IO_off64_t
 *
	t__pos
, 
	t__w
);

358 
	t__io_şo£_â
 (*
	t__cook›
);

361 #ifdeà
_GNU_SOURCE


363 
__io_»ad_â
 
	tcook›_»ad_funùiÚ_t
;

364 
__io_wr™e_â
 
	tcook›_wr™e_funùiÚ_t
;

365 
__io_£ek_â
 
	tcook›_£ek_funùiÚ_t
;

366 
__io_şo£_â
 
	tcook›_şo£_funùiÚ_t
;

371 
__io_»ad_â
 *
	m»ad
;

372 
__io_wr™e_â
 *
	mwr™e
;

373 
__io_£ek_â
 *
	m£ek
;

374 
__io_şo£_â
 *
	mşo£
;

375 } 
	t_IO_cook›_io_funùiÚs_t
;

376 
_IO_cook›_io_funùiÚs_t
 
	tcook›_io_funùiÚs_t
;

378 
	g_IO_cook›_fe
;

381 
_IO_cook›_š™
 (
_IO_cook›_fe
 *
__cfe
, 
__»ad_wr™e
,

382 *
__cook›
, 
_IO_cook›_io_funùiÚs_t
 
__âs
);

386 #ifdeà
__ılu¥lus


390 
__und”æow
 (
_IO_FILE
 *);

391 
__uæow
 (
_IO_FILE
 *);

392 
__ov”æow
 (
_IO_FILE
 *, );

393 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


394 
_IO_wšt_t
 
__wund”æow
 (
_IO_FILE
 *);

395 
_IO_wšt_t
 
__wuæow
 (
_IO_FILE
 *);

396 
_IO_wšt_t
 
__wov”æow
 (
_IO_FILE
 *, _IO_wint_t);

399 #ià 
__GNUC__
 >= 3

400 
	#_IO_BE
(
ex´
, 
»s
è
	`__butš_ex³ù
 (Óx´),„es)

	)

402 
	#_IO_BE
(
ex´
, 
»s
èÓx´)

	)

405 
	#_IO_g‘c_uÆocked
(
_å
) \

406 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

407 ? 
	`__uæow
 (
_å
è: *(*è(_å)->
_IO_»ad_±r
++)

	)

408 
	#_IO_³ekc_uÆocked
(
_å
) \

409 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

410 && 
	`__und”æow
 (
_å
è=ğ
EOF
 ? EOF \

411 : *(*è(
_å
)->
_IO_»ad_±r
)

	)

412 
	#_IO_putc_uÆocked
(
_ch
, 
_å
) \

413 (
	`_IO_BE
 ((
_å
)->
_IO_wr™e_±r
 >ğ(_å)->
_IO_wr™e_’d
, 0) \

414 ? 
	`__ov”æow
 (
_å
, (è(
_ch
)) \

415 : (è(*(
_å
)->
_IO_wr™e_±r
++ = (
_ch
)))

	)

417 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


418 
	#_IO_g‘wc_uÆocked
(
_å
) \

419 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

420 || ((
_å
)->
_wide_d©a
->
_IO_»ad_±r
 \

421 >ğ(
_å
)->
_wide_d©a
->
_IO_»ad_’d
), 0) \

422 ? 
	`__wuæow
 (
_å
è: (
_IO_wšt_t
è*(_å)->
_wide_d©a
->
_IO_»ad_±r
++)

	)

423 
	#_IO_putwc_uÆocked
(
_wch
, 
_å
) \

424 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

425 || ((
_å
)->
_wide_d©a
->
_IO_wr™e_±r
 \

426 >ğ(
_å
)->
_wide_d©a
->
_IO_wr™e_’d
), 0) \

427 ? 
	`__wov”æow
 (
_å
, 
_wch
) \

428 : (
_IO_wšt_t
è(*(
_å
)->
_wide_d©a
->
_IO_wr™e_±r
++ = (
_wch
)))

	)

431 
	#_IO_ãof_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_EOF_SEEN
è!ğ0)

	)

432 
	#_IO_ã¼Ü_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_ERR_SEEN
è!ğ0)

	)

434 
_IO_g‘c
 (
_IO_FILE
 *
__å
);

435 
_IO_putc
 (
__c
, 
_IO_FILE
 *
__å
);

436 
_IO_ãof
 (
_IO_FILE
 *
__å
è
__THROW
;

437 
_IO_ã¼Ü
 (
_IO_FILE
 *
__å
è
__THROW
;

439 
_IO_³ekc_locked
 (
_IO_FILE
 *
__å
);

442 
	#_IO_PENDING_OUTPUT_COUNT
(
_å
) \

443 ((
_å
)->
_IO_wr™e_±r
 - (_å)->
_IO_wr™e_ba£
)

	)

445 
_IO_æockfe
 (
_IO_FILE
 *è
__THROW
;

446 
_IO_fuÆockfe
 (
_IO_FILE
 *è
__THROW
;

447 
_IO_árylockfe
 (
_IO_FILE
 *è
__THROW
;

449 #ifdeà
_IO_MTSAFE_IO


450 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_locked
 (_å)

	)

451 
	#_IO_æockfe
(
_å
) \

452 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_æockfe
 (_å)

	)

453 
	#_IO_fuÆockfe
(
_å
) \

454 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_fuÆockfe
 (_å)

	)

456 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_uÆocked
 (_å)

	)

457 
	#_IO_æockfe
(
_å
è

	)

458 
	#_IO_fuÆockfe
(
_å
è

	)

459 
	#_IO_árylockfe
(
_å
è

	)

460 
	#_IO_ş—nup_»giÚ_¡¬t
(
_fù
, 
_å
è

	)

461 
	#_IO_ş—nup_»giÚ_’d
(
_Do™
è

	)

464 
_IO_vfsÿnf
 (
_IO_FILE
 * 
__»¡riù
, const * __restrict,

465 
_IO_va_li¡
, *
__»¡riù
);

466 
_IO_vårštf
 (
_IO_FILE
 *
__»¡riù
, const *__restrict,

467 
_IO_va_li¡
);

468 
_IO_ssize_t
 
_IO_·dn
 (
_IO_FILE
 *, , _IO_ssize_t);

469 
_IO_size_t
 
_IO_sg‘n
 (
_IO_FILE
 *, *, _IO_size_t);

471 
_IO_off64_t
 
_IO_£ekoff
 (
_IO_FILE
 *, _IO_off64_t, , );

472 
_IO_off64_t
 
_IO_£ekpos
 (
_IO_FILE
 *, _IO_off64_t, );

474 
_IO_ä“_backup_¬—
 (
_IO_FILE
 *è
__THROW
;

476 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


477 
_IO_wšt_t
 
_IO_g‘wc
 (
_IO_FILE
 *
__å
);

478 
_IO_wšt_t
 
_IO_putwc
 (
wch¬_t
 
__wc
, 
_IO_FILE
 *
__å
);

479 
_IO_fwide
 (
_IO_FILE
 *
__å
, 
__mode
è
__THROW
;

480 #ià
__GNUC__
 >= 2

483 #ià
defšed
 
_LIBC
 && defšed 
SHARED


484 
	~<shlib-com·t.h
>

485 #ià
SHLIB_COMPAT
 (
libc
, 
GLIBC_2_0
, 
GLIBC_2_1
)

486 
	#_IO_fwide_maybe_šcom·tibË
 \

487 (
	`__butš_ex³ù
 (&
_IO_¡dš_u£d
 =ğ
NULL
, 0))

	)

488 cÚ¡ 
_IO_¡dš_u£d
;

489 
w—k_ex‹º
 (
_IO_¡dš_u£d
);

492 #iâdeà
_IO_fwide_maybe_šcom·tibË


493 
	#_IO_fwide_maybe_šcom·tibË
 (0)

	)

497 
	#_IO_fwide
(
__å
, 
__mode
) \

498 ({ 
__»suÉ
 = (
__mode
); \

499 ià(
__»suÉ
 < 0 && ! 
_IO_fwide_maybe_šcom·tibË
) \

501 ià((
__å
)->
_mode
 == 0) \

503 (
__å
)->
_mode
 = -1; \

504 
__»suÉ
 = (
__å
)->
_mode
; \

506 ià(
	`__butš_cÚ¡ªt_p
 (
__mode
) && (__mode) == 0) \

507 
__»suÉ
 = 
_IO_fwide_maybe_šcom·tibË
 ? -1 : (
__å
)->
_mode
; \

509 
__»suÉ
 = 
	`_IO_fwide
 (
__å
, __result); \

510 
__»suÉ
; })

	)

513 
_IO_vfwsÿnf
 (
_IO_FILE
 * 
__»¡riù
, cÚ¡ 
wch¬_t
 * __restrict,

514 
_IO_va_li¡
, *
__»¡riù
);

515 
_IO_vfw´štf
 (
_IO_FILE
 *
__»¡riù
, cÚ¡ 
wch¬_t
 *__restrict,

516 
_IO_va_li¡
);

517 
_IO_ssize_t
 
_IO_w·dn
 (
_IO_FILE
 *, 
wšt_t
, _IO_ssize_t);

518 
_IO_ä“_wbackup_¬—
 (
_IO_FILE
 *è
__THROW
;

521 #ifdeà
__LDBL_COMPAT


522 
	~<b™s/libio-ldbl.h
>

525 #ifdeà
__ılu¥lus


	@/usr/include/xlocale.h

20 #iâdeà
_XLOCALE_H


21 
	#_XLOCALE_H
 1

	)

27 
	s__loÿË_¡ruù


30 
__loÿË_d©a
 *
	m__loÿËs
[13];

33 cÚ¡ *
	m__ùy³_b
;

34 cÚ¡ *
	m__ùy³_tŞow”
;

35 cÚ¡ *
	m__ùy³_touµ”
;

38 cÚ¡ *
	m__Çmes
[13];

39 } *
	t__loÿË_t
;

42 
__loÿË_t
 
	tloÿË_t
;

	@/usr/include/_G_config.h

4 #iâdeà
_G_cÚfig_h


5 
	#_G_cÚfig_h
 1

	)

9 
	~<b™s/ty³s.h
>

10 
	#__Ãed_size_t


	)

11 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


12 
	#__Ãed_wch¬_t


	)

14 
	#__Ãed_NULL


	)

15 
	~<¡ddef.h
>

16 
	#__Ãed_mb¡©e_t


	)

17 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


18 
	#__Ãed_wšt_t


	)

20 
	~<wch¬.h
>

23 
__off_t
 
	m__pos
;

24 
__mb¡©e_t
 
	m__¡©e
;

25 } 
	t_G_åos_t
;

28 
__off64_t
 
	m__pos
;

29 
__mb¡©e_t
 
	m__¡©e
;

30 } 
	t_G_åos64_t
;

31 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


32 
	~<gcÚv.h
>

35 
__gcÚv_šfo
 
	m__cd
;

38 
__gcÚv_šfo
 
	m__cd
;

39 
__gcÚv_¡•_d©a
 
	m__d©a
;

40 } 
	m__combšed
;

41 } 
	t_G_icÚv_t
;

46 
	#_G_va_li¡
 
__gnuc_va_li¡


	)

48 
	#_G_HAVE_MMAP
 1

	)

49 
	#_G_HAVE_MREMAP
 1

	)

51 
	#_G_IO_IO_FILE_VERSION
 0x20001

	)

54 
	#_G_HAVE_ST_BLKSIZE
 
	`defšed
 (
_STATBUF_ST_BLKSIZE
)

	)

56 
	#_G_BUFSIZ
 8192

	)

	@/usr/include/ctype.h

22 #iâdef 
_CTYPE_H


23 
	#_CTYPE_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 
	g__BEGIN_DECLS


30 #iâdeà
_ISb™


39 
	~<’dŸn.h
>

40 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


41 
	#_ISb™
(
b™
è(1 << (b™))

	)

43 
	#_ISb™
(
b™
è((b™è< 8 ? ((1 << (b™)è<< 8è: ((1 << (b™)è>> 8))

	)

48 
	m_ISuµ”
 = 
_ISb™
 (0),

49 
	m_ISlow”
 = 
_ISb™
 (1),

50 
	m_IS®pha
 = 
_ISb™
 (2),

51 
	m_ISdig™
 = 
_ISb™
 (3),

52 
	m_ISxdig™
 = 
_ISb™
 (4),

53 
	m_IS¥aû
 = 
_ISb™
 (5),

54 
	m_IS´št
 = 
_ISb™
 (6),

55 
	m_ISg¿ph
 = 
_ISb™
 (7),

56 
	m_ISbÏnk
 = 
_ISb™
 (8),

57 
	m_ISúŒl
 = 
_ISb™
 (9),

58 
	m_ISpunù
 = 
_ISb™
 (10),

59 
	m_IS®num
 = 
_ISb™
 (11)

79 cÚ¡ **
	$__ùy³_b_loc
 ()

80 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

81 cÚ¡ 
__št32_t
 **
	$__ùy³_tŞow”_loc
 ()

82 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

83 cÚ¡ 
__št32_t
 **
	$__ùy³_touµ”_loc
 ()

84 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

87 #iâdeà
__ılu¥lus


88 
	#__isùy³
(
c
, 
ty³
) \

89 ((*
	`__ùy³_b_loc
 ())[(è(
c
)] & (è
ty³
)

	)

90 #–ià
defšed
 
__USE_EXTERN_INLINES


91 
	#__isùy³_f
(
ty³
) \

92 
__ex‹º_šlše
 \

93 
is
##
	`ty³
 (
__c
è
__THROW
 \

95  (*
	`__ùy³_b_loc
 ())[(è(
__c
)] & (è
_IS
##
ty³
; \

96 
	}

	)
}

99 
	#__i§scii
(
c
è(((cè& ~0x7fè=ğ0è

	)

100 
	#__tßscii
(
c
è((cè& 0x7fè

	)

102 
	#__exùy³
(
Çme
è
	`Çme
 (è
__THROW


	)

104 
__BEGIN_NAMESPACE_STD


110 
__exùy³
 (
i§Êum
);

111 
__exùy³
 (
i§Íha
);

112 
__exùy³
 (
isúŒl
);

113 
__exùy³
 (
isdig™
);

114 
__exùy³
 (
i¦ow”
);

115 
__exùy³
 (
isg¿ph
);

116 
__exùy³
 (
i¥ršt
);

117 
__exùy³
 (
i¥unù
);

118 
__exùy³
 (
is¥aû
);

119 
__exùy³
 (
isuµ”
);

120 
__exùy³
 (
isxdig™
);

124 
	$tŞow”
 (
__c
è
__THROW
;

127 
	$touµ”
 (
__c
è
__THROW
;

129 
__END_NAMESPACE_STD


133 #ifdef 
__USE_ISOC99


134 
__BEGIN_NAMESPACE_C99


136 
	`__exùy³
 (
isbÏnk
);

138 
__END_NAMESPACE_C99


141 #ifdeà
__USE_GNU


143 
	$isùy³
 (
__c
, 
__mask
è
__THROW
;

146 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


150 
	$i§scii
 (
__c
è
__THROW
;

154 
	$tßscii
 (
__c
è
__THROW
;

158 
	`__exùy³
 (
_touµ”
);

159 
	`__exùy³
 (
_tŞow”
);

163 
	#__tobody
(
c
, 
f
, 
a
, 
¬gs
) \

164 (
__ex‹nsiÚ__
 \

165 ({ 
__»s
; \

166 ià( (
c
) > 1) \

168 ià(
	`__butš_cÚ¡ªt_p
 (
c
)) \

170 
__c
 = (
c
); \

171 
__»s
 = 
__c
 < -128 || __ø> 255 ? __ø: (
a
)[__c]; \

174 
__»s
 = 
f
 
¬gs
; \

177 
__»s
 = (
a
)[(è(
c
)]; \

178 
__»s
; 
	}
}))

	)

180 #ià!
defšed
 
__NO_CTYPE


181 #ifdeà
__isùy³_f


182 
	$__isùy³_f
 (
®num
)

183 
	$__isùy³_f
 (
®pha
)

184 
	$__isùy³_f
 (
úŒl
)

185 
	$__isùy³_f
 (
dig™
)

186 
	$__isùy³_f
 (
low”
)

187 
	$__isùy³_f
 (
g¿ph
)

188 
	$__isùy³_f
 (
´št
)

189 
	$__isùy³_f
 (
punù
)

190 
	$__isùy³_f
 (
¥aû
)

191 
	$__isùy³_f
 (
uµ”
)

192 
	$__isùy³_f
 (
xdig™
)

193 #ifdeà
__USE_ISOC99


194 
	$__isùy³_f
 (
bÏnk
)

196 #–ià
defšed
 
__isùy³


197 
	#i§Êum
(
c
è
	`__isùy³
((c), 
_IS®num
)

	)

198 
	#i§Íha
(
c
è
	`__isùy³
((c), 
_IS®pha
)

	)

199 
	#isúŒl
(
c
è
	`__isùy³
((c), 
_ISúŒl
)

	)

200 
	#isdig™
(
c
è
	`__isùy³
((c), 
_ISdig™
)

	)

201 
	#i¦ow”
(
c
è
	`__isùy³
((c), 
_ISlow”
)

	)

202 
	#isg¿ph
(
c
è
	`__isùy³
((c), 
_ISg¿ph
)

	)

203 
	#i¥ršt
(
c
è
	`__isùy³
((c), 
_IS´št
)

	)

204 
	#i¥unù
(
c
è
	`__isùy³
((c), 
_ISpunù
)

	)

205 
	#is¥aû
(
c
è
	`__isùy³
((c), 
_IS¥aû
)

	)

206 
	#isuµ”
(
c
è
	`__isùy³
((c), 
_ISuµ”
)

	)

207 
	#isxdig™
(
c
è
	`__isùy³
((c), 
_ISxdig™
)

	)

208 #ifdeà
__USE_ISOC99


209 
	#isbÏnk
(
c
è
	`__isùy³
((c), 
_ISbÏnk
)

	)

213 #ifdeà
__USE_EXTERN_INLINES


214 
__ex‹º_šlše
 

215 
	`__NTH
 (
	$tŞow”
 (
__c
))

217  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_tŞow”_loc
 ())[__c] : __c;

218 
	}
}

220 
__ex‹º_šlše
 

221 
__NTH
 (
	$touµ”
 (
__c
))

223  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_touµ”_loc
 ())[__c] : __c;

224 
	}
}

227 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


228 
	#tŞow”
(
c
è
	`__tobody
 (c, 
tŞow”
, *
	`__ùy³_tŞow”_loc
 (), (c))

	)

229 
	#touµ”
(
c
è
	`__tobody
 (c, 
touµ”
, *
	`__ùy³_touµ”_loc
 (), (c))

	)

232 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


233 
	#i§scii
(
c
è
	`__i§scii
 (c)

	)

234 
	#tßscii
(
c
è
	`__tßscii
 (c)

	)

236 
	#_tŞow”
(
c
è((è(*
	`__ùy³_tŞow”_loc
 ())[(è(c)])

	)

237 
	#_touµ”
(
c
è((è(*
	`__ùy³_touµ”_loc
 ())[(è(c)])

	)

243 #ifdeà
__USE_XOPEN2K8


257 
	~<xloÿË.h
>

261 
	#__isùy³_l
(
c
, 
ty³
, 
loÿË
) \

262 ((
loÿË
)->
__ùy³_b
[(è(
c
)] & (è
ty³
)

	)

264 
	#__exùy³_l
(
Çme
) \

265 
	`Çme
 (, 
__loÿË_t
è
__THROW


	)

271 
__exùy³_l
 (
i§Êum_l
);

272 
__exùy³_l
 (
i§Íha_l
);

273 
__exùy³_l
 (
isúŒl_l
);

274 
__exùy³_l
 (
isdig™_l
);

275 
__exùy³_l
 (
i¦ow”_l
);

276 
__exùy³_l
 (
isg¿ph_l
);

277 
__exùy³_l
 (
i¥ršt_l
);

278 
__exùy³_l
 (
i¥unù_l
);

279 
__exùy³_l
 (
is¥aû_l
);

280 
__exùy³_l
 (
isuµ”_l
);

281 
__exùy³_l
 (
isxdig™_l
);

283 
__exùy³_l
 (
isbÏnk_l
);

287 
	$__tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

288 
	$tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

291 
	$__touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

292 
	$touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

294 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


295 
	#__tŞow”_l
(
c
, 
loÿË
) \

296 
	`__tobody
 (
c
, 
__tŞow”_l
, (
loÿË
)->
__ùy³_tŞow”
, (c,†oÿË))

	)

297 
	#__touµ”_l
(
c
, 
loÿË
) \

298 
	`__tobody
 (
c
, 
__touµ”_l
, (
loÿË
)->
__ùy³_touµ”
, (c,†oÿË))

	)

299 
	#tŞow”_l
(
c
, 
loÿË
è
	`__tŞow”_l
 ((c), (loÿË))

	)

300 
	#touµ”_l
(
c
, 
loÿË
è
	`__touµ”_l
 ((c), (loÿË))

	)

304 #iâdeà
__NO_CTYPE


305 
	#__i§Êum_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®num
, (l))

	)

306 
	#__i§Íha_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®pha
, (l))

	)

307 
	#__isúŒl_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISúŒl
, (l))

	)

308 
	#__isdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISdig™
, (l))

	)

309 
	#__i¦ow”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISlow”
, (l))

	)

310 
	#__isg¿ph_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISg¿ph
, (l))

	)

311 
	#__i¥ršt_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS´št
, (l))

	)

312 
	#__i¥unù_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISpunù
, (l))

	)

313 
	#__is¥aû_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS¥aû
, (l))

	)

314 
	#__isuµ”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISuµ”
, (l))

	)

315 
	#__isxdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISxdig™
, (l))

	)

317 
	#__isbÏnk_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISbÏnk
, (l))

	)

319 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


320 
	#__i§scii_l
(
c
,
l
è(Ö), 
	`__i§scii
 (c))

	)

321 
	#__tßscii_l
(
c
,
l
è(Ö), 
	`__tßscii
 (c))

	)

324 
	#i§Êum_l
(
c
,
l
è
	`__i§Êum_l
 ((c), (l))

	)

325 
	#i§Íha_l
(
c
,
l
è
	`__i§Íha_l
 ((c), (l))

	)

326 
	#isúŒl_l
(
c
,
l
è
	`__isúŒl_l
 ((c), (l))

	)

327 
	#isdig™_l
(
c
,
l
è
	`__isdig™_l
 ((c), (l))

	)

328 
	#i¦ow”_l
(
c
,
l
è
	`__i¦ow”_l
 ((c), (l))

	)

329 
	#isg¿ph_l
(
c
,
l
è
	`__isg¿ph_l
 ((c), (l))

	)

330 
	#i¥ršt_l
(
c
,
l
è
	`__i¥ršt_l
 ((c), (l))

	)

331 
	#i¥unù_l
(
c
,
l
è
	`__i¥unù_l
 ((c), (l))

	)

332 
	#is¥aû_l
(
c
,
l
è
	`__is¥aû_l
 ((c), (l))

	)

333 
	#isuµ”_l
(
c
,
l
è
	`__isuµ”_l
 ((c), (l))

	)

334 
	#isxdig™_l
(
c
,
l
è
	`__isxdig™_l
 ((c), (l))

	)

336 
	#isbÏnk_l
(
c
,
l
è
	`__isbÏnk_l
 ((c), (l))

	)

338 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


339 
	#i§scii_l
(
c
,
l
è
	`__i§scii_l
 ((c), (l))

	)

340 
	#tßscii_l
(
c
,
l
è
	`__tßscii_l
 ((c), (l))

	)

347 
__END_DECLS


	@/usr/include/stdc-predef.h

18 #iâdef 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

36 #ifdeà
__GCC_IEC_559


37 #ià
__GCC_IEC_559
 > 0

38 
	#__STDC_IEC_559__
 1

	)

41 
	#__STDC_IEC_559__
 1

	)

44 #ifdeà
__GCC_IEC_559_COMPLEX


45 #ià
__GCC_IEC_559_COMPLEX
 > 0

46 
	#__STDC_IEC_559_COMPLEX__
 1

	)

49 
	#__STDC_IEC_559_COMPLEX__
 1

	)

54 
	#__STDC_ISO_10646__
 201103L

	)

57 
	#__STDC_NO_THREADS__
 1

	)

	@/usr/include/endian.h

18 #iâdef 
_ENDIAN_H


19 
	#_ENDIAN_H
 1

	)

21 
	~<ã©u»s.h
>

31 
	#__LITTLE_ENDIAN
 1234

	)

32 
	#__BIG_ENDIAN
 4321

	)

33 
	#__PDP_ENDIAN
 3412

	)

36 
	~<b™s/’dŸn.h
>

40 #iâdeà
__FLOAT_WORD_ORDER


41 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

44 #ifdef 
__USE_BSD


45 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

46 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

47 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

48 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

51 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


52 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èLO, 
	)
HI

53 #–ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


54 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èHI, 
	)
LO

58 #ià
defšed
 
__USE_BSD
 && !defšed 
__ASSEMBLER__


60 
	~<b™s/by‹sw­.h
>

62 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


63 
	#htobe16
(
x
è
	`__bsw­_16
 (x)

	)

64 
	#htŞe16
(
x
è(x)

	)

65 
	#be16toh
(
x
è
	`__bsw­_16
 (x)

	)

66 
	#Ë16toh
(
x
è(x)

	)

68 
	#htobe32
(
x
è
	`__bsw­_32
 (x)

	)

69 
	#htŞe32
(
x
è(x)

	)

70 
	#be32toh
(
x
è
	`__bsw­_32
 (x)

	)

71 
	#Ë32toh
(
x
è(x)

	)

73 
	#htobe64
(
x
è
	`__bsw­_64
 (x)

	)

74 
	#htŞe64
(
x
è(x)

	)

75 
	#be64toh
(
x
è
	`__bsw­_64
 (x)

	)

76 
	#Ë64toh
(
x
è(x)

	)

79 
	#htobe16
(
x
è(x)

	)

80 
	#htŞe16
(
x
è
	`__bsw­_16
 (x)

	)

81 
	#be16toh
(
x
è(x)

	)

82 
	#Ë16toh
(
x
è
	`__bsw­_16
 (x)

	)

84 
	#htobe32
(
x
è(x)

	)

85 
	#htŞe32
(
x
è
	`__bsw­_32
 (x)

	)

86 
	#be32toh
(
x
è(x)

	)

87 
	#Ë32toh
(
x
è
	`__bsw­_32
 (x)

	)

89 
	#htobe64
(
x
è(x)

	)

90 
	#htŞe64
(
x
è
	`__bsw­_64
 (x)

	)

91 
	#be64toh
(
x
è(x)

	)

92 
	#Ë64toh
(
x
è
	`__bsw­_64
 (x)

	)

	@/usr/include/gconv.h

22 #iâdeà
_GCONV_H


23 
	#_GCONV_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	#__Ãed_mb¡©e_t


	)

27 
	#__Ãed_wšt_t


	)

28 
	~<wch¬.h
>

29 
	#__Ãed_size_t


	)

30 
	#__Ãed_wch¬_t


	)

31 
	~<¡ddef.h
>

34 
	#__UNKNOWN_10646_CHAR
 ((
wch¬_t
è0xfffd)

	)

39 
	m__GCONV_OK
 = 0,

40 
	m__GCONV_NOCONV
,

41 
	m__GCONV_NODB
,

42 
	m__GCONV_NOMEM
,

44 
	m__GCONV_EMPTY_INPUT
,

45 
	m__GCONV_FULL_OUTPUT
,

46 
	m__GCONV_ILLEGAL_INPUT
,

47 
	m__GCONV_INCOMPLETE_INPUT
,

49 
	m__GCONV_ILLEGAL_DESCRIPTOR
,

50 
	m__GCONV_INTERNAL_ERROR


57 
	m__GCONV_IS_LAST
 = 0x0001,

58 
	m__GCONV_IGNORE_ERRORS
 = 0x0002,

59 
	m__GCONV_SWAP
 = 0x0004

64 
	g__gcÚv_¡•
;

65 
	g__gcÚv_¡•_d©a
;

66 
	g__gcÚv_lßded_objeù
;

67 
	g__gcÚv_Œªs_d©a
;

71 (*
	t__gcÚv_fù
è(
	t__gcÚv_¡•
 *, 
	t__gcÚv_¡•_d©a
 *,

73 **, 
	tsize_t
 *, , );

76 
	$wšt_t
 (*
	t__gcÚv_btowc_fù
è(
	t__gcÚv_¡•
 *, );

79 (*
	t__gcÚv_š™_fù
è(
	t__gcÚv_¡•
 *);

80 (*
	t__gcÚv_’d_fù
è(
	t__gcÚv_¡•
 *);

84 (*
	t__gcÚv_Œªs_fù
è(
	t__gcÚv_¡•
 *,

85 
	t__gcÚv_¡•_d©a
 *, *,

89 
	tsize_t
 *);

92 (*
	t__gcÚv_Œªs_cÚ‹xt_fù
) (*, const *,

97 (*
	t__gcÚv_Œªs_qu”y_fù
) (const *, const ***,

98 
	tsize_t
 *);

101 (*
	t__gcÚv_Œªs_š™_fù
) (**, const *);

102 (*
	t__gcÚv_Œªs_’d_fù
) (*);

104 
	s__gcÚv_Œªs_d©a


107 
__gcÚv_Œªs_fù
 
__Œªs_fù
;

108 
__gcÚv_Œªs_cÚ‹xt_fù
 
__Œªs_cÚ‹xt_fù
;

109 
__gcÚv_Œªs_’d_fù
 
__Œªs_’d_fù
;

110 *
__d©a
;

111 
__gcÚv_Œªs_d©a
 *
__Ãxt
;

116 
	s__gcÚv_¡•


118 
__gcÚv_lßded_objeù
 *
__shlib_hªdË
;

119 cÚ¡ *
__modÇme
;

121 
__couÁ”
;

123 *
__äom_Çme
;

124 *
__to_Çme
;

126 
__gcÚv_fù
 
__fù
;

127 
__gcÚv_btowc_fù
 
__btowc_fù
;

128 
__gcÚv_š™_fù
 
__š™_fù
;

129 
__gcÚv_’d_fù
 
__’d_fù
;

133 
__mš_Ãeded_äom
;

134 
__max_Ãeded_äom
;

135 
__mš_Ãeded_to
;

136 
__max_Ãeded_to
;

139 
__¡©eful
;

141 *
__d©a
;

146 
	s__gcÚv_¡•_d©a


148 *
__outbuf
;

149 *
__outbuãnd
;

153 
__æags
;

157 
__švoÿtiÚ_couÁ”
;

161 
__š‹º®_u£
;

163 
__mb¡©e_t
 *
__¡©•
;

164 
__mb¡©e_t
 
__¡©e
;

168 
__gcÚv_Œªs_d©a
 *
__Œªs
;

173 
	s__gcÚv_šfo


175 
size_t
 
__n¡•s
;

176 
__gcÚv_¡•
 *
__¡•s
;

177 
__ex‹nsiÚ__
 
__gcÚv_¡•_d©a
 
__d©a
 
__æex¬r
;

178 } *
	t__gcÚv_t
;

	@/usr/include/wchar.h

23 #iâdeà
_WCHAR_H


25 #ià!
defšed
 
__Ãed_mb¡©e_t
 && !defšed 
__Ãed_wšt_t


26 
	#_WCHAR_H
 1

	)

27 
	~<ã©u»s.h
>

30 #ifdeà
_WCHAR_H


32 
	#__Ãed___FILE


	)

33 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


34 
	#__Ãed_FILE


	)

36 
	~<¡dio.h
>

38 
	#__Ãed___va_li¡


	)

39 
	~<¡d¬g.h
>

41 
	~<b™s/wch¬.h
>

44 
	#__Ãed_size_t


	)

45 
	#__Ãed_wch¬_t


	)

46 
	#__Ãed_NULL


	)

48 #ià
defšed
 
_WCHAR_H
 || defšed 
__Ãed_wšt_t
 || !defšed 
__WINT_TYPE__


49 #undeà
__Ãed_wšt_t


50 
	#__Ãed_wšt_t


	)

51 
	~<¡ddef.h
>

55 #iâdeà
_WINT_T


60 
	#_WINT_T


	)

61 
	twšt_t
;

65 #ià
defšed
 
__ılu¥lus
 && defšed 
_GLIBCPP_USE_NAMESPACES
 \

66 && 
defšed
 
__WINT_TYPE__


67 
__BEGIN_NAMESPACE_STD


68 
__WINT_TYPE__
 
	twšt_t
;

69 
	g__END_NAMESPACE_STD


74 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

75 
	#__CORRECT_ISO_CPP_WCHAR_H_PROTO


	)

79 #ià(
defšed
 
_WCHAR_H
 || defšed 
__Ãed_mb¡©e_t
è&& !defšed 
____mb¡©e_t_defšed


80 
	#____mb¡©e_t_defšed
 1

	)

84 
	m__couÁ
;

87 #ifdeà
__WINT_TYPE__


88 
__WINT_TYPE__
 
	m__wch
;

90 
wšt_t
 
	m__wch
;

92 
	m__wchb
[4];

93 } 
	m__v®ue
;

94 } 
	t__mb¡©e_t
;

96 #undeà
__Ãed_mb¡©e_t


101 #ifdeà
_WCHAR_H


103 #iâdeà
__mb¡©e_t_defšed


104 
__BEGIN_NAMESPACE_C99


106 
__mb¡©e_t
 
	tmb¡©e_t
;

107 
	g__END_NAMESPACE_C99


108 
	#__mb¡©e_t_defšed
 1

	)

111 #ifdeà
__USE_GNU


112 
	$__USING_NAMESPACE_C99
(
mb¡©e_t
)

115 #iâdeà
WCHAR_MIN


117 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

118 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

121 #iâdeà
WEOF


122 
	#WEOF
 (0xffffffffu)

	)

127 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_UNIX98


128 
	~<wùy³.h
>

132 
__BEGIN_DECLS


134 
__BEGIN_NAMESPACE_STD


137 
tm
;

138 
__END_NAMESPACE_STD


142 
	$__USING_NAMESPACE_STD
(
tm
)

145 
__BEGIN_NAMESPACE_STD


147 
wch¬_t
 *
	$wcsıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

148 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

150 
wch¬_t
 *
	$wc¢ıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

151 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

152 
__THROW
;

155 
wch¬_t
 *
	$wcsÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

156 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

158 
wch¬_t
 *
	$wc¢ÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

159 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

160 
__THROW
;

163 
	$wcscmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
)

164 
__THROW
 
__©Œibu‹_pu»__
;

166 
	$wc¢cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

167 
__THROW
 
__©Œibu‹_pu»__
;

168 
__END_NAMESPACE_STD


170 #ifdeà
__USE_XOPEN2K8


172 
	$wcsÿ£cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

175 
	$wc¢ÿ£cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

176 
size_t
 
__n
è
__THROW
;

180 
	~<xloÿË.h
>

182 
	$wcsÿ£cmp_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

183 
__loÿË_t
 
__loc
è
__THROW
;

185 
	$wc¢ÿ£cmp_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

186 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

189 
__BEGIN_NAMESPACE_STD


192 
	$wcscŞl
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

196 
size_t
 
	$wcsxäm
 (
wch¬_t
 *
__»¡riù
 
__s1
,

197 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

198 
__END_NAMESPACE_STD


200 #ifdeà
__USE_XOPEN2K8


206 
	$wcscŞl_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

207 
__loÿË_t
 
__loc
è
__THROW
;

212 
size_t
 
	$wcsxäm_l
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

213 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

216 
wch¬_t
 *
	$wcsdup
 (cÚ¡ 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_m®loc__
;

219 
__BEGIN_NAMESPACE_STD


221 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


222 "C++" 
wch¬_t
 *
	$wcschr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

223 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

224 "C++" cÚ¡ 
wch¬_t
 *
	$wcschr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

225 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

227 
wch¬_t
 *
	$wcschr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

228 
__THROW
 
__©Œibu‹_pu»__
;

231 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


232 "C++" 
wch¬_t
 *
	$wc¤chr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

233 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

234 "C++" cÚ¡ 
wch¬_t
 *
	$wc¤chr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

235 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

237 
wch¬_t
 *
	$wc¤chr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

238 
__THROW
 
__©Œibu‹_pu»__
;

240 
__END_NAMESPACE_STD


242 #ifdeà
__USE_GNU


245 
wch¬_t
 *
	$wcschºul
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__wc
)

246 
__THROW
 
__©Œibu‹_pu»__
;

249 
__BEGIN_NAMESPACE_STD


252 
size_t
 
	$wcsc¥n
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__»jeù
)

253 
__THROW
 
__©Œibu‹_pu»__
;

256 
size_t
 
	$wcs¥n
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

257 
__THROW
 
__©Œibu‹_pu»__
;

259 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


260 "C++" 
wch¬_t
 *
	$wc¥brk
 (
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

261 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

262 "C++" cÚ¡ 
wch¬_t
 *
	$wc¥brk
 (cÚ¡ 
wch¬_t
 *
__wcs
,

263 cÚ¡ 
wch¬_t
 *
__acû±
)

264 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

266 
wch¬_t
 *
	$wc¥brk
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

267 
__THROW
 
__©Œibu‹_pu»__
;

270 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


271 "C++" 
wch¬_t
 *
	$wcs¡r
 (
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

272 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

273 "C++" cÚ¡ 
wch¬_t
 *
	$wcs¡r
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
,

274 cÚ¡ 
wch¬_t
 *
__ÃedË
)

275 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

277 
wch¬_t
 *
	$wcs¡r
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

278 
__THROW
 
__©Œibu‹_pu»__
;

282 
wch¬_t
 *
	$wc¡ok
 (
wch¬_t
 *
__»¡riù
 
__s
,

283 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__d–im
,

284 
wch¬_t
 **
__»¡riù
 
__±r
è
__THROW
;

287 
size_t
 
	$wc¦’
 (cÚ¡ 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_pu»__
;

288 
__END_NAMESPACE_STD


290 #ifdeà
__USE_XOPEN


292 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


293 "C++" 
wch¬_t
 *
	$wcswcs
 (
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

294 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

295 "C++" cÚ¡ 
wch¬_t
 *
	$wcswcs
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
,

296 cÚ¡ 
wch¬_t
 *
__ÃedË
)

297 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

299 
wch¬_t
 *
	$wcswcs
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

300 
__THROW
 
__©Œibu‹_pu»__
;

304 #ifdeà
__USE_XOPEN2K8


306 
size_t
 
	$wc¢Ën
 (cÚ¡ 
wch¬_t
 *
__s
, 
size_t
 
__maxËn
)

307 
__THROW
 
__©Œibu‹_pu»__
;

311 
__BEGIN_NAMESPACE_STD


313 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


314 "C++" 
wch¬_t
 *
	$wmemchr
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

315 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

316 "C++" cÚ¡ 
wch¬_t
 *
	$wmemchr
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__c
,

317 
size_t
 
__n
)

318 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

320 
wch¬_t
 *
	$wmemchr
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

321 
__THROW
 
__©Œibu‹_pu»__
;

325 
	$wmemcmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

326 
__THROW
 
__©Œibu‹_pu»__
;

329 
wch¬_t
 *
	$wmemıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

330 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

334 
wch¬_t
 *
	$wmemmove
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

335 
__THROW
;

338 
wch¬_t
 *
	$wmem£t
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
è
__THROW
;

339 
__END_NAMESPACE_STD


341 #ifdeà
__USE_GNU


344 
wch¬_t
 *
	$wmempıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

345 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
)

346 
__THROW
;

350 
__BEGIN_NAMESPACE_STD


353 
wšt_t
 
	$btowc
 (
__c
è
__THROW
;

357 
	$wùob
 (
wšt_t
 
__c
è
__THROW
;

361 
	$mbsš™
 (cÚ¡ 
mb¡©e_t
 *
__ps
è
__THROW
 
__©Œibu‹_pu»__
;

365 
size_t
 
	$mb¹owc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

366 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

367 
mb¡©e_t
 *
__»¡riù
 
__p
è
__THROW
;

370 
size_t
 
	$wütomb
 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wc
,

371 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

374 
size_t
 
	$__mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

375 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

376 
size_t
 
	$mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

377 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

378 
__END_NAMESPACE_STD


380 #ifdeà
__USE_EXTERN_INLINES


386 
wšt_t
 
	$__btowc_®Ÿs
 (
__c
è
	`__asm
 ("btowc");

387 
__ex‹º_šlše
 
wšt_t


388 
	`__NTH
 (
	$btowc
 (
__c
))

389 {  (
	`__butš_cÚ¡ªt_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

390 ? (
wšt_t
è
__c
 : 
	`__btowc_®Ÿs
 (__c)); 
	}
}

392 
	$__wùob_®Ÿs
 (
wšt_t
 
__c
è
	`__asm
 ("wctob");

393 
__ex‹º_šlše
 

394 
	`__NTH
 (
	$wùob
 (
wšt_t
 
__wc
))

395 {  (
	`__butš_cÚ¡ªt_p
 (
__wc
è&& __wø>ğ
L
'\0' && __wc <= L'\x7f'

396 ? (è
__wc
 : 
	`__wùob_®Ÿs
 (__wc)); 
	}
}

398 
__ex‹º_šlše
 
size_t


399 
__NTH
 (
	$mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

400 
mb¡©e_t
 *
__»¡riù
 
__ps
))

401 {  (
__ps
 !ğ
NULL


402 ? 
	`mb¹owc
 (
NULL
, 
__s
, 
__n
, 
__ps
è: 
	`__mb¾’
 (__s, __n, NULL)); 
	}
}

405 
__BEGIN_NAMESPACE_STD


408 
size_t
 
	$mb¤towcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

409 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

410 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

414 
size_t
 
	$wc¤tombs
 (*
__»¡riù
 
__d¡
,

415 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

416 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

417 
__END_NAMESPACE_STD


420 #ifdef 
__USE_XOPEN2K8


423 
size_t
 
	$mb¢¹owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

424 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

425 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

429 
size_t
 
	$wc¢¹ombs
 (*
__»¡riù
 
__d¡
,

430 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

431 
size_t
 
__nwc
, size_ˆ
__Ën
,

432 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

437 #ifdeà
__USE_XOPEN


439 
	$wcwidth
 (
wch¬_t
 
__c
è
__THROW
;

443 
	$wcswidth
 (cÚ¡ 
wch¬_t
 *
__s
, 
size_t
 
__n
è
__THROW
;

447 
__BEGIN_NAMESPACE_STD


450 
	$wc¡od
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

451 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

452 
__END_NAMESPACE_STD


454 #ifdeà
__USE_ISOC99


455 
__BEGIN_NAMESPACE_C99


457 
	$wc¡of
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

458 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

459 
	$wc¡Şd
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

460 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

461 
__END_NAMESPACE_C99


465 
__BEGIN_NAMESPACE_STD


468 
	$wc¡Ş
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

469 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

473 
	$wc¡oul
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

474 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

475 
__THROW
;

476 
__END_NAMESPACE_STD


478 #ifdeà
__USE_ISOC99


479 
__BEGIN_NAMESPACE_C99


482 
__ex‹nsiÚ__


483 
	$wc¡Şl
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

484 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

485 
__THROW
;

489 
__ex‹nsiÚ__


490 
	$wc¡ouÎ
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

491 
wch¬_t
 **
__»¡riù
 
__’d±r
,

492 
__ba£
è
__THROW
;

493 
__END_NAMESPACE_C99


496 #ifdeà
__USE_GNU


499 
__ex‹nsiÚ__


500 
	$wc¡oq
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

501 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

502 
__THROW
;

506 
__ex‹nsiÚ__


507 
	$wc¡ouq
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

508 
wch¬_t
 **
__»¡riù
 
__’d±r
,

509 
__ba£
è
__THROW
;

512 #ifdeà
__USE_GNU


526 
	~<xloÿË.h
>

530 
	$wc¡Ş_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

531 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
,

532 
__loÿË_t
 
__loc
è
__THROW
;

534 
	$wc¡oul_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

535 
wch¬_t
 **
__»¡riù
 
__’d±r
,

536 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

538 
__ex‹nsiÚ__


539 
	$wc¡Şl_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

540 
wch¬_t
 **
__»¡riù
 
__’d±r
,

541 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

543 
__ex‹nsiÚ__


544 
	$wc¡ouÎ_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

545 
wch¬_t
 **
__»¡riù
 
__’d±r
,

546 
__ba£
, 
__loÿË_t
 
__loc
)

547 
__THROW
;

549 
	$wc¡od_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

550 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

551 
__THROW
;

553 
	$wc¡of_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

554 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

555 
__THROW
;

557 
	$wc¡Şd_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

558 
wch¬_t
 **
__»¡riù
 
__’d±r
,

559 
__loÿË_t
 
__loc
è
__THROW
;

563 #ifdeà
__USE_XOPEN2K8


566 
wch¬_t
 *
	$wııy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

567 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

571 
wch¬_t
 *
	$wınıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

572 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

573 
__THROW
;

580 
__FILE
 *
	$İ’_wmem¡»am
 (
wch¬_t
 **
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
;

583 #ià
defšed
 
__USE_ISOC95
 || defšed 
__USE_UNIX98


584 
__BEGIN_NAMESPACE_STD


587 
	$fwide
 (
__FILE
 *
__å
, 
__mode
è
__THROW
;

594 
	`fw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

595 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

601 
	`w´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

604 
	$sw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

605 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

606 
__THROW
 ;

612 
	`vfw´štf
 (
__FILE
 *
__»¡riù
 
__s
,

613 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

614 
__gnuc_va_li¡
 
__¬g
)

620 
	`vw´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

621 
__gnuc_va_li¡
 
__¬g
)

625 
	$vsw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

626 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

627 
__gnuc_va_li¡
 
__¬g
)

628 
__THROW
 ;

635 
	`fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

636 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

642 
	`wsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

645 
	$swsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

646 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

647 
__THROW
 ;

649 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

650 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

651 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

652 #ifdeà
__REDIRECT


656 
	`__REDIRECT
 (
fwsÿnf
, (
__FILE
 *
__»¡riù
 
__¡»am
,

657 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

658 
__isoc99_fwsÿnf
)

660 
	`__REDIRECT
 (
wsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

661 
__isoc99_wsÿnf
)

663 
	`__REDIRECT_NTH
 (
swsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

664 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

665 ...), 
__isoc99_swsÿnf
)

668 
	`__isoc99_fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

669 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

670 
	`__isoc99_wsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

671 
	$__isoc99_swsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

672 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

673 
__THROW
;

674 
	#fwsÿnf
 
__isoc99_fwsÿnf


	)

675 
	#wsÿnf
 
__isoc99_wsÿnf


	)

676 
	#swsÿnf
 
__isoc99_swsÿnf


	)

680 
__END_NAMESPACE_STD


683 #ifdeà
__USE_ISOC99


684 
__BEGIN_NAMESPACE_C99


689 
	`vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

690 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

691 
__gnuc_va_li¡
 
__¬g
)

697 
	`vwsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

698 
__gnuc_va_li¡
 
__¬g
)

701 
	$vswsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

702 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

703 
__gnuc_va_li¡
 
__¬g
)

704 
__THROW
 ;

706 #ià!
defšed
 
__USE_GNU
 \

707 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

708 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

709 #ifdeà
__REDIRECT


710 
	`__REDIRECT
 (
vfwsÿnf
, (
__FILE
 *
__»¡riù
 
__s
,

711 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

712 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vfwsÿnf
)

714 
	`__REDIRECT
 (
vwsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

715 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vwsÿnf
)

717 
	`__REDIRECT_NTH
 (
vswsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

718 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

719 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vswsÿnf
)

722 
	`__isoc99_vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

723 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

724 
__gnuc_va_li¡
 
__¬g
);

725 
	`__isoc99_vwsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

726 
__gnuc_va_li¡
 
__¬g
);

727 
	$__isoc99_vswsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

728 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

729 
__gnuc_va_li¡
 
__¬g
è
__THROW
;

730 
	#vfwsÿnf
 
__isoc99_vfwsÿnf


	)

731 
	#vwsÿnf
 
__isoc99_vwsÿnf


	)

732 
	#vswsÿnf
 
__isoc99_vswsÿnf


	)

736 
__END_NAMESPACE_C99


740 
__BEGIN_NAMESPACE_STD


745 
wšt_t
 
	`fg‘wc
 (
__FILE
 *
__¡»am
);

746 
wšt_t
 
	`g‘wc
 (
__FILE
 *
__¡»am
);

752 
wšt_t
 
	`g‘wch¬
 ();

759 
wšt_t
 
	`åutwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

760 
wšt_t
 
	`putwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

766 
wšt_t
 
	`putwch¬
 (
wch¬_t
 
__wc
);

774 
wch¬_t
 *
	`fg‘ws
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

775 
__FILE
 *
__»¡riù
 
__¡»am
);

781 
	`åutws
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ws
,

782 
__FILE
 *
__»¡riù
 
__¡»am
);

789 
wšt_t
 
	`ung‘wc
 (wšt_ˆ
__wc
, 
__FILE
 *
__¡»am
);

790 
__END_NAMESPACE_STD


793 #ifdeà
__USE_GNU


801 
wšt_t
 
	`g‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

802 
wšt_t
 
	`g‘wch¬_uÆocked
 ();

810 
wšt_t
 
	`fg‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

818 
wšt_t
 
	`åutwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

827 
wšt_t
 
	`putwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

828 
wšt_t
 
	`putwch¬_uÆocked
 (
wch¬_t
 
__wc
);

837 
wch¬_t
 *
	`fg‘ws_uÆocked
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

838 
__FILE
 *
__»¡riù
 
__¡»am
);

846 
	`åutws_uÆocked
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ws
,

847 
__FILE
 *
__»¡riù
 
__¡»am
);

851 
__BEGIN_NAMESPACE_C99


855 
size_t
 
	$wcsáime
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

856 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

857 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

858 
__END_NAMESPACE_C99


860 #ifdeà
__USE_GNU


861 
	~<xloÿË.h
>

865 
size_t
 
	$wcsáime_l
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

866 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

867 cÚ¡ 
tm
 *
__»¡riù
 
__
,

868 
__loÿË_t
 
__loc
è
__THROW
;

877 #ià
defšed
 
__USE_UNIX98
 && !defšed 
__USE_GNU


878 
	#__Ãed_iswxxx


	)

879 
	~<wùy³.h
>

883 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


884 
	~<b™s/wch¬2.h
>

887 #ifdeà
__LDBL_COMPAT


888 
	~<b™s/wch¬-ldbl.h
>

891 
__END_DECLS


899 #undeà
__Ãed_mb¡©e_t


900 #undeà
__Ãed_wšt_t


	@/usr/include/wctype.h

23 #iâdeà
_WCTYPE_H


25 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 #iâdeà
__Ãed_iswxxx


29 
	#_WCTYPE_H
 1

	)

32 
	#__Ãed_wšt_t


	)

33 
	~<wch¬.h
>

37 #iâdeà
WEOF


38 
	#WEOF
 (0xffffffffu)

	)

41 #undeà
__Ãed_iswxxx


46 #iâdeà
__iswxxx_defšed


47 
	#__iswxxx_defšed
 1

	)

49 
__BEGIN_NAMESPACE_C99


52 
	twùy³_t
;

53 
	g__END_NAMESPACE_C99


55 #iâdeà
_ISwb™


60 
	~<’dŸn.h
>

61 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


62 
	#_ISwb™
(
b™
è(1 << (b™))

	)

64 
	#_ISwb™
(
b™
) \

65 ((
b™
) < 8 ? () ((1UL << (bit)) << 24) \

66 : ((
b™
) < 16 ? () ((1UL << (bit)) << 8) \

67 : ((
b™
) < 24 ? () ((1UL << (bit)) >> 8) \

68 : (è((1UL << (
b™
)è>> 24))))

	)

73 
	m__ISwuµ”
 = 0,

74 
	m__ISwlow”
 = 1,

75 
	m__ISw®pha
 = 2,

76 
	m__ISwdig™
 = 3,

77 
	m__ISwxdig™
 = 4,

78 
	m__ISw¥aû
 = 5,

79 
	m__ISw´št
 = 6,

80 
	m__ISwg¿ph
 = 7,

81 
	m__ISwbÏnk
 = 8,

82 
	m__ISwúŒl
 = 9,

83 
	m__ISwpunù
 = 10,

84 
	m__ISw®num
 = 11,

86 
	m_ISwuµ”
 = 
_ISwb™
 (
__ISwuµ”
),

87 
	m_ISwlow”
 = 
_ISwb™
 (
__ISwlow”
),

88 
	m_ISw®pha
 = 
_ISwb™
 (
__ISw®pha
),

89 
	m_ISwdig™
 = 
_ISwb™
 (
__ISwdig™
),

90 
	m_ISwxdig™
 = 
_ISwb™
 (
__ISwxdig™
),

91 
	m_ISw¥aû
 = 
_ISwb™
 (
__ISw¥aû
),

92 
	m_ISw´št
 = 
_ISwb™
 (
__ISw´št
),

93 
	m_ISwg¿ph
 = 
_ISwb™
 (
__ISwg¿ph
),

94 
	m_ISwbÏnk
 = 
_ISwb™
 (
__ISwbÏnk
),

95 
	m_ISwúŒl
 = 
_ISwb™
 (
__ISwúŒl
),

96 
	m_ISwpunù
 = 
_ISwb™
 (
__ISwpunù
),

97 
	m_ISw®num
 = 
_ISwb™
 (
__ISw®num
)

102 
__BEGIN_DECLS


104 
__BEGIN_NAMESPACE_C99


111 
	$isw®num
 (
wšt_t
 
__wc
è
__THROW
;

117 
	$isw®pha
 (
wšt_t
 
__wc
è
__THROW
;

120 
	$iswúŒl
 (
wšt_t
 
__wc
è
__THROW
;

124 
	$iswdig™
 (
wšt_t
 
__wc
è
__THROW
;

128 
	$iswg¿ph
 (
wšt_t
 
__wc
è
__THROW
;

133 
	$iswlow”
 (
wšt_t
 
__wc
è
__THROW
;

136 
	$isw´št
 (
wšt_t
 
__wc
è
__THROW
;

141 
	$iswpunù
 (
wšt_t
 
__wc
è
__THROW
;

146 
	$isw¥aû
 (
wšt_t
 
__wc
è
__THROW
;

151 
	$iswuµ”
 (
wšt_t
 
__wc
è
__THROW
;

156 
	$iswxdig™
 (
wšt_t
 
__wc
è
__THROW
;

161 #ifdeà
__USE_ISOC99


162 
	$iswbÏnk
 (
wšt_t
 
__wc
è
__THROW
;

171 
wùy³_t
 
	$wùy³
 (cÚ¡ *
__´İ”ty
è
__THROW
;

175 
	$iswùy³
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
è
__THROW
;

176 
__END_NAMESPACE_C99


183 
__BEGIN_NAMESPACE_C99


186 cÚ¡ 
	t__št32_t
 *
	twù¿ns_t
;

187 
__END_NAMESPACE_C99


188 #ifdeà
__USE_GNU


189 
	$__USING_NAMESPACE_C99
(
wù¿ns_t
)

192 
__BEGIN_NAMESPACE_C99


194 
wšt_t
 
	$towlow”
 (
wšt_t
 
__wc
è
__THROW
;

197 
wšt_t
 
	$towuµ”
 (
wšt_t
 
__wc
è
__THROW
;

198 
__END_NAMESPACE_C99


200 
__END_DECLS


207 #ifdeà
_WCTYPE_H


213 
__BEGIN_DECLS


215 
__BEGIN_NAMESPACE_C99


218 
wù¿ns_t
 
	$wù¿ns
 (cÚ¡ *
__´İ”ty
è
__THROW
;

221 
wšt_t
 
	$towù¿ns
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
è
__THROW
;

222 
__END_NAMESPACE_C99


224 #ifdeà
__USE_XOPEN2K8


226 
	~<xloÿË.h
>

230 
	$isw®num_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

236 
	$isw®pha_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

239 
	$iswúŒl_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

243 
	$iswdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

247 
	$iswg¿ph_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

252 
	$iswlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

255 
	$isw´št_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

260 
	$iswpunù_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

265 
	$isw¥aû_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

270 
	$iswuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

275 
	$iswxdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

280 
	$iswbÏnk_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

284 
wùy³_t
 
	$wùy³_l
 (cÚ¡ *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

285 
__THROW
;

289 
	$iswùy³_l
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
, 
__loÿË_t
 
__loÿË
)

290 
__THROW
;

298 
wšt_t
 
	$towlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

301 
wšt_t
 
	$towuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

305 
wù¿ns_t
 
	$wù¿ns_l
 (cÚ¡ *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

306 
__THROW
;

309 
wšt_t
 
	$towù¿ns_l
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
,

310 
__loÿË_t
 
__loÿË
è
__THROW
;

314 
__END_DECLS


	@
1
.
1
/usr/include
129
2450
bin/coff.h
bin/coff2flat.c
bin/coff2noff.c
bin/copyright.h
bin/d.c
bin/disasm.c
bin/encode.h
bin/execute.c
bin/instr.h
bin/int.h
bin/main.c
bin/noff.h
bin/opstrings.c
bin/out.c
bin/system.c
filesys/IndirectBlock.cc
filesys/IndirectBlock.h
filesys/directory.cc
filesys/directory.h
filesys/filehdr.cc
filesys/filehdr.h
filesys/filesys.cc
filesys/filesys.h
filesys/fstest.cc
filesys/openfile.cc
filesys/openfile.h
filesys/synchdisk.cc
filesys/synchdisk.h
machine/console.cc
machine/console.h
machine/disk.cc
machine/disk.h
machine/interrupt.cc
machine/interrupt.h
machine/machine.cc
machine/machine.h
machine/mipssim.cc
machine/mipssim.h
machine/network.cc
machine/network.h
machine/stats.cc
machine/stats.h
machine/sysdep.cc
machine/sysdep.h
machine/timer.cc
machine/timer.h
machine/translate.cc
machine/translate.h
network/nettest.cc
network/post.cc
network/post.h
test/exec-test1.c
test/exec-test2.c
test/exec2.c
test/halt.c
test/start.cc
test/testvm.c
test/testvm1.c
test/testvmexec.c
test/testvmexec2.c
test/testvmfork.c
test/testvmfork1.c
test/vm-test.c
threads/bool.h
threads/copyright.h
threads/list.cc
threads/list.h
threads/main.cc
threads/scheduler.cc
threads/scheduler.h
threads/stdarg-old.h
threads/stdarg-tmp.h
threads/stdarg.h
threads/switch.h
threads/synch.cc
threads/synch.h
threads/synchlist.cc
threads/synchlist.h
threads/system.cc
threads/system.h
threads/thread.cc
threads/thread.h
threads/threadtest.cc
threads/utility.cc
threads/utility.h
userprog/addrspace.cc
userprog/addrspace.h
userprog/bitmap.cc
userprog/bitmap.h
userprog/exception.cc
userprog/memorymanager.cc
userprog/memorymanager.h
userprog/openfilemanager.cc
userprog/openfilemanager.h
userprog/pcb.cc
userprog/pcb.h
userprog/processmanager.cc
userprog/processmanager.h
userprog/progtest.cc
userprog/syscall.h
userprog/sysopenfile.cc
userprog/sysopenfile.h
userprog/useropenfile.cc
userprog/useropenfile.h
vm/virtualmemorymanager.cc
vm/virtualmemorymanager.h
/usr/include/errno.h
/usr/include/fcntl.h
/usr/include/limits.h
/usr/include/signal.h
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/string.h
/usr/include/strings.h
/usr/include/syscall.h
/usr/include/time.h
/usr/include/unistd.h
/usr/include/alloca.h
/usr/include/features.h
/usr/include/getopt.h
/usr/include/libio.h
/usr/include/xlocale.h
/usr/include/_G_config.h
/usr/include/ctype.h
/usr/include/stdc-predef.h
/usr/include/endian.h
/usr/include/gconv.h
/usr/include/wchar.h
/usr/include/wctype.h
